# 测试用户数据说明

## 概述

本文档说明了系统中的测试用户数据，包括管理员、部门主管和普通员工账号的创建和使用方法。

## 测试用户账号

### 1. 管理员账号
- **用户名**: `admin`
- **密码**: `admin123`
- **角色**: `ROLE_ADMIN`
- **真实姓名**: 系统管理员
- **邮箱**: admin@smartoa.com
- **手机**: 13800138001
- **部门**: 管理部
- **权限**: 系统最高权限，包括用户管理、角色管理、系统配置等

### 2. 部门主管账号
- **用户名**: `manager`
- **密码**: `manager123`
- **角色**: `ROLE_MANAGER`
- **真实姓名**: 部门主管
- **邮箱**: manager@smartoa.com
- **手机**: 13800138002
- **部门**: 业务部
- **权限**: 部门管理、审批流程、用户管理（部分）等

### 3. 普通员工账号

#### employee1
- **用户名**: `employee1`
- **密码**: `123456`
- **角色**: `ROLE_EMPLOYEE`
- **真实姓名**: 张三
- **邮箱**: zhangsan@smartoa.com
- **手机**: 13800138003
- **部门**: 业务部

#### employee2
- **用户名**: `employee2`
- **密码**: `123456`
- **角色**: `ROLE_EMPLOYEE`
- **真实姓名**: 李四
- **邮箱**: lisi@smartoa.com
- **手机**: 13800138004
- **部门**: 业务部

#### employee3
- **用户名**: `employee3`
- **密码**: `123456`
- **角色**: `ROLE_EMPLOYEE`
- **真实姓名**: 王五
- **邮箱**: wangwu@smartoa.com
- **手机**: 13800138005
- **部门**: 技术部

#### employee4
- **用户名**: `employee4`
- **密码**: `123456`
- **角色**: `ROLE_EMPLOYEE`
- **真实姓名**: 赵六
- **邮箱**: zhaoliu@smartoa.com
- **手机**: 13800138006
- **部门**: 技术部

#### employee5
- **用户名**: `employee5`
- **密码**: `123456`
- **角色**: `ROLE_EMPLOYEE`
- **真实姓名**: 钱七
- **邮箱**: qianqi@smartoa.com
- **手机**: 13800138007
- **部门**: 财务部

## 密码安全

### BCrypt加密
- 所有密码都使用Spring Security的BCrypt算法进行加密
- BCrypt是一种安全的单向哈希算法，每次加密都会产生不同的哈希值
- 即使数据库被泄露，原始密码也无法被直接获取

### 密码验证
- 系统会自动验证用户输入的明文密码与数据库中的BCrypt哈希值
- 错误的密码无法通过验证，确保系统安全

## 数据初始化方式

### 方式一：SQL脚本初始化
使用 `backend/src/main/resources/sql/test_users_data.sql` 文件：

```bash
# 在MySQL中执行SQL脚本
mysql -u username -p database_name < backend/src/main/resources/sql/test_users_data.sql
```

### 方式二：Java代码初始化
使用 `TestDataInitializer` 类自动初始化：

1. 确保应用配置文件中包含 `dev` 或 `test` profile
2. 启动Spring Boot应用
3. 系统会自动检查并创建测试用户数据

```yaml
# application.yml
spring:
  profiles:
    active: dev  # 或 test
```

## 测试验证

### 运行密码验证测试
```bash
# 运行密码验证测试
mvn test -Dtest=PasswordValidationTest
```

### 生成新的BCrypt密码
```bash
# 运行密码生成工具
mvn exec:java -Dexec.mainClass="com.smartoa.util.PasswordGeneratorUtil"
```

## 安全注意事项

### 生产环境
- ⚠️ **重要**: 这些测试账号仅用于开发和测试环境
- 生产环境中必须删除或修改这些默认账号
- 生产环境应使用强密码策略

### 密码策略建议
- 最少8位字符
- 包含大小写字母、数字和特殊字符
- 定期更换密码
- 不使用常见密码

## 角色权限说明

### ROLE_ADMIN (系统管理员)
```json
[
  "system:*",
  "user:*", 
  "role:*",
  "permission:*",
  "audit:*",
  "config:*"
]
```

### ROLE_MANAGER (部门主管)
```json
[
  "dept:*",
  "approval:*",
  "user:read",
  "user:update",
  "workflow:*",
  "attendance:*",
  "profile:*",
  "document:*"
]
```

### ROLE_EMPLOYEE (普通员工)
```json
[
  "profile:*",
  "workflow:create",
  "workflow:read",
  "attendance:*",
  "document:read"
]
```

## 常见问题

### Q: 为什么无法登录？
A: 请检查：
1. 用户名和密码是否正确（区分大小写）
2. 用户状态是否为启用（status = 1）
3. 数据库连接是否正常
4. 测试数据是否已正确初始化

### Q: 如何重置测试数据？
A: 可以：
1. 重新运行SQL脚本
2. 删除用户数据后重启应用（如果启用了TestDataInitializer）
3. 手动在数据库中更新用户信息

### Q: 如何添加新的测试用户？
A: 可以：
1. 修改 `TestDataInitializer.java` 中的用户数据
2. 在SQL脚本中添加新的INSERT语句
3. 使用 `PasswordGeneratorUtil` 生成新密码的BCrypt哈希值

## 联系支持

如有问题，请联系开发团队或查看项目文档。