(function(){"use strict";var e={6752:function(e,a,t){var s=t(3751),l=t(641);const o={id:"app"};function i(e,a,t,s,i,n){const r=(0,l.g2)("router-view");return(0,l.uX)(),(0,l.CE)("div",o,[(0,l.bF)(r)])}var n={name:"App"},r=t(6262);const d=(0,r.A)(n,[["render",i]]);var c=d,u=t(5220),v=t(33);const p={class:"login-bg"},m={class:"login-container"},k={class:"login-card"},h={class:"logo-section"},b={class:"logo-icon"},g={class:"system-switch"},L={class:"switch-tabs"},f={class:"custom-input-wrapper"},y={class:"custom-input-wrapper"},x={key:0,class:"status-inline"},T={key:1,class:"form-footer"},A={class:"custom-input-wrapper"},w={class:"custom-input-wrapper"},C={class:"custom-input-wrapper"},F={class:"form-footer"},_={class:"info-section minimal"},E={class:"service-status"};function I(e,a,t,o,i,n){const r=(0,l.g2)("a-icon"),d=(0,l.g2)("a-form-item"),c=(0,l.g2)("a-button"),u=(0,l.g2)("a-form");return(0,l.uX)(),(0,l.CE)("div",p,[(0,l.Lk)("div",m,[(0,l.Lk)("div",k,[(0,l.Lk)("div",h,[(0,l.Lk)("div",b,[(0,l.bF)(r,{type:"robot"})]),a[12]||(a[12]=(0,l.Lk)("h1",{class:"system-title"},"Smart OA 系统登录",-1)),a[13]||(a[13]=(0,l.Lk)("div",{class:"accent-underline"},null,-1)),a[14]||(a[14]=(0,l.Lk)("p",{class:"subtitle"},"统一办公 · 高效协作",-1)),(0,l.Lk)("div",g,[(0,l.Lk)("div",L,[(0,l.Lk)("div",{class:(0,v.C4)(["switch-tab",{active:"admin"===e.selectedSystem}]),onClick:a[0]||(a[0]=a=>e.handleSystemChange("admin"))},[(0,l.bF)(r,{type:"setting"}),a[10]||(a[10]=(0,l.eW)(" 管理端 ",-1))],2),(0,l.Lk)("div",{class:(0,v.C4)(["switch-tab",{active:"user"===e.selectedSystem}]),onClick:a[1]||(a[1]=a=>e.handleSystemChange("user"))},[(0,l.bF)(r,{type:"user"}),a[11]||(a[11]=(0,l.eW)(" 用户端 ",-1))],2)])])]),e.isLogin?((0,l.uX)(),(0,l.Wv)(u,{key:0,model:e.loginForm,onFinish:e.onLoginFinish,autocomplete:"off",layout:"vertical",class:"login-form"},{default:(0,l.k6)(()=>[(0,l.bF)(d,{name:"username",rules:[{required:!0,message:"请输入用户名!"}],label:"用户名"},{default:(0,l.k6)(()=>[(0,l.Lk)("div",f,[(0,l.bF)(r,{type:"user",class:"input-icon"}),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":a[2]||(a[2]=a=>e.loginForm.username=a),type:"text",placeholder:"请输入用户名",class:"custom-input",autocomplete:"off"},null,512),[[s.Jo,e.loginForm.username]])])]),_:1}),(0,l.bF)(d,{name:"password",rules:[{required:!0,message:"请输入密码!"}],label:"密码"},{default:(0,l.k6)(()=>[(0,l.Lk)("div",y,[(0,l.bF)(r,{type:"lock",class:"input-icon"}),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":a[3]||(a[3]=a=>e.loginForm.password=a),type:"password",placeholder:"请输入密码",class:"custom-input",autocomplete:"off"},null,512),[[s.Jo,e.loginForm.password]])])]),_:1}),(0,l.bF)(d,null,{default:(0,l.k6)(()=>[(0,l.bF)(c,{type:"primary","html-type":"submit",block:"",size:"large",loading:e.loading,class:"login-button"},{default:(0,l.k6)(()=>[(0,l.bF)(r,{type:"login"}),a[15]||(a[15]=(0,l.eW)(" 登录系统 ",-1))]),_:1,__:[15]},8,["loading"])]),_:1}),null!==e.backendStatus?((0,l.uX)(),(0,l.CE)("div",x,[(0,l.bF)(r,{type:e.backendStatus?"check-circle":"close-circle",class:(0,v.C4)(["status-dot",e.backendStatus?"ok":"bad"])},null,8,["type","class"]),(0,l.Lk)("span",{class:(0,v.C4)(["status-label",e.backendStatus?"ok":"bad"])},(0,v.v_)(e.backendStatus?"后端服务正常":"后端服务未启动"),3),(0,l.Lk)("a",{onClick:a[4]||(a[4]=(...a)=>e.checkBackendStatus&&e.checkBackendStatus(...a)),class:"status-action"},"重新检查")])):(0,l.Q3)("",!0),"user"===e.selectedSystem?((0,l.uX)(),(0,l.CE)("div",T,[(0,l.Lk)("a",{onClick:a[5]||(a[5]=(...a)=>e.toggleForm&&e.toggleForm(...a)),class:"switch-link"},"没有账号? 点击注册")])):(0,l.Q3)("",!0)]),_:1},8,["model","onFinish"])):((0,l.uX)(),(0,l.Wv)(u,{key:1,model:e.registerForm,onFinish:e.onRegisterFinish,autocomplete:"off",layout:"vertical",class:"register-form"},{default:(0,l.k6)(()=>[(0,l.bF)(d,{name:"username",rules:[{required:!0,message:"请输入用户名!"},{min:3,message:"用户名至少3个字符!"},{pattern:/^[a-zA-Z0-9_]+$/,message:"用户名只能包含字母、数字和下划线!"}],label:"用户名"},{default:(0,l.k6)(()=>[(0,l.Lk)("div",A,[(0,l.bF)(r,{type:"user",class:"input-icon"}),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":a[6]||(a[6]=a=>e.registerForm.username=a),type:"text",placeholder:"请输入用户名",class:"custom-input",autocomplete:"off"},null,512),[[s.Jo,e.registerForm.username]])])]),_:1}),(0,l.bF)(d,{name:"password",rules:[{required:!0,message:"请输入密码!"},{min:6,message:"密码至少6个字符!"}],label:"密码"},{default:(0,l.k6)(()=>[(0,l.Lk)("div",w,[(0,l.bF)(r,{type:"lock",class:"input-icon"}),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":a[7]||(a[7]=a=>e.registerForm.password=a),type:"password",placeholder:"请输入密码",class:"custom-input",autocomplete:"off"},null,512),[[s.Jo,e.registerForm.password]])])]),_:1}),(0,l.bF)(d,{name:"confirmPassword",rules:[{required:!0,message:"请确认密码!"},{validator:e.validateConfirmPassword,message:"两次输入的密码不一致!"}],label:"确认密码"},{default:(0,l.k6)(()=>[(0,l.Lk)("div",C,[(0,l.bF)(r,{type:"safety",class:"input-icon"}),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":a[8]||(a[8]=a=>e.registerForm.confirmPassword=a),type:"password",placeholder:"请再次输入密码",class:"custom-input",autocomplete:"off"},null,512),[[s.Jo,e.registerForm.confirmPassword]])])]),_:1},8,["rules"]),(0,l.bF)(d,null,{default:(0,l.k6)(()=>[(0,l.bF)(c,{type:"primary","html-type":"submit",block:"",size:"large",loading:e.loading,class:"register-button"},{default:(0,l.k6)(()=>[(0,l.bF)(r,{type:"user-add"}),a[16]||(a[16]=(0,l.eW)(" 注册账号 ",-1))]),_:1,__:[16]},8,["loading"])]),_:1}),(0,l.Lk)("div",F,[(0,l.Lk)("a",{onClick:a[9]||(a[9]=(...a)=>e.toggleForm&&e.toggleForm(...a)),class:"switch-link"},"已有账号?返回登录")])]),_:1},8,["model","onFinish"]))]),(0,l.Lk)("div",_,[(0,l.Lk)("div",E,[a[18]||(a[18]=(0,l.Lk)("h3",{class:"section-title"},"服务状态",-1)),(0,l.Lk)("p",{class:(0,v.C4)(["status-message",{error:!e.backendStatus}])},(0,v.v_)(e.backendStatus?"后端服务运行正常，可登录":"后端服务未启动，请检查"),3),(0,l.bF)(c,{type:"default",size:"small",onClick:e.checkBackendStatus,class:"status-check-btn"},{default:(0,l.k6)(()=>a[17]||(a[17]=[(0,l.eW)("检查服务状态",-1)])),_:1,__:[17]},8,["onClick"])])])])])}var S=t(953),M=t(8787);const D=()=>{try{const e=localStorage.getItem("user");return e?JSON.parse(e):null}catch(e){return null}},U=()=>{const e=D();return e?e.username:localStorage.getItem("username")},R=(e,a=null)=>{const t=a||U();return t?`${t}_${e}`:e};class O{constructor(){this.currentUser=U()}setCurrentUser(e){this.currentUser=e}getUserData(e,a=null){try{const t=R(e,this.currentUser),s=localStorage.getItem(t);return s?JSON.parse(s):a}catch(t){return console.error("获取用户数据失败:",t),a}}saveUserData(e,a){try{const t=R(e,this.currentUser);return localStorage.setItem(t,JSON.stringify(a)),!0}catch(t){return console.error("保存用户数据失败:",t),!1}}removeUserData(e){try{const a=R(e,this.currentUser);return localStorage.removeItem(a),!0}catch(a){return console.error("删除用户数据失败:",a),!1}}getAllUserDataKeys(){const e=[],a=this.currentUser?`${this.currentUser}_`:"";for(let t=0;t<localStorage.length;t++){const s=localStorage.key(t);s&&s.startsWith(a)&&e.push(s)}return e}clearCurrentUserData(){try{const e=this.getAllUserDataKeys();return e.forEach(e=>localStorage.removeItem(e)),!0}catch(e){return console.error("清除用户数据失败:",e),!1}}getAllUsers(){try{const e=localStorage.getItem("users");return e?JSON.parse(e):[]}catch(e){return[]}}userExists(e){const a=this.getAllUsers();return a.some(a=>a.username===e)}getUserAvatar(e){return`https://api.dicebear.com/7.x/avataaars/svg?seed=${e}`}saveUserActivity(e){const a="userActivities",t=this.getUserData(a,[]);t.unshift({id:Date.now(),...e,timestamp:(new Date).toISOString()});const s=t.slice(0,20);this.saveUserData(a,s)}getUserActivities(){return this.getUserData("userActivities",[])}saveAttendanceRecords(e){this.saveUserData("attendanceRecords",e)}getAttendanceRecords(){return this.getUserData("attendanceRecords",[])}saveApprovalRecords(e){this.saveUserData("approvalRecords",e)}getApprovalRecords(){return this.getUserData("approvalRecords",[])}saveFileRecords(e){this.saveUserData("fileRecords",e)}getFileRecords(){return this.getUserData("fileRecords",[])}saveUserProfile(e){this.saveUserData("savedUserInfo",e)}getUserProfile(){return this.getUserData("savedUserInfo",null)}saveRecentActivities(e){this.saveUserData("recentActivities",e)}getRecentActivities(){return this.getUserData("recentActivities",[])}exportUserData(){const e={},a=this.getAllUserDataKeys();return a.forEach(a=>{const t=a.replace(`${this.currentUser}_`,"");e[t]=this.getUserData(t)}),{username:this.currentUser,exportTime:(new Date).toISOString(),data:e}}importUserData(e){try{return!(!e.username||!e.data)&&(Object.keys(e.data).forEach(a=>{this.saveUserData(a,e.data[a])}),!0)}catch(a){return console.error("导入用户数据失败:",a),!1}}}const P=new O,N=e=>P.saveUserActivity(e),K=()=>P.getUserActivities(),z=e=>P.saveAttendanceRecords(e),X=()=>P.getAttendanceRecords(),W=()=>P.getApprovalRecords(),j=()=>P.getFileRecords(),H=e=>P.setCurrentUser(e),q=()=>P.clearCurrentUserData(),J=()=>P.exportUserData(),V=e=>P.importUserData(e);var $=t(516),Q=t(2843),B=t(1199),G=t(5222),Y=t(6351);function Z(e){(void 0).PROD,$.T({app:e,dsn:(void 0).VITE_SENTRY_DSN||{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_SENTRY_DSN,integrations:[new Y.Jh({routingInstrumentation:Q.vueRouterInstrumentation(Ku),tracingOrigins:["localhost","your-domain.vercel.app",/^\//]})],tracesSampleRate:.1,environment:(void 0).MODE||"production",release:(void 0).VITE_APP_VERSION||"1.0.0",beforeSend(e,a){const t=a.originalException;return t&&t.message&&t.message.includes("Network Error")||t&&"CanceledError"===t.name||t&&t.message&&t.message.includes("User cancelled")?null:e},beforeBreadcrumb(e){if("navigation"===e.category&&e.data&&e.data.url){const a=new URL(e.data.url);a.searchParams.delete("token"),a.searchParams.delete("password"),e.data.url=a.toString()}return e},debug:(void 0).DEV||!1})}function ee(e,a={}){(void 0).PROD,B.Cp(e,{extra:a,tags:{component:a.component||"unknown",action:a.action||"unknown"}})}function ae(e){(void 0).PROD,B.gV({id:e.username,username:e.username,email:e.email})}function te(e){(void 0).PROD,G.Z(e)}var se=(0,l.pM)({name:"Login",setup(){const e=(0,u.rd)(),a=(0,S.KR)(!0),t=(0,S.KR)(!1),s=(0,S.KR)(null),o=(0,S.KR)("user"),i=(0,S.Kh)({username:"",password:""}),n=(0,S.Kh)({username:"",password:"",confirmPassword:""}),r=()=>{"admin"!==o.value?(a.value=!a.value,i.username="",i.password="",n.username="",n.password="",n.confirmPassword=""):M.Ay.warning("管理端不支持注册功能")},d=e=>{o.value=e,"admin"===e&&(a.value=!0),Object.assign(i,{username:"",password:""}),Object.assign(n,{username:"",password:"",confirmPassword:""})},c=(e,a)=>a&&a!==n.password?Promise.reject("两次输入的密码不一致!"):Promise.resolve(),v=()=>{try{const e=localStorage.getItem("users");return e?JSON.parse(e):[]}catch(e){return[]}},p=e=>{localStorage.setItem("users",JSON.stringify(e))},m=(e,a)=>{const t=v();t.push({username:e,password:a}),p(t)},k=async()=>{const e={NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_API_BASE;if(e)try{const a=await fetch(`${e}/api/auth/me`);s.value=a.ok,a.ok?M.Ay.success("后端服务连接正常"):M.Ay.error("后端服务响应异常")}catch(a){s.value=!1,M.Ay.error("无法连接到后端服务"),ee(a,{component:"Login",action:"checkBackendStatus",context:"后端健康检查失败"})}else s.value=null},h=a=>(t.value=!0,console.log("登录表单提交:",a),a.username&&a.password?"user"===o.value&&"admin"===a.username?(M.Ay.error("用户端无法登录管理员账户，请切换到管理端"),void(t.value=!1)):"admin"===a.username&&"admin"!==o.value?(M.Ay.error("管理员账户只能在管理端登录"),void(t.value=!1)):void setTimeout(()=>{if(t.value=!1,"admin"===o.value){if("admin"!==a.username||"admin123"!==a.password)return void M.Ay.error("仅允许管理员账号登录（admin/admin123）")}else{const e=v(),t=e.find(e=>e.username===a.username);if(!t)return void M.Ay.error("该用户未注册，请先注册后再登录");if(t.password!==a.password)return void M.Ay.error("密码错误")}const s={username:a.username,password:a.password,avatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=${a.username}`,department:"admin"===a.username?"系统管理部":"技术部",position:"admin"===a.username?"系统管理员":"员工",bio:"admin"===a.username?"系统管理员账户":"这是一个示例用户",employeeId:"admin"===a.username?"ADMIN001":"EMP001"};localStorage.setItem("user",JSON.stringify(s)),localStorage.setItem("username",a.username),localStorage.setItem("token",`token_${a.username}_${Date.now()}`),H(a.username),ae(s),te({category:"auth",message:"用户登录成功",level:"info",data:{username:a.username,system:o.value}}),localStorage.removeItem("recentRegisteredUser"),"user"===o.value?(e.push("/user"),M.Ay.success("用户端登录成功！")):(e.push("/"),M.Ay.success("管理端登录成功！"))},400):(M.Ay.error("请输入用户名和密码"),void(t.value=!1))),b=e=>{if("admin"!==o.value)return t.value=!0,console.log("注册表单提交:",e),e.username&&e.password&&e.confirmPassword?e.password!==e.confirmPassword?(M.Ay.error("两次输入的密码不一致"),void(t.value=!1)):void setTimeout(()=>{t.value=!1;const s=v();s.some(a=>a.username===e.username)?M.Ay.error("用户名已被注册，请更换用户名"):(m(e.username,e.password),localStorage.setItem("recentRegisteredUser",JSON.stringify({username:e.username,avatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=${e.username}`})),M.Ay.success("注册成功！请使用该账号登录"),a.value=!0,Object.assign(i,{username:e.username,password:""}),Object.assign(n,{username:"",password:"",confirmPassword:""}))},400):(M.Ay.error("请填写完整的注册信息"),void(t.value=!1));M.Ay.error("管理端不支持注册功能")};return(0,l.sV)(()=>{k()}),{isLogin:a,loading:t,backendStatus:s,loginForm:i,registerForm:n,toggleForm:r,validateConfirmPassword:c,checkBackendStatus:k,onLoginFinish:h,onRegisterFinish:b,selectedSystem:o,handleSystemChange:d}}});const le=(0,r.A)(se,[["render",I],["__scopeId","data-v-58f15bda"]]);var oe=le;const ie={class:"dashboard-container"},ne={class:"sidebar"},re={class:"sidebar-nav"},de={class:"main-content"},ce={class:"top-header"},ue={class:"header-left"},ve={class:"header-right"},pe={class:"user-menu"},me={class:"user-dropdown-link"},ke={class:"username"},he={class:"content"},be={key:0,class:"overview-content"},ge={class:"card-carousel-section"},Le={class:"card-carousel"},fe={class:"card-number"},ye={class:"card-number"},xe={class:"card-number"},Te={class:"card-progress"},Ae={class:"progress-bar-modern"},we={class:"card-number"},Ce={class:"card-number"},Fe={class:"card-number"},_e={class:"progress-bar-modern"},Ee={class:"carousel-nav"},Ie={class:"carousel-dots"},Se=["onClick"],Me={class:"charts-section"},De={class:"chart-card"},Ue={class:"chart-content"},Re={ref:"pieCanvas",class:"chart-canvas"},Oe={class:"chart-legend"},Pe={class:"chart-card"},Ne={class:"chart-content"},Ke={ref:"barCanvas",class:"chart-canvas"},ze={key:1,class:"module-content"},Xe={key:2,class:"module-content"},We={key:3,class:"module-content"},je={key:4,class:"module-content"},He={key:5,class:"module-content"},qe={key:6,class:"module-content"},Je={key:7,class:"module-content"};function Ve(e,a,t,s,o,i){const n=(0,l.g2)("a-icon"),r=(0,l.g2)("a-avatar"),d=(0,l.g2)("a-menu-item"),c=(0,l.g2)("a-menu-divider"),u=(0,l.g2)("a-menu"),p=(0,l.g2)("a-dropdown");return(0,l.uX)(),(0,l.CE)("div",ie,[(0,l.Lk)("div",ne,[a[24]||(a[24]=(0,l.Lk)("div",{class:"sidebar-header"},[(0,l.Lk)("div",{class:"logo"},[(0,l.Lk)("div",{class:"logo-icon"},"🏢"),(0,l.Lk)("h2",null,"Smart OA"),(0,l.Lk)("p",null,"管理后台")])],-1)),(0,l.Lk)("nav",re,[(0,l.Lk)("div",{class:(0,v.C4)(["nav-item",{active:"overview"===e.activeModule}]),onClick:a[0]||(a[0]=a=>e.switchModule("overview"))},a[16]||(a[16]=[(0,l.Lk)("span",{class:"nav-icon"},"📊",-1),(0,l.Lk)("span",{class:"nav-text"},"数据概览",-1)]),2),(0,l.Lk)("div",{class:(0,v.C4)(["nav-item",{active:"employee"===e.activeModule}]),onClick:a[1]||(a[1]=a=>e.switchModule("employee"))},a[17]||(a[17]=[(0,l.Lk)("span",{class:"nav-icon"},"👥",-1),(0,l.Lk)("span",{class:"nav-text"},"员工管理",-1)]),2),(0,l.Lk)("div",{class:(0,v.C4)(["nav-item",{active:"approval"===e.activeModule}]),onClick:a[2]||(a[2]=a=>e.switchModule("approval"))},a[18]||(a[18]=[(0,l.Lk)("span",{class:"nav-icon"},"✅",-1),(0,l.Lk)("span",{class:"nav-text"},"审批管理",-1)]),2),(0,l.Lk)("div",{class:(0,v.C4)(["nav-item",{active:"attendance"===e.activeModule}]),onClick:a[3]||(a[3]=a=>e.switchModule("attendance"))},a[19]||(a[19]=[(0,l.Lk)("span",{class:"nav-icon"},"⏰",-1),(0,l.Lk)("span",{class:"nav-text"},"考勤管理",-1)]),2),(0,l.Lk)("div",{class:(0,v.C4)(["nav-item",{active:"announcement"===e.activeModule}]),onClick:a[4]||(a[4]=a=>e.switchModule("announcement"))},a[20]||(a[20]=[(0,l.Lk)("span",{class:"nav-icon"},"📢",-1),(0,l.Lk)("span",{class:"nav-text"},"公告管理",-1)]),2),(0,l.Lk)("div",{class:(0,v.C4)(["nav-item",{active:"file"===e.activeModule}]),onClick:a[5]||(a[5]=a=>e.switchModule("file"))},a[21]||(a[21]=[(0,l.Lk)("span",{class:"nav-icon"},"📁",-1),(0,l.Lk)("span",{class:"nav-text"},"文件管理",-1)]),2),(0,l.Lk)("div",{class:(0,v.C4)(["nav-item",{active:"user"===e.activeModule}]),onClick:a[6]||(a[6]=a=>e.switchModule("user"))},a[22]||(a[22]=[(0,l.Lk)("span",{class:"nav-icon"},"👤",-1),(0,l.Lk)("span",{class:"nav-text"},"用户管理",-1)]),2),(0,l.Lk)("div",{class:(0,v.C4)(["nav-item",{active:"system"===e.activeModule}]),onClick:a[7]||(a[7]=a=>e.switchModule("system"))},a[23]||(a[23]=[(0,l.Lk)("span",{class:"nav-icon"},"🔧",-1),(0,l.Lk)("span",{class:"nav-text"},"系统监控",-1)]),2)])]),(0,l.Lk)("div",de,[(0,l.Lk)("header",ce,[(0,l.Lk)("div",ue,[(0,l.Lk)("h1",null,(0,v.v_)(e.getModuleTitle()),1)]),(0,l.Lk)("div",ve,[a[27]||(a[27]=(0,l.Lk)("div",{class:"search-box"},[(0,l.Lk)("input",{type:"text",placeholder:"搜索..."}),(0,l.Lk)("span",{class:"search-icon"},"🔍")],-1)),(0,l.Lk)("div",pe,[(0,l.bF)(p,null,{overlay:(0,l.k6)(()=>[(0,l.bF)(u,{class:"user-dropdown-menu"},{default:(0,l.k6)(()=>[(0,l.bF)(d,{key:"profile",onClick:e.goToProfile},{default:(0,l.k6)(()=>[(0,l.bF)(n,{type:"setting"}),a[25]||(a[25]=(0,l.Lk)("span",null,"个人信息",-1))]),_:1,__:[25]},8,["onClick"]),(0,l.bF)(c),(0,l.bF)(d,{key:"logout",onClick:e.handleLogout},{default:(0,l.k6)(()=>[(0,l.bF)(n,{type:"logout"}),a[26]||(a[26]=(0,l.Lk)("span",null,"退出登录",-1))]),_:1,__:[26]},8,["onClick"])]),_:1})]),default:(0,l.k6)(()=>[(0,l.Lk)("a",me,[(0,l.bF)(r,{size:32,class:"user-avatar",src:e.userInfo.avatar},{default:(0,l.k6)(()=>[(0,l.bF)(n,{type:"user"})]),_:1},8,["src"]),(0,l.Lk)("span",ke,(0,v.v_)(e.userInfo.username||"admin"),1),(0,l.bF)(n,{type:"down"})])]),_:1})])])]),(0,l.Lk)("div",he,["overview"===e.activeModule?((0,l.uX)(),(0,l.CE)("div",be,[(0,l.Lk)("div",ge,[(0,l.Lk)("div",Le,[(0,l.Lk)("div",{class:"card-carousel-container",style:(0,v.Tr)({transform:`translateX(-${25*e.currentCardSlide}%)`})},[(0,l.Lk)("div",{class:"stat-card-item employee-card",onClick:a[8]||(a[8]=a=>e.switchModule("employee"))},[a[28]||(a[28]=(0,l.Lk)("div",{class:"card-trend-badge"},"+12%",-1)),a[29]||(a[29]=(0,l.Lk)("div",{class:"card-icon-large"},"👥",-1)),(0,l.Lk)("div",fe,(0,v.v_)(e.stats.employees),1),a[30]||(a[30]=(0,l.Lk)("div",{class:"card-label"},"员工总数",-1))]),(0,l.Lk)("div",{class:"stat-card-item approval-card",onClick:a[9]||(a[9]=a=>e.switchModule("approval"))},[a[31]||(a[31]=(0,l.Lk)("div",{class:"card-trend-badge"},"+5%",-1)),a[32]||(a[32]=(0,l.Lk)("div",{class:"card-icon-large"},"📋",-1)),(0,l.Lk)("div",ye,(0,v.v_)(e.stats.approvals),1),a[33]||(a[33]=(0,l.Lk)("div",{class:"card-label"},"待审批",-1))]),(0,l.Lk)("div",{class:"stat-card-item attendance-card",onClick:a[10]||(a[10]=a=>e.switchModule("attendance"))},[a[34]||(a[34]=(0,l.Lk)("div",{class:"card-icon-large"},"⏰",-1)),(0,l.Lk)("div",xe,(0,v.v_)(e.stats.attendance)+"%",1),a[35]||(a[35]=(0,l.Lk)("div",{class:"card-label"},"出勤率",-1)),(0,l.Lk)("div",Te,[(0,l.Lk)("div",Ae,[(0,l.Lk)("div",{class:"progress-fill-modern",style:(0,v.Tr)({width:e.stats.attendance+"%"})},null,4)])])]),(0,l.Lk)("div",{class:"stat-card-item file-card",onClick:a[11]||(a[11]=a=>e.switchModule("file"))},[a[36]||(a[36]=(0,l.Lk)("div",{class:"card-icon-large"},"📊",-1)),(0,l.Lk)("div",we,(0,v.v_)(e.stats.files),1),a[37]||(a[37]=(0,l.Lk)("div",{class:"card-label"},"文件总数",-1)),a[38]||(a[38]=(0,l.Lk)("div",{class:"card-progress"},[(0,l.Lk)("div",{class:"progress-bar-modern"},[(0,l.Lk)("div",{class:"progress-fill-modern",style:{width:"78%"}})])],-1))]),(0,l.Lk)("div",{class:"stat-card-item announcement-card",onClick:a[12]||(a[12]=a=>e.switchModule("announcement"))},[a[39]||(a[39]=(0,l.Lk)("div",{class:"card-trend-badge"},"+8%",-1)),a[40]||(a[40]=(0,l.Lk)("div",{class:"card-icon-large"},"📢",-1)),(0,l.Lk)("div",Ce,(0,v.v_)(e.stats.announcements),1),a[41]||(a[41]=(0,l.Lk)("div",{class:"card-label"},"公告总数",-1))]),(0,l.Lk)("div",{class:"stat-card-item system-card",onClick:a[13]||(a[13]=a=>e.switchModule("system"))},[a[42]||(a[42]=(0,l.Lk)("div",{class:"card-icon-large"},"🔧",-1)),(0,l.Lk)("div",Fe,(0,v.v_)(e.stats.systemUptime)+"%",1),a[43]||(a[43]=(0,l.Lk)("div",{class:"card-label"},"系统可用性",-1)),(0,l.Lk)("div",_e,[(0,l.Lk)("div",{class:"progress-fill-modern",style:(0,v.Tr)({width:e.stats.systemUptime+"%"})},null,4)])])],4),(0,l.Lk)("div",Ee,[(0,l.Lk)("button",{class:"nav-btn prev-btn",onClick:a[14]||(a[14]=(...a)=>e.prevCardSlide&&e.prevCardSlide(...a))},a[44]||(a[44]=[(0,l.Lk)("span",null,"‹",-1)])),(0,l.Lk)("button",{class:"nav-btn next-btn",onClick:a[15]||(a[15]=(...a)=>e.nextCardSlide&&e.nextCardSlide(...a))},a[45]||(a[45]=[(0,l.Lk)("span",null,"›",-1)]))]),(0,l.Lk)("div",Ie,[((0,l.uX)(),(0,l.CE)(l.FK,null,(0,l.pI)(3,(a,t)=>(0,l.Lk)("div",{key:t,class:(0,v.C4)(["carousel-dot",{active:e.currentCardSlide===t}]),onClick:a=>e.goToCardSlide(t)},null,10,Se)),64))])])]),(0,l.Lk)("div",Me,[(0,l.Lk)("div",De,[a[46]||(a[46]=(0,l.Lk)("div",{class:"chart-header"},[(0,l.Lk)("h3",null,"部门分布"),(0,l.Lk)("span",{class:"chart-subtitle"},"员工部门统计")],-1)),(0,l.Lk)("div",Ue,[(0,l.Lk)("canvas",Re,null,512),(0,l.Lk)("div",Oe,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.departmentData,(a,t)=>((0,l.uX)(),(0,l.CE)("div",{class:"legend-item",key:t},[(0,l.Lk)("span",{class:"legend-color",style:(0,v.Tr)({background:e.pieColors[t%e.pieColors.length]})},null,4),(0,l.Lk)("span",null,(0,v.v_)(a.name)+" "+(0,v.v_)(a.value)+"%",1)]))),128))])])]),(0,l.Lk)("div",Pe,[a[47]||(a[47]=(0,l.Lk)("div",{class:"chart-header"},[(0,l.Lk)("h3",null,"月度趋势"),(0,l.Lk)("span",{class:"chart-subtitle"},"近6个月数据")],-1)),(0,l.Lk)("div",Ne,[(0,l.Lk)("canvas",Ke,null,512)])])])])):(0,l.Q3)("",!0),"employee"===e.activeModule?((0,l.uX)(),(0,l.CE)("div",ze,a[48]||(a[48]=[(0,l.Fv)('<div class="module-header" data-v-3f0e4870><h2 data-v-3f0e4870>员工管理</h2><p data-v-3f0e4870>管理公司员工信息、部门分配和权限设置</p></div><div class="module-grid" data-v-3f0e4870><div class="module-card" data-v-3f0e4870><div class="card-icon" data-v-3f0e4870>👥</div><h3 data-v-3f0e4870>员工列表</h3><p data-v-3f0e4870>查看和管理所有员工信息</p><div class="card-actions" data-v-3f0e4870><button class="btn-primary" data-v-3f0e4870>查看员工</button><button class="btn-secondary" data-v-3f0e4870>添加员工</button></div></div><div class="module-card" data-v-3f0e4870><div class="card-icon" data-v-3f0e4870>🏢</div><h3 data-v-3f0e4870>部门管理</h3><p data-v-3f0e4870>组织架构和部门设置</p><div class="card-actions" data-v-3f0e4870><button class="btn-primary" data-v-3f0e4870>部门列表</button><button class="btn-secondary" data-v-3f0e4870>新建部门</button></div></div><div class="module-card" data-v-3f0e4870><div class="card-icon" data-v-3f0e4870>🔐</div><h3 data-v-3f0e4870>权限设置</h3><p data-v-3f0e4870>员工角色和权限管理</p><div class="card-actions" data-v-3f0e4870><button class="btn-primary" data-v-3f0e4870>角色管理</button><button class="btn-secondary" data-v-3f0e4870>权限配置</button></div></div></div>',2)]))):(0,l.Q3)("",!0),"approval"===e.activeModule?((0,l.uX)(),(0,l.CE)("div",Xe,a[49]||(a[49]=[(0,l.Fv)('<div class="module-header" data-v-3f0e4870><h2 data-v-3f0e4870>审批管理</h2><p data-v-3f0e4870>处理各类审批申请和工作流程</p></div><div class="module-grid" data-v-3f0e4870><div class="module-card" data-v-3f0e4870><div class="card-icon" data-v-3f0e4870>📋</div><h3 data-v-3f0e4870>待审批</h3><p data-v-3f0e4870>需要您审批的申请列表</p><div class="card-actions" data-v-3f0e4870><button class="btn-primary" data-v-3f0e4870>查看待审批</button><button class="btn-secondary" data-v-3f0e4870>批量处理</button></div></div><div class="module-card" data-v-3f0e4870><div class="card-icon" data-v-3f0e4870>✅</div><h3 data-v-3f0e4870>已审批</h3><p data-v-3f0e4870>历史审批记录和状态</p><div class="card-actions" data-v-3f0e4870><button class="btn-primary" data-v-3f0e4870>审批历史</button><button class="btn-secondary" data-v-3f0e4870>导出记录</button></div></div><div class="module-card" data-v-3f0e4870><div class="card-icon" data-v-3f0e4870>⚙️</div><h3 data-v-3f0e4870>流程配置</h3><p data-v-3f0e4870>审批流程和规则设置</p><div class="card-actions" data-v-3f0e4870><button class="btn-primary" data-v-3f0e4870>流程设计</button><button class="btn-secondary" data-v-3f0e4870>规则配置</button></div></div></div>',2)]))):(0,l.Q3)("",!0),"attendance"===e.activeModule?((0,l.uX)(),(0,l.CE)("div",We,a[50]||(a[50]=[(0,l.Fv)('<div class="module-header" data-v-3f0e4870><h2 data-v-3f0e4870>考勤管理</h2><p data-v-3f0e4870>员工考勤记录和统计管理</p></div><div class="module-grid" data-v-3f0e4870><div class="module-card" data-v-3f0e4870><div class="card-icon" data-v-3f0e4870>⏰</div><h3 data-v-3f0e4870>考勤记录</h3><p data-v-3f0e4870>员工上下班打卡记录</p><div class="card-actions" data-v-3f0e4870><button class="btn-primary" data-v-3f0e4870>查看记录</button><button class="btn-secondary" data-v-3f0e4870>导出数据</button></div></div><div class="module-card" data-v-3f0e4870><div class="card-icon" data-v-3f0e4870>📊</div><h3 data-v-3f0e4870>考勤统计</h3><p data-v-3f0e4870>出勤率和工作时长统计</p><div class="card-actions" data-v-3f0e4870><button class="btn-primary" data-v-3f0e4870>统计报表</button><button class="btn-secondary" data-v-3f0e4870>数据分析</button></div></div><div class="module-card" data-v-3f0e4870><div class="card-icon" data-v-3f0e4870>📅</div><h3 data-v-3f0e4870>请假管理</h3><p data-v-3f0e4870>员工请假申请和审批</p><div class="card-actions" data-v-3f0e4870><button class="btn-primary" data-v-3f0e4870>请假申请</button><button class="btn-secondary" data-v-3f0e4870>审批记录</button></div></div></div>',2)]))):(0,l.Q3)("",!0),"announcement"===e.activeModule?((0,l.uX)(),(0,l.CE)("div",je,a[51]||(a[51]=[(0,l.Fv)('<div class="module-header" data-v-3f0e4870><h2 data-v-3f0e4870>公告管理</h2><p data-v-3f0e4870>发布和管理公司公告信息</p></div><div class="module-grid" data-v-3f0e4870><div class="module-card" data-v-3f0e4870><div class="card-icon" data-v-3f0e4870>📢</div><h3 data-v-3f0e4870>发布公告</h3><p data-v-3f0e4870>创建和发布新的公告</p><div class="card-actions" data-v-3f0e4870><button class="btn-primary" data-v-3f0e4870>新建公告</button><button class="btn-secondary" data-v-3f0e4870>草稿箱</button></div></div><div class="module-card" data-v-3f0e4870><div class="card-icon" data-v-3f0e4870>📋</div><h3 data-v-3f0e4870>公告列表</h3><p data-v-3f0e4870>管理已发布的公告</p><div class="card-actions" data-v-3f0e4870><button class="btn-primary" data-v-3f0e4870>查看公告</button><button class="btn-secondary" data-v-3f0e4870>编辑公告</button></div></div><div class="module-card" data-v-3f0e4870><div class="card-icon" data-v-3f0e4870>📊</div><h3 data-v-3f0e4870>阅读统计</h3><p data-v-3f0e4870>公告阅读情况统计</p><div class="card-actions" data-v-3f0e4870><button class="btn-primary" data-v-3f0e4870>查看统计</button><button class="btn-secondary" data-v-3f0e4870>导出报告</button></div></div></div>',2)]))):(0,l.Q3)("",!0),"file"===e.activeModule?((0,l.uX)(),(0,l.CE)("div",He,a[52]||(a[52]=[(0,l.Fv)('<div class="module-header" data-v-3f0e4870><h2 data-v-3f0e4870>文件管理</h2><p data-v-3f0e4870>公司文件存储、共享和权限管理</p></div><div class="module-grid" data-v-3f0e4870><div class="module-card" data-v-3f0e4870><div class="card-icon" data-v-3f0e4870>📁</div><h3 data-v-3f0e4870>文件存储</h3><p data-v-3f0e4870>上传和管理公司文件</p><div class="card-actions" data-v-3f0e4870><button class="btn-primary" data-v-3f0e4870>上传文件</button><button class="btn-secondary" data-v-3f0e4870>文件列表</button></div></div><div class="module-card" data-v-3f0e4870><div class="card-icon" data-v-3f0e4870>🔗</div><h3 data-v-3f0e4870>文件共享</h3><p data-v-3f0e4870>设置文件共享和权限</p><div class="card-actions" data-v-3f0e4870><button class="btn-primary" data-v-3f0e4870>共享设置</button><button class="btn-secondary" data-v-3f0e4870>权限管理</button></div></div><div class="module-card" data-v-3f0e4870><div class="card-icon" data-v-3f0e4870>📊</div><h3 data-v-3f0e4870>存储统计</h3><p data-v-3f0e4870>文件存储空间使用情况</p><div class="card-actions" data-v-3f0e4870><button class="btn-primary" data-v-3f0e4870>查看统计</button><button class="btn-secondary" data-v-3f0e4870>清理空间</button></div></div></div>',2)]))):(0,l.Q3)("",!0),"user"===e.activeModule?((0,l.uX)(),(0,l.CE)("div",qe,a[53]||(a[53]=[(0,l.Fv)('<div class="module-header" data-v-3f0e4870><h2 data-v-3f0e4870>用户管理</h2><p data-v-3f0e4870>系统用户账户和权限管理</p></div><div class="module-grid" data-v-3f0e4870><div class="module-card" data-v-3f0e4870><div class="card-icon" data-v-3f0e4870>👤</div><h3 data-v-3f0e4870>用户账户</h3><p data-v-3f0e4870>管理系统用户账户</p><div class="card-actions" data-v-3f0e4870><button class="btn-primary" data-v-3f0e4870>用户列表</button><button class="btn-secondary" data-v-3f0e4870>添加用户</button></div></div><div class="module-card" data-v-3f0e4870><div class="card-icon" data-v-3f0e4870>🔐</div><h3 data-v-3f0e4870>权限管理</h3><p data-v-3f0e4870>用户角色和权限设置</p><div class="card-actions" data-v-3f0e4870><button class="btn-primary" data-v-3f0e4870>角色管理</button><button class="btn-secondary" data-v-3f0e4870>权限配置</button></div></div><div class="module-card" data-v-3f0e4870><div class="card-icon" data-v-3f0e4870>📊</div><h3 data-v-3f0e4870>登录日志</h3><p data-v-3f0e4870>用户登录活动记录</p><div class="card-actions" data-v-3f0e4870><button class="btn-primary" data-v-3f0e4870>查看日志</button><button class="btn-secondary" data-v-3f0e4870>安全分析</button></div></div></div>',2)]))):(0,l.Q3)("",!0),"system"===e.activeModule?((0,l.uX)(),(0,l.CE)("div",Je,a[54]||(a[54]=[(0,l.Fv)('<div class="module-header" data-v-3f0e4870><h2 data-v-3f0e4870>系统监控</h2><p data-v-3f0e4870>系统性能监控和运行状态管理</p></div><div class="module-grid" data-v-3f0e4870><div class="module-card" data-v-3f0e4870><div class="card-icon" data-v-3f0e4870>📊</div><h3 data-v-3f0e4870>性能监控</h3><p data-v-3f0e4870>CPU、内存、磁盘使用率监控</p><div class="card-actions" data-v-3f0e4870><button class="btn-primary" data-v-3f0e4870>实时监控</button><button class="btn-secondary" data-v-3f0e4870>性能报告</button></div></div><div class="module-card" data-v-3f0e4870><div class="card-icon" data-v-3f0e4870>🔍</div><h3 data-v-3f0e4870>日志分析</h3><p data-v-3f0e4870>系统日志查看和分析</p><div class="card-actions" data-v-3f0e4870><button class="btn-primary" data-v-3f0e4870>日志查看</button><button class="btn-secondary" data-v-3f0e4870>错误分析</button></div></div><div class="module-card" data-v-3f0e4870><div class="card-icon" data-v-3f0e4870>🛡️</div><h3 data-v-3f0e4870>安全监控</h3><p data-v-3f0e4870>系统安全状态和威胁检测</p><div class="card-actions" data-v-3f0e4870><button class="btn-primary" data-v-3f0e4870>安全状态</button><button class="btn-secondary" data-v-3f0e4870>威胁检测</button></div></div></div>',2)]))):(0,l.Q3)("",!0)])])])}var $e=(0,l.pM)({name:"Home",setup(){const e=(0,u.rd)(),a=(0,S.KR)("overview"),t=(0,S.KR)(0),s=(0,S.KR)(null),o=(0,S.KR)({username:"",role:"",avatar:""}),i=(0,S.KR)({employees:156,activeEmployees:148,newEmployees:8,departments:12,avgWorkYears:3.2,approvals:23,todayApprovals:5,processedApprovals:156,avgProcessTime:2.4,approvalRate:92,attendance:94,todayAttendance:142,lateCount:3,leaveCount:5,overtimeHours:28,files:1247,todayUploads:23,storageUsed:156,sharedFiles:89,downloadCount:2341,announcements:67,monthlyAnnouncements:12,readRate:87,pinnedAnnouncements:3,interactionCount:156,systemUptime:99.8,cpuUsage:45,memoryUsage:62,onlineUsers:89,todayVisits:234}),n=(0,S.KR)([{name:"技术部",value:40},{name:"人事部",value:33},{name:"财务部",value:27}]),r=["#ff6b6b","#4ecdc4","#45b7d1","#f9ca24","#e056fd"],d=(0,S.KR)([{month:"1月",value:85},{month:"2月",value:92},{month:"3月",value:78},{month:"4月",value:95},{month:"5月",value:88},{month:"6月",value:96}]),c=(0,S.KR)(null),v=(0,S.KR)(null),p=t=>{if("overview"===t)return void(a.value=t);const s={employee:"/admin/employee",approval:"/admin/approval",attendance:"/admin/attendance",announcement:"/admin/announcement",file:"/admin/file",user:"/admin/user",system:"/admin/system"},l=s[t];l&&e.push(l)},m=()=>{const e={overview:"数据概览",employee:"员工管理",approval:"审批管理",attendance:"考勤管理",announcement:"公告管理",file:"文件管理",user:"用户管理",system:"系统监控"};return e[a.value]||"数据概览"},k=()=>{t.value=(t.value+1)%3},h=()=>{t.value=0===t.value?2:t.value-1},b=(e,s)=>{"number"===typeof e&&e<3&&(t.value=e),s&&(a.value=s)},g=()=>{s.value=setInterval(()=>{k()},3e3)},L=()=>{s.value&&(clearInterval(s.value),s.value=null)},f=()=>{e.push("/admin/profile")},y=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("username"),e.push("/login")},x=()=>{const e=c.value;if(!e)return;const a=e.getContext("2d"),t=window.devicePixelRatio||1,s=e.clientWidth,l=e.clientHeight;e.width=s*t,e.height=l*t,a.scale(t,t),a.clearRect(0,0,s,l);const o=Math.min(s,l)/2-10,i=s/2,d=l/2;let u=-Math.PI/2;n.value.forEach((e,t)=>{const s=e.value/100*Math.PI*2;a.beginPath(),a.moveTo(i,d),a.arc(i,d,o,u,u+s),a.closePath(),a.fillStyle=r[t%r.length],a.fill(),u+=s}),a.beginPath(),a.arc(i,d,.55*o,0,2*Math.PI),a.fillStyle="#ffffff",a.fill()},T=()=>{const e=v.value;if(!e)return;const a=e.getContext("2d"),t=window.devicePixelRatio||1,s=e.clientWidth,l=e.clientHeight;e.width=s*t,e.height=l*t,a.scale(t,t),a.clearRect(0,0,s,l);const o={left:40,right:30,top:30,bottom:40},i=s-o.left-o.right,n=l-o.top-o.bottom,r=4;for(let d=0;d<=r;d++){const e=o.top+n/r*d;a.strokeStyle="#3b82f6",a.lineWidth=1,a.beginPath(),a.moveTo(o.left-5,e),a.lineTo(o.left,e),a.stroke()}a.strokeStyle="#3b82f6",a.lineWidth=2,a.beginPath(),a.moveTo(o.left,l-o.bottom),a.lineTo(s-o.right,l-o.bottom),a.lineTo(s-o.right-8,l-o.bottom-4),a.moveTo(s-o.right,l-o.bottom),a.lineTo(s-o.right-8,l-o.bottom+4),a.stroke(),a.beginPath(),a.moveTo(o.left,l-o.bottom),a.lineTo(o.left,o.top),a.lineTo(o.left-4,o.top+8),a.moveTo(o.left,o.top),a.lineTo(o.left+4,o.top+8),a.stroke();const c=d.value.length,u=i/c*.6,p=i/c*.4,m=Math.max(...d.value.map(e=>e.value))||100,k=["#fbbf24","#fb923c","#f43f5e","#3b82f6","#8b5cf6"];d.value.forEach((e,t)=>{const s=o.left+t*(u+p)+.5*p,i=e.value/m*n,r=l-o.bottom-i;a.fillStyle=k[t%k.length];const d=u;a.fillRect(s,r,d,i),a.fillStyle="#64748b",a.font="16px sans-serif";const c=e.month,v=a.measureText(c).width;a.fillText(c,s+d/2-v/2,l-o.bottom+25)})},A=()=>{console.log("Home.vue - getUserInfo 开始执行"),console.log("Home.vue - localStorage 检查:"),console.log("  - token:",localStorage.getItem("token")),console.log("  - username:",localStorage.getItem("username")),console.log("  - user:",localStorage.getItem("user")),console.log("  - savedUserInfo:",localStorage.getItem("savedUserInfo"));const e=localStorage.getItem("user");if(e)try{const t=JSON.parse(e);console.log("Home.vue - 解析后的用户数据:",t);const s=localStorage.getItem("savedUserInfo");if(s)try{const e=JSON.parse(s);console.log("Home.vue - 解析后的保存信息:",e),o.value={...t,...e,username:e.username||t.username,avatar:e.avatar||t.avatar||""}}catch(a){console.error("解析保存的用户信息失败:",a),o.value={...t,avatar:t.avatar||""}}else o.value={...t,avatar:t.avatar||""};console.log("Home.vue - 最终设置的用户信息:",o.value)}catch(a){console.error("解析用户信息失败:",a)}else console.log("Home.vue - 未找到用户信息")},w=()=>{A()};return(0,l.sV)(()=>{A(),x(),T(),g(),window.addEventListener("userInfoUpdated",w),window.addEventListener("resize",()=>{x(),T()})}),(0,l.hi)(()=>{window.removeEventListener("userInfoUpdated",w),L()}),{userInfo:o,stats:i,departmentData:n,pieColors:r,monthlyData:d,pieCanvas:c,barCanvas:v,activeModule:a,switchModule:p,getModuleTitle:m,currentCardSlide:t,nextCardSlide:k,prevCardSlide:h,goToCardSlide:b,goToProfile:f,handleLogout:y}}});const Qe=(0,r.A)($e,[["render",Ve],["__scopeId","data-v-3f0e4870"]]);var Be=Qe;const Ge={class:"employee-container"},Ye={class:"page-header"},Ze={class:"header-left"},ea={class:"title-section"},aa={class:"page-title"},ta={class:"header-right"},sa={class:"user-info"},la={class:"employee-list"},oa={class:"list-header"},ia={class:"employee-table"},na={class:"employee-info"},ra=["src","alt"],da={class:"actions"},ca=["onClick"],ua=["onClick"],va={class:"modal-header"},pa={class:"modal-body"},ma={class:"form-row"},ka={class:"form-group"},ha={key:0,class:"error-text"},ba={class:"form-group"},ga=["disabled"],La={key:0,class:"error-text"},fa={class:"form-row"},ya={class:"form-group"},xa={key:0,class:"error-text"},Ta={class:"form-group"},Aa={key:0,class:"error-text"},wa={class:"form-row"},Ca={class:"form-group"},Fa={key:0,class:"error-text"},_a={class:"form-group"},Ea={key:0,class:"error-text"},Ia={class:"form-group"},Sa={class:"form-actions"},Ma={type:"submit",class:"btn-submit"},Da={class:"modal-header"},Ua={class:"modal-body"},Ra={class:"form-actions"};function Oa(e,a,t,o,i,n){const r=(0,l.g2)("a-icon"),d=(0,l.g2)("a-avatar"),c=(0,l.g2)("a-button");return(0,l.uX)(),(0,l.CE)("div",Ge,[(0,l.Lk)("div",Ye,[(0,l.Lk)("div",Ze,[(0,l.Lk)("div",ea,[(0,l.Lk)("h1",aa,[(0,l.bF)(r,{type:"team",class:"title-icon"}),a[18]||(a[18]=(0,l.eW)(" 员工管理 ",-1))]),a[19]||(a[19]=(0,l.Lk)("p",{class:"page-subtitle"},"管理公司员工信息、部门分配和权限设置",-1))])]),(0,l.Lk)("div",ta,[(0,l.Lk)("div",sa,[(0,l.bF)(d,{size:32,class:"user-avatar",src:e.userInfo.avatar},{default:(0,l.k6)(()=>[(0,l.bF)(r,{type:"user"})]),_:1},8,["src"]),(0,l.Lk)("span",null,"欢迎，"+(0,v.v_)(e.userInfo.username),1)]),(0,l.bF)(c,{type:"link",onClick:e.goHome,class:"home-btn"},{default:(0,l.k6)(()=>[(0,l.bF)(r,{type:"home"}),a[20]||(a[20]=(0,l.eW)(" 返回首页 ",-1))]),_:1,__:[20]},8,["onClick"])])]),a[37]||(a[37]=(0,l.Fv)('<div class="stats-overview" data-v-2cb0b3aa><div class="stat-card" data-v-2cb0b3aa><div class="stat-icon" data-v-2cb0b3aa>👥</div><div class="stat-content" data-v-2cb0b3aa><div class="stat-number" data-v-2cb0b3aa>156</div><div class="stat-label" data-v-2cb0b3aa>员工总数</div></div></div><div class="stat-card" data-v-2cb0b3aa><div class="stat-icon" data-v-2cb0b3aa>🆕</div><div class="stat-content" data-v-2cb0b3aa><div class="stat-number" data-v-2cb0b3aa>12</div><div class="stat-label" data-v-2cb0b3aa>本月新增</div></div></div><div class="stat-card" data-v-2cb0b3aa><div class="stat-icon" data-v-2cb0b3aa>📈</div><div class="stat-content" data-v-2cb0b3aa><div class="stat-number" data-v-2cb0b3aa>8</div><div class="stat-label" data-v-2cb0b3aa>本月晋升</div></div></div><div class="stat-card" data-v-2cb0b3aa><div class="stat-icon" data-v-2cb0b3aa>⏰</div><div class="stat-content" data-v-2cb0b3aa><div class="stat-number" data-v-2cb0b3aa>3.2</div><div class="stat-label" data-v-2cb0b3aa>平均工龄(年)</div></div></div></div>',1)),(0,l.Lk)("div",la,[(0,l.Lk)("div",oa,[a[21]||(a[21]=(0,l.Lk)("h2",null,"员工列表",-1)),(0,l.Lk)("button",{class:"btn-add",onClick:a[0]||(a[0]=(...a)=>e.showAddModal&&e.showAddModal(...a))},"+ 添加员工")]),(0,l.Lk)("div",ia,[(0,l.Lk)("table",null,[a[22]||(a[22]=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"员工ID"),(0,l.Lk)("th",null,"姓名"),(0,l.Lk)("th",null,"部门"),(0,l.Lk)("th",null,"职位"),(0,l.Lk)("th",null,"入职日期"),(0,l.Lk)("th",null,"工龄"),(0,l.Lk)("th",null,"状态"),(0,l.Lk)("th",null,"操作")])],-1)),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.employees,a=>((0,l.uX)(),(0,l.CE)("tr",{key:a.id},[(0,l.Lk)("td",null,(0,v.v_)(a.id),1),(0,l.Lk)("td",null,[(0,l.Lk)("div",na,[(0,l.Lk)("img",{src:a.avatar,alt:a.name,class:"avatar"},null,8,ra),(0,l.Lk)("span",null,(0,v.v_)(a.name),1)])]),(0,l.Lk)("td",null,(0,v.v_)(a.department),1),(0,l.Lk)("td",null,(0,v.v_)(a.position),1),(0,l.Lk)("td",null,(0,v.v_)(a.joinDate),1),(0,l.Lk)("td",null,(0,v.v_)(a.workYears)+"年",1),(0,l.Lk)("td",null,[(0,l.Lk)("span",{class:(0,v.C4)(["status",a.status])},(0,v.v_)(a.statusText),3)]),(0,l.Lk)("td",null,[(0,l.Lk)("div",da,[(0,l.Lk)("button",{class:"btn-edit",onClick:t=>e.showEditModal(a)},"编辑",8,ca),(0,l.Lk)("button",{class:"btn-delete",onClick:t=>e.showDeleteConfirm(a)},"删除",8,ua)])])]))),128))])])])]),e.showModal?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"modal-overlay",onClick:a[12]||(a[12]=(...a)=>e.closeModal&&e.closeModal(...a))},[(0,l.Lk)("div",{class:"modal-content",onClick:a[11]||(a[11]=(0,s.D$)(()=>{},["stop"]))},[(0,l.Lk)("div",va,[(0,l.Lk)("h3",null,(0,v.v_)(e.isEditing?"编辑员工":"添加员工"),1),(0,l.Lk)("button",{class:"modal-close",onClick:a[1]||(a[1]=(...a)=>e.closeModal&&e.closeModal(...a))},"×")]),(0,l.Lk)("div",pa,[(0,l.Lk)("form",{onSubmit:a[10]||(a[10]=(0,s.D$)((...a)=>e.submitForm&&e.submitForm(...a),["prevent"])),class:"employee-form"},[(0,l.Lk)("div",ma,[(0,l.Lk)("div",ka,[a[23]||(a[23]=(0,l.Lk)("label",null,"员工姓名 *",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":a[2]||(a[2]=a=>e.formData.name=a),type:"text",required:"",placeholder:"请输入员工姓名",class:(0,v.C4)({error:e.formErrors.name})},null,2),[[s.Jo,e.formData.name]]),e.formErrors.name?((0,l.uX)(),(0,l.CE)("span",ha,(0,v.v_)(e.formErrors.name),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",ba,[a[24]||(a[24]=(0,l.Lk)("label",null,"员工ID *",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":a[3]||(a[3]=a=>e.formData.id=a),type:"text",required:"",placeholder:"请输入员工ID",class:(0,v.C4)({error:e.formErrors.id}),disabled:e.isEditing},null,10,ga),[[s.Jo,e.formData.id]]),e.formErrors.id?((0,l.uX)(),(0,l.CE)("span",La,(0,v.v_)(e.formErrors.id),1)):(0,l.Q3)("",!0)])]),(0,l.Lk)("div",fa,[(0,l.Lk)("div",ya,[a[26]||(a[26]=(0,l.Lk)("label",null,"部门 *",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[4]||(a[4]=a=>e.formData.department=a),required:"",class:(0,v.C4)({error:e.formErrors.department})},a[25]||(a[25]=[(0,l.Fv)('<option value="" data-v-2cb0b3aa>请选择部门</option><option value="技术部" data-v-2cb0b3aa>技术部</option><option value="人事部" data-v-2cb0b3aa>人事部</option><option value="财务部" data-v-2cb0b3aa>财务部</option><option value="市场部" data-v-2cb0b3aa>市场部</option><option value="运营部" data-v-2cb0b3aa>运营部</option><option value="客服部" data-v-2cb0b3aa>客服部</option>',7)]),2),[[s.u1,e.formData.department]]),e.formErrors.department?((0,l.uX)(),(0,l.CE)("span",xa,(0,v.v_)(e.formErrors.department),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",Ta,[a[27]||(a[27]=(0,l.Lk)("label",null,"职位 *",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":a[5]||(a[5]=a=>e.formData.position=a),type:"text",required:"",placeholder:"请输入职位",class:(0,v.C4)({error:e.formErrors.position})},null,2),[[s.Jo,e.formData.position]]),e.formErrors.position?((0,l.uX)(),(0,l.CE)("span",Aa,(0,v.v_)(e.formErrors.position),1)):(0,l.Q3)("",!0)])]),(0,l.Lk)("div",wa,[(0,l.Lk)("div",Ca,[a[28]||(a[28]=(0,l.Lk)("label",null,"入职日期 *",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":a[6]||(a[6]=a=>e.formData.joinDate=a),type:"date",required:"",class:(0,v.C4)({error:e.formErrors.joinDate})},null,2),[[s.Jo,e.formData.joinDate]]),e.formErrors.joinDate?((0,l.uX)(),(0,l.CE)("span",Fa,(0,v.v_)(e.formErrors.joinDate),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",_a,[a[30]||(a[30]=(0,l.Lk)("label",null,"状态 *",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[7]||(a[7]=a=>e.formData.status=a),required:"",class:(0,v.C4)({error:e.formErrors.status})},a[29]||(a[29]=[(0,l.Fv)('<option value="" data-v-2cb0b3aa>请选择状态</option><option value="active" data-v-2cb0b3aa>在职</option><option value="inactive" data-v-2cb0b3aa>离职</option><option value="probation" data-v-2cb0b3aa>试用期</option><option value="suspended" data-v-2cb0b3aa>停职</option>',5)]),2),[[s.u1,e.formData.status]]),e.formErrors.status?((0,l.uX)(),(0,l.CE)("span",Ea,(0,v.v_)(e.formErrors.status),1)):(0,l.Q3)("",!0)])]),(0,l.Lk)("div",Ia,[a[31]||(a[31]=(0,l.Lk)("label",null,"头像URL",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":a[8]||(a[8]=a=>e.formData.avatar=a),type:"text",placeholder:"请输入头像URL（可选）"},null,512),[[s.Jo,e.formData.avatar]]),a[32]||(a[32]=(0,l.Lk)("small",null,"留空将使用默认头像",-1))]),(0,l.Lk)("div",Sa,[(0,l.Lk)("button",{type:"button",class:"btn-cancel",onClick:a[9]||(a[9]=(...a)=>e.closeModal&&e.closeModal(...a))},"取消"),(0,l.Lk)("button",Ma,(0,v.v_)(e.isEditing?"保存":"添加"),1)])],32)])])])):(0,l.Q3)("",!0),e.showDeleteModal?((0,l.uX)(),(0,l.CE)("div",{key:1,class:"modal-overlay",onClick:a[17]||(a[17]=(...a)=>e.closeDeleteModal&&e.closeDeleteModal(...a))},[(0,l.Lk)("div",{class:"modal-content delete-modal",onClick:a[16]||(a[16]=(0,s.D$)(()=>{},["stop"]))},[(0,l.Lk)("div",Da,[a[33]||(a[33]=(0,l.Lk)("h3",null,"确认删除",-1)),(0,l.Lk)("button",{class:"modal-close",onClick:a[13]||(a[13]=(...a)=>e.closeDeleteModal&&e.closeDeleteModal(...a))},"×")]),(0,l.Lk)("div",Ua,[(0,l.Lk)("p",null,[a[34]||(a[34]=(0,l.eW)("您确定要删除员工 ",-1)),(0,l.Lk)("strong",null,(0,v.v_)(e.employeeToDelete?.name),1),a[35]||(a[35]=(0,l.eW)(" 吗？",-1))]),a[36]||(a[36]=(0,l.Lk)("p",{class:"warning-text"},"此操作不可撤销！",-1)),(0,l.Lk)("div",Ra,[(0,l.Lk)("button",{type:"button",class:"btn-cancel",onClick:a[14]||(a[14]=(...a)=>e.closeDeleteModal&&e.closeDeleteModal(...a))},"取消"),(0,l.Lk)("button",{type:"button",class:"btn-delete-confirm",onClick:a[15]||(a[15]=(...a)=>e.confirmDelete&&e.confirmDelete(...a))},"确认删除")])])])])):(0,l.Q3)("",!0)])}var Pa=(0,l.pM)({name:"Employee",setup(){const e=(0,u.rd)(),a=(0,S.KR)({username:"",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Employee1"}),t=(0,S.KR)([{id:"EMP001",name:"张三",department:"技术部",position:"高级工程师",joinDate:"2020-03-15",workYears:3.5,status:"active",statusText:"在职",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Employee1"},{id:"EMP002",name:"李四",department:"人事部",position:"HR专员",joinDate:"2021-06-20",workYears:2.2,status:"active",statusText:"在职",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Employee2"},{id:"EMP003",name:"王五",department:"财务部",position:"会计",joinDate:"2019-11-08",workYears:4.1,status:"active",statusText:"在职",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Employee3"},{id:"EMP004",name:"赵六",department:"技术部",position:"前端开发",joinDate:"2022-01-10",workYears:1.8,status:"active",statusText:"在职",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Employee4"},{id:"EMP005",name:"钱七",department:"市场部",position:"市场专员",joinDate:"2018-09-12",workYears:5.2,status:"active",statusText:"在职",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Employee5"},{id:"EMP006",name:"孙八",department:"技术部",position:"后端开发",joinDate:"2021-03-25",workYears:2.6,status:"active",statusText:"在职",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Employee6"},{id:"EMP007",name:"周九",department:"人事部",position:"人事经理",joinDate:"2017-12-01",workYears:6,status:"active",statusText:"在职",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Employee7"},{id:"EMP008",name:"吴十",department:"财务部",position:"财务主管",joinDate:"2019-05-18",workYears:4.4,status:"active",statusText:"在职",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Employee8"},{id:"EMP009",name:"郑十一",department:"技术部",position:"UI设计师",joinDate:"2022-07-03",workYears:1.3,status:"active",statusText:"在职",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Employee9"},{id:"EMP010",name:"王十二",department:"市场部",position:"市场经理",joinDate:"2016-08-22",workYears:7.1,status:"active",statusText:"在职",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Employee10"},{id:"EMP011",name:"李十三",department:"技术部",position:"测试工程师",joinDate:"2021-09-14",workYears:2.1,status:"active",statusText:"在职",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Employee11"},{id:"EMP012",name:"张十四",department:"人事部",position:"招聘专员",joinDate:"2020-12-05",workYears:2.8,status:"active",statusText:"在职",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Employee12"},{id:"EMP013",name:"刘十五",department:"财务部",position:"出纳",joinDate:"2021-02-18",workYears:2.6,status:"active",statusText:"在职",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Employee13"},{id:"EMP014",name:"陈十六",department:"技术部",position:"运维工程师",joinDate:"2019-07-30",workYears:4.2,status:"active",statusText:"在职",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Employee14"},{id:"EMP015",name:"杨十七",department:"市场部",position:"品牌专员",joinDate:"2020-04-12",workYears:3.4,status:"active",statusText:"在职",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Employee15"},{id:"EMP016",name:"黄十八",department:"技术部",position:"产品经理",joinDate:"2018-11-25",workYears:5,status:"active",statusText:"在职",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Employee16"},{id:"EMP017",name:"赵十九",department:"人事部",position:"培训专员",joinDate:"2021-08-08",workYears:2,status:"active",statusText:"在职",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Employee17"},{id:"EMP018",name:"吴二十",department:"财务部",position:"审计员",joinDate:"2020-06-15",workYears:3.2,status:"active",statusText:"在职",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Employee18"},{id:"EMP019",name:"徐二一",department:"技术部",position:"算法工程师",joinDate:"2022-03-20",workYears:1.5,status:"active",statusText:"在职",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Employee19"},{id:"EMP020",name:"孙二二",department:"市场部",position:"销售代表",joinDate:"2021-01-10",workYears:2.7,status:"active",statusText:"在职",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Employee20"},{id:"EMP021",name:"马二三",department:"技术部",position:"数据分析师",joinDate:"2020-09-18",workYears:3,status:"active",statusText:"在职",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Employee21"},{id:"EMP022",name:"朱二四",department:"人事部",position:"薪酬专员",joinDate:"2019-12-03",workYears:3.8,status:"active",statusText:"在职",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Employee22"},{id:"EMP023",name:"胡二五",department:"财务部",position:"成本会计",joinDate:"2021-05-22",workYears:2.3,status:"active",statusText:"在职",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Employee23"},{id:"EMP024",name:"郭二六",department:"技术部",position:"移动开发",joinDate:"2022-02-14",workYears:1.6,status:"active",statusText:"在职",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Employee24"},{id:"EMP025",name:"何二七",department:"市场部",position:"公关专员",joinDate:"2020-07-28",workYears:3.1,status:"active",statusText:"在职",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Employee25"},{id:"EMP026",name:"高二八",department:"技术部",position:"安全工程师",joinDate:"2019-04-16",workYears:4.4,status:"active",statusText:"在职",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Employee26"},{id:"EMP027",name:"林二九",department:"人事部",position:"绩效专员",joinDate:"2021-10-09",workYears:1.9,status:"active",statusText:"在职",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Employee27"},{id:"EMP028",name:"罗三十",department:"财务部",position:"税务专员",joinDate:"2020-01-25",workYears:3.7,status:"active",statusText:"在职",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Employee28"},{id:"EMP029",name:"梁三一",department:"技术部",position:"架构师",joinDate:"2018-06-12",workYears:5.2,status:"active",statusText:"在职",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Employee29"},{id:"EMP030",name:"谢三二",department:"市场部",position:"渠道经理",joinDate:"2019-03-08",workYears:4.5,status:"active",statusText:"在职",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Employee30"}]),s=(0,S.KR)(!1),o=(0,S.KR)(!1),i=(0,S.KR)({id:"",name:"",department:"",position:"",joinDate:"",status:"",avatar:""}),n=(0,S.KR)({id:"",name:"",department:"",position:"",joinDate:"",status:""}),r=(0,S.KR)(!1),d=(0,S.KR)(null),c=()=>{e.push("/")},v=()=>{const e=localStorage.getItem("user");if(e)try{const s=JSON.parse(e),l=localStorage.getItem("savedUserInfo");if(l)try{const e=JSON.parse(l);a.value={...s,...e,username:e.username||s.username||"",avatar:e.avatar||a.value.avatar}}catch(t){console.error("解析保存的用户信息失败:",t),a.value={...s,username:s.username||"",avatar:a.value.avatar}}else a.value={...s,username:s.username||"",avatar:a.value.avatar}}catch(t){console.error("解析用户信息失败:",t)}},p=()=>{o.value=!1,i.value={id:"",name:"",department:"",position:"",joinDate:"",status:"",avatar:""},n.value={id:"",name:"",department:"",position:"",joinDate:"",status:""},s.value=!0},m=e=>{o.value=!0,i.value={...e},s.value=!0},k=()=>{s.value=!1},h=()=>{let e=!0;return n.value={id:"",name:"",department:"",position:"",joinDate:"",status:""},i.value.id||(n.value.id="员工ID不能为空",e=!1),i.value.name||(n.value.name="员工姓名不能为空",e=!1),i.value.department||(n.value.department="部门不能为空",e=!1),i.value.position||(n.value.position="职位不能为空",e=!1),i.value.joinDate||(n.value.joinDate="入职日期不能为空",e=!1),i.value.status||(n.value.status="状态不能为空",e=!1),e},b=()=>{if(h())if(o.value){const e=t.value.findIndex(e=>e.id===i.value.id);-1!==e?(t.value[e]={...t.value[e],...i.value},i.value.avatar?t.value[e].avatar=i.value.avatar:t.value[e].avatar="https://api.dicebear.com/7.x/avataaars/svg?seed="+t.value[e].id,k(),alert("员工信息已更新")):alert("未找到该员工，无法更新")}else{const e="EMP"+(Math.max(...t.value.map(e=>parseInt(e.id.substring(3))))+1).toString().padStart(3,"0");t.value.push({id:e,name:i.value.name,department:i.value.department,position:i.value.position,joinDate:i.value.joinDate,status:i.value.status,statusText:i.value.status,workYears:g(i.value.joinDate),avatar:i.value.avatar||"https://api.dicebear.com/7.x/avataaars/svg?seed="+e}),k(),alert("员工已添加")}},g=e=>{const a=new Date(e),t=new Date;let s=t.getFullYear()-a.getFullYear();const l=t.getMonth()-a.getMonth();return(l<0||0===l&&t.getDate()<a.getDate())&&s--,s},L=e=>{d.value=e,r.value=!0},f=()=>{r.value=!1,d.value=null},y=()=>{if(d.value){const e=t.value.findIndex(e=>e.id===d.value.id);-1!==e?(t.value.splice(e,1),f(),alert("员工已删除")):alert("未找到该员工，无法删除")}},x=()=>{v()};return(0,l.sV)(()=>{v(),window.addEventListener("userInfoUpdated",x)}),(0,l.hi)(()=>{window.removeEventListener("userInfoUpdated",x)}),{userInfo:a,employees:t,goHome:c,showModal:s,isEditing:o,formData:i,formErrors:n,showAddModal:p,showEditModal:m,closeModal:k,submitForm:b,validateForm:h,calculateWorkYears:g,showDeleteConfirm:L,closeDeleteModal:f,confirmDelete:y,employeeToDelete:d}}});const Na=(0,r.A)(Pa,[["render",Oa],["__scopeId","data-v-2cb0b3aa"]]);var Ka=Na;const za={class:"approval-container"},Xa={class:"page-header"},Wa={class:"header-left"},ja={class:"title-section"},Ha={class:"page-title"},qa={class:"header-right"},Ja={class:"user-info"},Va={class:"approval-list"},$a={class:"list-header"},Qa={class:"approval-table"},Ba={class:"applicant-info"},Ga=["src","alt"],Ya={class:"actions"},Za=["onClick","disabled"],et=["onClick","disabled"],at={class:"modal-header"},tt={class:"modal-body"},st={class:"form-group"},lt={key:0,class:"form-error"},ot={class:"form-group"},it={class:"char-count"},nt={key:0,class:"form-error"},rt={key:0,class:"form-group"},dt={class:"date-range"},ct={key:1,class:"form-group"},ut={class:"form-group"},vt={class:"form-group"},pt={key:0,class:"form-error"},mt={class:"modal-footer"},kt=["disabled"],ht={key:0,class:"loading-spinner"},bt={class:"modal-header"},gt={class:"modal-body"},Lt={key:0,class:"form-group"},ft={class:"char-count"},yt={class:"modal-footer"};function xt(e,a,t,o,i,n){const r=(0,l.g2)("a-icon"),d=(0,l.g2)("a-avatar"),c=(0,l.g2)("a-button");return(0,l.uX)(),(0,l.CE)("div",za,[(0,l.Lk)("div",Xa,[(0,l.Lk)("div",Wa,[(0,l.Lk)("div",ja,[(0,l.Lk)("h1",Ha,[(0,l.bF)(r,{type:"check-circle",class:"title-icon"}),a[20]||(a[20]=(0,l.eW)(" 审批管理 ",-1))]),a[21]||(a[21]=(0,l.Lk)("p",{class:"page-subtitle"},"管理公司各类审批流程、申请和审核状态",-1))])]),(0,l.Lk)("div",qa,[(0,l.Lk)("div",Ja,[(0,l.bF)(d,{size:32,class:"user-avatar",src:e.userInfo.avatar},{default:(0,l.k6)(()=>[(0,l.bF)(r,{type:"user"})]),_:1},8,["src"]),(0,l.Lk)("span",null,"欢迎，"+(0,v.v_)(e.userInfo.username),1)]),(0,l.bF)(c,{type:"link",onClick:e.goHome,class:"home-btn"},{default:(0,l.k6)(()=>[(0,l.bF)(r,{type:"home"}),a[22]||(a[22]=(0,l.eW)(" 返回首页 ",-1))]),_:1,__:[22]},8,["onClick"])])]),a[38]||(a[38]=(0,l.Fv)('<div class="stats-overview" data-v-92240a62><div class="stat-card" data-v-92240a62><div class="stat-icon" data-v-92240a62>📋</div><div class="stat-content" data-v-92240a62><div class="stat-number" data-v-92240a62>23</div><div class="stat-label" data-v-92240a62>待审批</div></div></div><div class="stat-card" data-v-92240a62><div class="stat-icon" data-v-92240a62>✅</div><div class="stat-content" data-v-92240a62><div class="stat-number" data-v-92240a62>156</div><div class="stat-label" data-v-92240a62>已通过</div></div></div><div class="stat-card" data-v-92240a62><div class="stat-icon" data-v-92240a62>❌</div><div class="stat-content" data-v-92240a62><div class="stat-number" data-v-92240a62>8</div><div class="stat-label" data-v-92240a62>已拒绝</div></div></div><div class="stat-card" data-v-92240a62><div class="stat-icon" data-v-92240a62>⏱️</div><div class="stat-content" data-v-92240a62><div class="stat-number" data-v-92240a62>2.4</div><div class="stat-label" data-v-92240a62>平均处理时间(天)</div></div></div></div>',1)),(0,l.Lk)("div",Va,[(0,l.Lk)("div",$a,[a[23]||(a[23]=(0,l.Lk)("h2",null,"审批列表",-1)),(0,l.Lk)("button",{class:"btn-add",onClick:a[0]||(a[0]=(...a)=>e.showAddModal&&e.showAddModal(...a))},"+ 新建审批")]),(0,l.Lk)("div",Qa,[(0,l.Lk)("table",null,[a[24]||(a[24]=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"申请编号"),(0,l.Lk)("th",null,"申请人"),(0,l.Lk)("th",null,"申请类型"),(0,l.Lk)("th",null,"申请内容"),(0,l.Lk)("th",null,"申请时间"),(0,l.Lk)("th",null,"审批状态"),(0,l.Lk)("th",null,"审批人"),(0,l.Lk)("th",null,"操作")])],-1)),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.approvals,a=>((0,l.uX)(),(0,l.CE)("tr",{key:a.id},[(0,l.Lk)("td",null,(0,v.v_)(a.id),1),(0,l.Lk)("td",null,[(0,l.Lk)("div",Ba,[(0,l.Lk)("img",{src:a.applicantAvatar,alt:a.applicant,class:"avatar"},null,8,Ga),(0,l.Lk)("span",null,(0,v.v_)(a.applicant),1)])]),(0,l.Lk)("td",null,(0,v.v_)(a.type),1),(0,l.Lk)("td",null,(0,v.v_)(a.content),1),(0,l.Lk)("td",null,(0,v.v_)(a.applyTime),1),(0,l.Lk)("td",null,[(0,l.Lk)("span",{class:(0,v.C4)(["status",a.status])},(0,v.v_)(a.statusText),3)]),(0,l.Lk)("td",null,(0,v.v_)(a.approver),1),(0,l.Lk)("td",null,[(0,l.Lk)("div",Ya,[(0,l.Lk)("button",{class:"btn-approve",onClick:t=>e.approveApproval(a),disabled:"pending"!==a.status},"通过",8,Za),(0,l.Lk)("button",{class:"btn-reject",onClick:t=>e.rejectApproval(a),disabled:"pending"!==a.status},"拒绝",8,et)])])]))),128))])])])]),e.showAddApprovalModal?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"modal-overlay",onClick:a[13]||(a[13]=(...a)=>e.closeAddModal&&e.closeAddModal(...a))},[(0,l.Lk)("div",{class:"modal-content",onClick:a[12]||(a[12]=(0,s.D$)(()=>{},["stop"]))},[(0,l.Lk)("div",at,[a[25]||(a[25]=(0,l.Lk)("h3",null,"新建审批申请",-1)),(0,l.Lk)("button",{class:"modal-close",onClick:a[1]||(a[1]=(...a)=>e.closeAddModal&&e.closeAddModal(...a))},"×")]),(0,l.Lk)("div",tt,[(0,l.Lk)("form",{onSubmit:a[9]||(a[9]=(0,s.D$)((...a)=>e.submitApproval&&e.submitApproval(...a),["prevent"]))},[(0,l.Lk)("div",st,[a[27]||(a[27]=(0,l.Lk)("label",null,[(0,l.eW)("申请类型 "),(0,l.Lk)("span",{class:"required"},"*")],-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[2]||(a[2]=a=>e.approvalForm.type=a),required:""},a[26]||(a[26]=[(0,l.Fv)('<option value="" data-v-92240a62>请选择申请类型</option><option value="请假申请" data-v-92240a62>请假申请</option><option value="加班申请" data-v-92240a62>加班申请</option><option value="报销申请" data-v-92240a62>报销申请</option><option value="采购申请" data-v-92240a62>采购申请</option><option value="转岗申请" data-v-92240a62>转岗申请</option><option value="离职申请" data-v-92240a62>离职申请</option><option value="其他申请" data-v-92240a62>其他申请</option>',8)]),512),[[s.u1,e.approvalForm.type]]),e.formErrors.type?((0,l.uX)(),(0,l.CE)("div",lt,(0,v.v_)(e.formErrors.type),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",ot,[a[28]||(a[28]=(0,l.Lk)("label",null,[(0,l.eW)("申请内容 "),(0,l.Lk)("span",{class:"required"},"*")],-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":a[3]||(a[3]=a=>e.approvalForm.content=a),placeholder:"请详细描述您的申请内容...",rows:"4",maxlength:"500",required:""},null,512),[[s.Jo,e.approvalForm.content]]),(0,l.Lk)("div",it,(0,v.v_)(e.approvalForm.content.length)+"/500",1),e.formErrors.content?((0,l.uX)(),(0,l.CE)("div",nt,(0,v.v_)(e.formErrors.content),1)):(0,l.Q3)("",!0)]),"请假申请"===e.approvalForm.type?((0,l.uX)(),(0,l.CE)("div",rt,[a[30]||(a[30]=(0,l.Lk)("label",null,"请假时间",-1)),(0,l.Lk)("div",dt,[(0,l.bo)((0,l.Lk)("input",{type:"date","onUpdate:modelValue":a[4]||(a[4]=a=>e.approvalForm.startDate=a),placeholder:"开始日期"},null,512),[[s.Jo,e.approvalForm.startDate]]),a[29]||(a[29]=(0,l.Lk)("span",{class:"date-separator"},"至",-1)),(0,l.bo)((0,l.Lk)("input",{type:"date","onUpdate:modelValue":a[5]||(a[5]=a=>e.approvalForm.endDate=a),placeholder:"结束日期"},null,512),[[s.Jo,e.approvalForm.endDate]])])])):(0,l.Q3)("",!0),"报销申请"===e.approvalForm.type?((0,l.uX)(),(0,l.CE)("div",ct,[a[31]||(a[31]=(0,l.Lk)("label",null,"报销金额",-1)),(0,l.bo)((0,l.Lk)("input",{type:"number","onUpdate:modelValue":a[6]||(a[6]=a=>e.approvalForm.amount=a),placeholder:"请输入报销金额",step:"0.01",min:"0"},null,512),[[s.Jo,e.approvalForm.amount]])])):(0,l.Q3)("",!0),(0,l.Lk)("div",ut,[a[33]||(a[33]=(0,l.Lk)("label",null,"紧急程度",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[7]||(a[7]=a=>e.approvalForm.urgency=a)},a[32]||(a[32]=[(0,l.Lk)("option",{value:"low"},"普通",-1),(0,l.Lk)("option",{value:"medium"},"紧急",-1),(0,l.Lk)("option",{value:"high"},"非常紧急",-1)]),512),[[s.u1,e.approvalForm.urgency]])]),(0,l.Lk)("div",vt,[a[35]||(a[35]=(0,l.Lk)("label",null,[(0,l.eW)("审批人 "),(0,l.Lk)("span",{class:"required"},"*")],-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[8]||(a[8]=a=>e.approvalForm.approver=a),required:""},a[34]||(a[34]=[(0,l.Fv)('<option value="" data-v-92240a62>请选择审批人</option><option value="张经理" data-v-92240a62>张经理</option><option value="李主管" data-v-92240a62>李主管</option><option value="王总监" data-v-92240a62>王总监</option><option value="赵总裁" data-v-92240a62>赵总裁</option>',5)]),512),[[s.u1,e.approvalForm.approver]]),e.formErrors.approver?((0,l.uX)(),(0,l.CE)("div",pt,(0,v.v_)(e.formErrors.approver),1)):(0,l.Q3)("",!0)])],32)]),(0,l.Lk)("div",mt,[(0,l.Lk)("button",{type:"button",class:"btn-cancel",onClick:a[10]||(a[10]=(...a)=>e.closeAddModal&&e.closeAddModal(...a))},"取消"),(0,l.Lk)("button",{type:"button",class:"btn-submit",onClick:a[11]||(a[11]=(...a)=>e.submitApproval&&e.submitApproval(...a)),disabled:e.submitting},[e.submitting?((0,l.uX)(),(0,l.CE)("span",ht)):(0,l.Q3)("",!0),(0,l.eW)(" "+(0,v.v_)(e.submitting?"提交中...":"提交申请"),1)],8,kt)])])])):(0,l.Q3)("",!0),e.showConfirmModal?((0,l.uX)(),(0,l.CE)("div",{key:1,class:"modal-overlay",onClick:a[19]||(a[19]=(...a)=>e.closeConfirmModal&&e.closeConfirmModal(...a))},[(0,l.Lk)("div",{class:"modal-content confirm-modal",onClick:a[18]||(a[18]=(0,s.D$)(()=>{},["stop"]))},[(0,l.Lk)("div",bt,[(0,l.Lk)("h3",null,(0,v.v_)("approve"===e.confirmAction?"审批通过":"审批拒绝"),1),(0,l.Lk)("button",{class:"modal-close",onClick:a[14]||(a[14]=(...a)=>e.closeConfirmModal&&e.closeConfirmModal(...a))},"×")]),(0,l.Lk)("div",gt,[(0,l.Lk)("p",null,[(0,l.eW)("确定要"+(0,v.v_)("approve"===e.confirmAction?"通过":"拒绝")+"申请 ",1),(0,l.Lk)("strong",null,(0,v.v_)(e.selectedApproval?.id),1),a[36]||(a[36]=(0,l.eW)(" 吗？",-1))]),"reject"===e.confirmAction?((0,l.uX)(),(0,l.CE)("div",Lt,[a[37]||(a[37]=(0,l.Lk)("label",null,[(0,l.eW)("拒绝原因 "),(0,l.Lk)("span",{class:"required"},"*")],-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":a[15]||(a[15]=a=>e.rejectReason=a),placeholder:"请输入拒绝原因...",rows:"3",maxlength:"200"},null,512),[[s.Jo,e.rejectReason]]),(0,l.Lk)("div",ft,(0,v.v_)(e.rejectReason.length)+"/200",1)])):(0,l.Q3)("",!0)]),(0,l.Lk)("div",yt,[(0,l.Lk)("button",{type:"button",class:"btn-cancel",onClick:a[16]||(a[16]=(...a)=>e.closeConfirmModal&&e.closeConfirmModal(...a))},"取消"),(0,l.Lk)("button",{type:"button",class:(0,v.C4)("approve"===e.confirmAction?"btn-approve-confirm":"btn-reject-confirm"),onClick:a[17]||(a[17]=(...a)=>e.confirmApproval&&e.confirmApproval(...a))},(0,v.v_)("approve"===e.confirmAction?"确认通过":"确认拒绝"),3)])])])):(0,l.Q3)("",!0)])}var Tt=(0,l.pM)({name:"Approval",setup(){const e=(0,u.rd)(),a=(0,S.KR)({username:"",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=ApprovalUser1"}),t=(0,S.KR)(!1),s=(0,S.KR)(!1),o=(0,S.KR)(""),i=(0,S.KR)(null),n=(0,S.KR)(!1),r=(0,S.KR)(""),d=(0,S.KR)({type:"",content:"",startDate:"",endDate:"",amount:"",urgency:"low",approver:""}),c=(0,S.KR)({type:"",content:"",approver:""}),v=(0,S.KR)([{id:"AP001",applicant:"张三",applicantAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Approval1",type:"请假申请",content:"年假申请3天",applyTime:"2024-01-15 09:30:00",status:"pending",statusText:"待审批",approver:"李经理"},{id:"AP002",applicant:"李四",applicantAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Approval2",type:"采购申请",content:"办公设备采购",applyTime:"2024-01-14 14:20:00",status:"approved",statusText:"已通过",approver:"王总监"},{id:"AP003",applicant:"王五",applicantAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Approval3",type:"报销申请",content:"差旅费用报销",applyTime:"2024-01-13 16:45:00",status:"rejected",statusText:"已拒绝",approver:"赵经理"},{id:"AP004",applicant:"赵六",applicantAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Approval4",type:"加班申请",content:"项目紧急加班",applyTime:"2024-01-12 18:45:00",status:"pending",statusText:"待审批",approver:"孙主管"},{id:"AP005",applicant:"钱七",applicantAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Approval5",type:"培训申请",content:"专业技能培训",applyTime:"2024-01-11 16:30:00",status:"approved",statusText:"已通过",approver:"周经理"},{id:"AP006",applicant:"孙八",applicantAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Approval6",type:"调岗申请",content:"部门内部调岗",applyTime:"2024-01-10 10:20:00",status:"pending",statusText:"待审批",approver:"吴总监"},{id:"AP007",applicant:"周九",applicantAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Approval7",type:"设备申请",content:"新员工设备配置",applyTime:"2024-01-09 15:10:00",status:"approved",statusText:"已通过",approver:"郑经理"},{id:"AP008",applicant:"吴十",applicantAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Approval8",type:"会议申请",content:"项目评审会议",applyTime:"2024-01-08 13:25:00",status:"pending",statusText:"待审批",approver:"王经理"},{id:"AP009",applicant:"郑十一",applicantAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Approval9",type:"外勤申请",content:"客户现场服务",applyTime:"2024-01-07 09:15:00",status:"approved",statusText:"已通过",approver:"李总监"},{id:"AP010",applicant:"王十二",applicantAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Approval10",type:"预算申请",content:"季度营销预算",applyTime:"2024-01-06 14:40:00",status:"pending",statusText:"待审批",approver:"张总监"},{id:"AP011",applicant:"李十三",applicantAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Approval11",type:"合同申请",content:"供应商合同签署",applyTime:"2024-01-05 11:30:00",status:"approved",statusText:"已通过",approver:"赵经理"},{id:"AP012",applicant:"张十四",applicantAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Approval12",type:"招聘申请",content:"技术岗位招聘",applyTime:"2024-01-04 16:20:00",status:"pending",statusText:"待审批",approver:"钱主管"},{id:"AP013",applicant:"刘十五",applicantAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Approval13",type:"福利申请",content:"员工生日福利",applyTime:"2024-01-03 10:15:00",status:"approved",statusText:"已通过",approver:"孙经理"},{id:"AP014",applicant:"陈十六",applicantAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Approval14",type:"项目申请",content:"新产品开发项目",applyTime:"2024-01-02 14:50:00",status:"pending",statusText:"待审批",approver:"周总监"},{id:"AP015",applicant:"杨十七",applicantAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Approval15",type:"培训申请",content:"管理技能培训",applyTime:"2024-01-01 09:00:00",status:"approved",statusText:"已通过",approver:"吴经理"},{id:"AP016",applicant:"黄十八",applicantAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Approval16",type:"设备申请",content:"服务器升级",applyTime:"2023-12-31 17:30:00",status:"pending",statusText:"待审批",approver:"郑总监"},{id:"AP017",applicant:"赵十九",applicantAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Approval17",type:"活动申请",content:"团队建设活动",applyTime:"2023-12-30 13:45:00",status:"approved",statusText:"已通过",approver:"王经理"},{id:"AP018",applicant:"吴二十",applicantAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Approval18",type:"报销申请",content:"业务招待费",applyTime:"2023-12-29 15:20:00",status:"pending",statusText:"待审批",approver:"李主管"},{id:"AP019",applicant:"徐二一",applicantAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Approval19",type:"请假申请",content:"病假申请2天",applyTime:"2023-12-28 08:30:00",status:"approved",statusText:"已通过",approver:"张经理"},{id:"AP020",applicant:"孙二二",applicantAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Approval20",type:"采购申请",content:"办公用品采购",applyTime:"2023-12-27 11:15:00",status:"pending",statusText:"待审批",approver:"周经理"},{id:"AP021",applicant:"马二三",applicantAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Approval21",type:"加班申请",content:"系统维护加班",applyTime:"2023-12-26 19:00:00",status:"approved",statusText:"已通过",approver:"赵主管"},{id:"AP022",applicant:"朱二四",applicantAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Approval22",type:"培训申请",content:"新系统培训",applyTime:"2023-12-25 14:30:00",status:"pending",statusText:"待审批",approver:"钱经理"},{id:"AP023",applicant:"胡二五",applicantAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Approval23",type:"合同申请",content:"客户合同续签",applyTime:"2023-12-24 10:45:00",status:"approved",statusText:"已通过",approver:"孙总监"},{id:"AP024",applicant:"郭二六",applicantAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Approval24",type:"设备申请",content:"测试设备配置",applyTime:"2023-12-23 16:20:00",status:"pending",statusText:"待审批",approver:"周经理"},{id:"AP025",applicant:"何二七",applicantAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Approval25",type:"会议申请",content:"季度总结会议",applyTime:"2023-12-22 13:15:00",status:"approved",statusText:"已通过",approver:"吴主管"},{id:"AP026",applicant:"高二八",applicantAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Approval26",type:"外勤申请",content:"技术支持外勤",applyTime:"2023-12-21 09:30:00",status:"pending",statusText:"待审批",approver:"郑经理"},{id:"AP027",applicant:"林二九",applicantAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Approval27",type:"预算申请",content:"技术研发预算",applyTime:"2023-12-20 15:40:00",status:"approved",statusText:"已通过",approver:"王总监"},{id:"AP028",applicant:"罗三十",applicantAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Approval28",type:"招聘申请",content:"销售岗位招聘",applyTime:"2023-12-19 11:25:00",status:"pending",statusText:"待审批",approver:"李经理"},{id:"AP029",applicant:"梁三一",applicantAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Approval29",type:"福利申请",content:"年终奖发放",applyTime:"2023-12-18 14:50:00",status:"approved",statusText:"已通过",approver:"张总监"},{id:"AP030",applicant:"谢三二",applicantAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Approval30",type:"项目申请",content:"市场调研项目",applyTime:"2023-12-17 10:15:00",status:"pending",statusText:"待审批",approver:"周经理"}]),p=()=>{e.push("/")},m=()=>{const e=localStorage.getItem("user");if(e)try{const s=JSON.parse(e),l=localStorage.getItem("savedUserInfo");if(l)try{const e=JSON.parse(l);a.value={...s,...e,username:e.username||s.username||"",avatar:e.avatar||a.value.avatar}}catch(t){console.error("解析保存的用户信息失败:",t),a.value={...s,username:s.username||"",avatar:a.value.avatar}}else a.value={...s,username:s.username||"",avatar:a.value.avatar}}catch(t){console.error("解析用户信息失败:",t)}},k=()=>{t.value=!0,d.value={type:"",content:"",startDate:"",endDate:"",amount:"",urgency:"low",approver:""},c.value={type:"",content:"",approver:""}},h=()=>{t.value=!1,d.value={type:"",content:"",startDate:"",endDate:"",amount:"",urgency:"low",approver:""},c.value={type:"",content:"",approver:""}},b=async()=>{let e=!1;if(d.value.type?c.value.type="":(c.value.type="请选择申请类型",e=!0),d.value.content.trim()?c.value.content="":(c.value.content="请输入申请内容",e=!0),d.value.approver?c.value.approver="":(c.value.approver="请选择审批人",e=!0),!e){n.value=!0;try{await new Promise(e=>setTimeout(e,2e3));const e={id:`AP${String(v.value.length+1).padStart(3,"0")}`,applicant:a.value.username||"当前用户",applicantAvatar:a.value.avatar,type:d.value.type,content:d.value.content,applyTime:(new Date).toLocaleString("zh-CN"),status:"pending",statusText:"待审批",approver:d.value.approver,startDate:d.value.startDate,endDate:d.value.endDate,amount:d.value.amount,urgency:d.value.urgency};v.value.unshift(e),h(),alert("审批申请提交成功！")}catch(t){alert("提交失败，请重试"),console.error("提交错误:",t)}finally{n.value=!1}}},g=e=>{"pending"===e.status&&(i.value=e,o.value="approve",s.value=!0)},L=e=>{"pending"===e.status&&(i.value=e,o.value="reject",r.value="",s.value=!0)},f=()=>{s.value=!1,i.value=null,o.value="",r.value=""},y=()=>{if(!i.value)return;if("reject"===o.value&&!r.value.trim())return void alert("请输入拒绝原因");const e=i.value,a=(new Date).toLocaleString("zh-CN");"approve"===o.value?(e.status="approved",e.statusText="已通过",e.approveTime=a,alert(`审批 ${e.id} 已通过`)):(e.status="rejected",e.statusText="已拒绝",e.approveTime=a,e.rejectReason=r.value,alert(`审批 ${e.id} 已拒绝`)),f()},x=()=>{m()};return(0,l.sV)(()=>{m(),window.addEventListener("userInfoUpdated",x)}),(0,l.hi)(()=>{window.removeEventListener("userInfoUpdated",x)}),{userInfo:a,approvals:v,goHome:p,showAddApprovalModal:t,showConfirmModal:s,confirmAction:o,selectedApproval:i,submitting:n,rejectReason:r,approvalForm:d,formErrors:c,showAddModal:k,closeAddModal:h,submitApproval:b,approveApproval:g,rejectApproval:L,closeConfirmModal:f,confirmApproval:y}}});const At=(0,r.A)(Tt,[["render",xt],["__scopeId","data-v-92240a62"]]);var wt=At;const Ct={class:"attendance-container"},Ft={class:"page-header"},_t={class:"header-left"},Et={class:"title-section"},It={class:"page-title"},St={class:"header-right"},Mt={class:"user-info"},Dt={class:"attendance-list"},Ut={class:"list-header"},Rt={class:"attendance-table"},Ot={class:"employee-info"},Pt=["src","alt"],Nt={class:"modal-header"},Kt={class:"modal-body"},zt={class:"form-group"},Xt=["value"],Wt={key:0,class:"form-error"},jt={class:"form-group"},Ht={key:0,class:"form-error"},qt={class:"form-group"},Jt={key:0,class:"form-error"},Vt={class:"form-group"},$t={class:"form-group"},Qt={key:0,class:"form-error"},Bt={class:"form-group"},Gt={class:"form-group"},Yt={class:"char-count"},Zt={class:"modal-footer"},es=["disabled"],as={key:0,class:"loading-spinner"};function ts(e,a,t,o,i,n){const r=(0,l.g2)("a-icon"),d=(0,l.g2)("a-avatar"),c=(0,l.g2)("a-button");return(0,l.uX)(),(0,l.CE)("div",Ct,[(0,l.Lk)("div",Ft,[(0,l.Lk)("div",_t,[(0,l.Lk)("div",Et,[(0,l.Lk)("h1",It,[(0,l.bF)(r,{type:"clock-circle",class:"title-icon"}),a[14]||(a[14]=(0,l.eW)(" 考勤管理 ",-1))]),a[15]||(a[15]=(0,l.Lk)("p",{class:"page-subtitle"},"管理员工考勤记录、出勤统计和工时管理",-1))])]),(0,l.Lk)("div",St,[(0,l.Lk)("div",Mt,[(0,l.bF)(d,{size:32,class:"user-avatar",src:e.userInfo.avatar},{default:(0,l.k6)(()=>[(0,l.bF)(r,{type:"user"})]),_:1},8,["src"]),(0,l.Lk)("span",null,"欢迎，"+(0,v.v_)(e.userInfo.username),1)]),(0,l.bF)(c,{type:"link",onClick:e.goHome,class:"home-btn"},{default:(0,l.k6)(()=>[(0,l.bF)(r,{type:"home"}),a[16]||(a[16]=(0,l.eW)(" 返回首页 ",-1))]),_:1,__:[16]},8,["onClick"])])]),a[29]||(a[29]=(0,l.Fv)('<div class="stats-overview" data-v-32d7dd62><div class="stat-card" data-v-32d7dd62><div class="stat-icon" data-v-32d7dd62>👥</div><div class="stat-content" data-v-32d7dd62><div class="stat-number" data-v-32d7dd62>142</div><div class="stat-label" data-v-32d7dd62>今日出勤</div></div></div><div class="stat-card" data-v-32d7dd62><div class="stat-icon" data-v-32d7dd62>⏰</div><div class="stat-content" data-v-32d7dd62><div class="stat-number" data-v-32d7dd62>3</div><div class="stat-label" data-v-32d7dd62>迟到人数</div></div></div><div class="stat-card" data-v-32d7dd62><div class="stat-icon" data-v-32d7dd62>📅</div><div class="stat-content" data-v-32d7dd62><div class="stat-number" data-v-32d7dd62>5</div><div class="stat-label" data-v-32d7dd62>请假人数</div></div></div><div class="stat-card" data-v-32d7dd62><div class="stat-icon" data-v-32d7dd62>💼</div><div class="stat-content" data-v-32d7dd62><div class="stat-number" data-v-32d7dd62>28</div><div class="stat-label" data-v-32d7dd62>加班小时</div></div></div></div>',1)),(0,l.Lk)("div",Dt,[(0,l.Lk)("div",Ut,[a[17]||(a[17]=(0,l.Lk)("h2",null,"考勤记录",-1)),(0,l.Lk)("button",{class:"btn-add",onClick:a[0]||(a[0]=(...a)=>e.showAddModal&&e.showAddModal(...a))},"+ 添加记录")]),(0,l.Lk)("div",Rt,[(0,l.Lk)("table",null,[a[18]||(a[18]=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"员工ID"),(0,l.Lk)("th",null,"员工姓名"),(0,l.Lk)("th",null,"日期"),(0,l.Lk)("th",null,"上班时间"),(0,l.Lk)("th",null,"下班时间"),(0,l.Lk)("th",null,"工作时长"),(0,l.Lk)("th",null,"状态"),(0,l.Lk)("th",null,"备注")])],-1)),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.attendanceRecords,e=>((0,l.uX)(),(0,l.CE)("tr",{key:e.id},[(0,l.Lk)("td",null,(0,v.v_)(e.id),1),(0,l.Lk)("td",null,[(0,l.Lk)("div",Ot,[(0,l.Lk)("img",{src:e.employeeAvatar,alt:e.employeeName,class:"avatar"},null,8,Pt),(0,l.Lk)("span",null,(0,v.v_)(e.employeeName),1)])]),(0,l.Lk)("td",null,(0,v.v_)(e.date),1),(0,l.Lk)("td",null,(0,v.v_)(e.checkIn),1),(0,l.Lk)("td",null,(0,v.v_)(e.checkOut),1),(0,l.Lk)("td",null,(0,v.v_)(e.workHours)+"小时",1),(0,l.Lk)("td",null,[(0,l.Lk)("span",{class:(0,v.C4)(["status",e.status])},(0,v.v_)(e.statusText),3)]),(0,l.Lk)("td",null,(0,v.v_)(e.remark),1)]))),128))])])])]),e.showAddAttendanceModal?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"modal-overlay",onClick:a[13]||(a[13]=(...a)=>e.closeAddModal&&e.closeAddModal(...a))},[(0,l.Lk)("div",{class:"modal-content",onClick:a[12]||(a[12]=(0,s.D$)(()=>{},["stop"]))},[(0,l.Lk)("div",Nt,[a[19]||(a[19]=(0,l.Lk)("h3",null,"添加考勤记录",-1)),(0,l.Lk)("button",{class:"modal-close",onClick:a[1]||(a[1]=(...a)=>e.closeAddModal&&e.closeAddModal(...a))},"×")]),(0,l.Lk)("div",Kt,[(0,l.Lk)("form",{onSubmit:a[9]||(a[9]=(0,s.D$)((...a)=>e.submitAttendance&&e.submitAttendance(...a),["prevent"]))},[(0,l.Lk)("div",zt,[a[21]||(a[21]=(0,l.Lk)("label",null,[(0,l.eW)("员工姓名 "),(0,l.Lk)("span",{class:"required"},"*")],-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[2]||(a[2]=a=>e.attendanceForm.employeeId=a),required:""},[a[20]||(a[20]=(0,l.Lk)("option",{value:""},"请选择员工",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.employeeList,e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,v.v_)(e.name),9,Xt))),128))],512),[[s.u1,e.attendanceForm.employeeId]]),e.formErrors.employeeId?((0,l.uX)(),(0,l.CE)("div",Wt,(0,v.v_)(e.formErrors.employeeId),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",jt,[a[22]||(a[22]=(0,l.Lk)("label",null,[(0,l.eW)("考勤日期 "),(0,l.Lk)("span",{class:"required"},"*")],-1)),(0,l.bo)((0,l.Lk)("input",{type:"date","onUpdate:modelValue":a[3]||(a[3]=a=>e.attendanceForm.date=a),required:""},null,512),[[s.Jo,e.attendanceForm.date]]),e.formErrors.date?((0,l.uX)(),(0,l.CE)("div",Ht,(0,v.v_)(e.formErrors.date),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",qt,[a[23]||(a[23]=(0,l.Lk)("label",null,[(0,l.eW)("上班时间 "),(0,l.Lk)("span",{class:"required"},"*")],-1)),(0,l.bo)((0,l.Lk)("input",{type:"time","onUpdate:modelValue":a[4]||(a[4]=a=>e.attendanceForm.checkIn=a),required:""},null,512),[[s.Jo,e.attendanceForm.checkIn]]),e.formErrors.checkIn?((0,l.uX)(),(0,l.CE)("div",Jt,(0,v.v_)(e.formErrors.checkIn),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",Vt,[a[24]||(a[24]=(0,l.Lk)("label",null,"下班时间",-1)),(0,l.bo)((0,l.Lk)("input",{type:"time","onUpdate:modelValue":a[5]||(a[5]=a=>e.attendanceForm.checkOut=a)},null,512),[[s.Jo,e.attendanceForm.checkOut]])]),(0,l.Lk)("div",$t,[a[26]||(a[26]=(0,l.Lk)("label",null,[(0,l.eW)("考勤状态 "),(0,l.Lk)("span",{class:"required"},"*")],-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[6]||(a[6]=a=>e.attendanceForm.status=a),required:""},a[25]||(a[25]=[(0,l.Fv)('<option value="" data-v-32d7dd62>请选择状态</option><option value="normal" data-v-32d7dd62>正常出勤</option><option value="late" data-v-32d7dd62>迟到</option><option value="early" data-v-32d7dd62>早退</option><option value="absent" data-v-32d7dd62>缺勤</option><option value="leave" data-v-32d7dd62>请假</option><option value="overtime" data-v-32d7dd62>加班</option>',7)]),512),[[s.u1,e.attendanceForm.status]]),e.formErrors.status?((0,l.uX)(),(0,l.CE)("div",Qt,(0,v.v_)(e.formErrors.status),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",Bt,[a[27]||(a[27]=(0,l.Lk)("label",null,"工作时长",-1)),(0,l.bo)((0,l.Lk)("input",{type:"number","onUpdate:modelValue":a[7]||(a[7]=a=>e.attendanceForm.workHours=a),placeholder:"请输入工作时长（小时）",step:"0.5",min:"0",max:"24"},null,512),[[s.Jo,e.attendanceForm.workHours]])]),(0,l.Lk)("div",Gt,[a[28]||(a[28]=(0,l.Lk)("label",null,"备注",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":a[8]||(a[8]=a=>e.attendanceForm.remark=a),placeholder:"请输入备注信息...",rows:"3",maxlength:"200"},null,512),[[s.Jo,e.attendanceForm.remark]]),(0,l.Lk)("div",Yt,(0,v.v_)(e.attendanceForm.remark.length)+"/200",1)])],32)]),(0,l.Lk)("div",Zt,[(0,l.Lk)("button",{type:"button",class:"btn-cancel",onClick:a[10]||(a[10]=(...a)=>e.closeAddModal&&e.closeAddModal(...a))},"取消"),(0,l.Lk)("button",{type:"button",class:"btn-submit",onClick:a[11]||(a[11]=(...a)=>e.submitAttendance&&e.submitAttendance(...a)),disabled:e.submitting},[e.submitting?((0,l.uX)(),(0,l.CE)("span",as)):(0,l.Q3)("",!0),(0,l.eW)(" "+(0,v.v_)(e.submitting?"提交中...":"添加记录"),1)],8,es)])])])):(0,l.Q3)("",!0)])}var ss=(0,l.pM)({name:"Attendance",setup(){const e=(0,u.rd)(),a=(0,S.KR)({username:"",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=AttendanceUser1"}),t=(0,S.KR)(!1),s=(0,S.KR)(!1),o=(0,S.KR)({employeeId:"",date:"",checkIn:"",checkOut:"",status:"",workHours:"",remark:""}),i=(0,S.KR)({employeeId:"",date:"",checkIn:"",status:""}),n=(0,S.KR)([{id:"EMP001",name:"张三"},{id:"EMP002",name:"李四"},{id:"EMP003",name:"王五"},{id:"EMP004",name:"赵六"},{id:"EMP005",name:"钱七"},{id:"EMP006",name:"孙八"},{id:"EMP007",name:"周九"},{id:"EMP008",name:"吴十"},{id:"EMP009",name:"郑十一"},{id:"EMP010",name:"王十二"},{id:"EMP011",name:"李十三"},{id:"EMP012",name:"张十四"},{id:"EMP013",name:"刘十五"},{id:"EMP014",name:"陈十六"},{id:"EMP015",name:"杨十七"},{id:"EMP016",name:"黄十八"},{id:"EMP017",name:"赵十九"},{id:"EMP018",name:"吴二十"},{id:"EMP019",name:"徐二一"},{id:"EMP020",name:"孙二二"},{id:"EMP021",name:"马二三"},{id:"EMP022",name:"朱二四"},{id:"EMP023",name:"胡二五"},{id:"EMP024",name:"郭二六"},{id:"EMP025",name:"何二七"},{id:"EMP026",name:"高二八"},{id:"EMP027",name:"林二九"},{id:"EMP028",name:"罗三十"},{id:"EMP029",name:"梁三一"},{id:"EMP030",name:"谢三二"}]),r=(0,S.KR)([{id:"AT001",employeeName:"张三",employeeAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Attendance1",date:"2024-01-15",checkIn:"09:00",checkOut:"18:00",workHours:9,status:"normal",statusText:"正常",remark:"无"},{id:"AT002",employeeName:"李四",employeeAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Attendance2",date:"2024-01-15",checkIn:"09:15",checkOut:"18:00",workHours:8.75,status:"late",statusText:"迟到",remark:"迟到15分钟"},{id:"AT003",employeeName:"王五",employeeAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Attendance3",date:"2024-01-15",checkIn:"09:00",checkOut:"19:00",workHours:10,status:"overtime",statusText:"加班",remark:"加班1小时"},{id:"AT004",employeeName:"赵六",employeeAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Attendance4",date:"2024-01-15",checkIn:"08:30",checkOut:"19:30",workHours:10,status:"overtime",statusText:"加班",remark:"加班2小时"},{id:"AT005",employeeName:"钱七",employeeAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Attendance5",date:"2024-01-15",checkIn:"09:00",checkOut:"18:00",workHours:9,status:"normal",statusText:"正常",remark:"无"},{id:"AT006",employeeName:"孙八",employeeAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Attendance6",date:"2024-01-15",checkIn:"08:45",checkOut:"17:45",workHours:8,status:"normal",statusText:"正常",remark:"无"},{id:"AT007",employeeName:"周九",employeeAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Attendance7",date:"2024-01-15",checkIn:"09:00",checkOut:"18:00",workHours:9,status:"normal",statusText:"正常",remark:"无"},{id:"AT008",employeeName:"吴十",employeeAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Attendance8",date:"2024-01-15",checkIn:"08:30",checkOut:"17:30",workHours:8,status:"normal",statusText:"正常",remark:"无"},{id:"AT009",employeeName:"郑十一",employeeAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Attendance9",date:"2024-01-15",checkIn:"09:00",checkOut:"19:00",workHours:9,status:"overtime",statusText:"加班",remark:"加班1小时"},{id:"AT010",employeeName:"王十二",employeeAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Attendance10",date:"2024-01-15",checkIn:"08:45",checkOut:"17:45",workHours:8,status:"normal",statusText:"正常",remark:"无"},{id:"AT011",employeeName:"李十三",employeeAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Attendance11",date:"2024-01-15",checkIn:"09:00",checkOut:"18:00",workHours:9,status:"normal",statusText:"正常",remark:"无"},{id:"AT012",employeeName:"张十四",employeeAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Attendance12",date:"2024-01-15",checkIn:"08:30",checkOut:"17:30",workHours:8,status:"normal",statusText:"正常",remark:"无"},{id:"AT013",employeeName:"刘十五",employeeAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Attendance13",date:"2024-01-15",checkIn:"09:15",checkOut:"18:15",workHours:8.75,status:"late",statusText:"迟到",remark:"迟到15分钟"},{id:"AT014",employeeName:"陈十六",employeeAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Attendance14",date:"2024-01-15",checkIn:"08:45",checkOut:"19:45",workHours:10,status:"overtime",statusText:"加班",remark:"加班2小时"},{id:"AT015",employeeName:"杨十七",employeeAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Attendance15",date:"2024-01-15",checkIn:"09:00",checkOut:"18:00",workHours:9,status:"normal",statusText:"正常",remark:"无"},{id:"AT016",employeeName:"黄十八",employeeAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Attendance16",date:"2024-01-15",checkIn:"08:30",checkOut:"17:30",workHours:8,status:"normal",statusText:"正常",remark:"无"},{id:"AT017",employeeName:"赵十九",employeeAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Attendance17",date:"2024-01-15",checkIn:"09:00",checkOut:"18:00",workHours:9,status:"normal",statusText:"正常",remark:"无"},{id:"AT018",employeeName:"吴二十",employeeAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Attendance18",date:"2024-01-15",checkIn:"08:45",checkOut:"17:45",workHours:8,status:"normal",statusText:"正常",remark:"无"},{id:"AT019",employeeName:"徐二一",employeeAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Attendance19",date:"2024-01-15",checkIn:"09:00",checkOut:"19:00",workHours:9,status:"overtime",statusText:"加班",remark:"加班1小时"},{id:"AT020",employeeName:"孙二二",employeeAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Attendance20",date:"2024-01-15",checkIn:"08:30",checkOut:"17:30",workHours:8,status:"normal",statusText:"正常",remark:"无"},{id:"AT021",employeeName:"马二三",employeeAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Attendance21",date:"2024-01-15",checkIn:"09:00",checkOut:"18:00",workHours:9,status:"normal",statusText:"正常",remark:"无"},{id:"AT022",employeeName:"朱二四",employeeAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Attendance22",date:"2024-01-15",checkIn:"08:45",checkOut:"17:45",workHours:8,status:"normal",statusText:"正常",remark:"无"},{id:"AT023",employeeName:"胡二五",employeeAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Attendance23",date:"2024-01-15",checkIn:"09:15",checkOut:"18:15",workHours:8.75,status:"late",statusText:"迟到",remark:"迟到15分钟"},{id:"AT024",employeeName:"郭二六",employeeAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Attendance24",date:"2024-01-15",checkIn:"08:30",checkOut:"19:30",workHours:10,status:"overtime",statusText:"加班",remark:"加班2小时"},{id:"AT025",employeeName:"何二七",employeeAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Attendance25",date:"2024-01-15",checkIn:"09:00",checkOut:"18:00",workHours:9,status:"normal",statusText:"正常",remark:"无"},{id:"AT026",employeeName:"高二八",employeeAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Attendance26",date:"2024-01-15",checkIn:"08:45",checkOut:"17:45",workHours:8,status:"normal",statusText:"正常",remark:"无"},{id:"AT027",employeeName:"林二九",employeeAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Attendance27",date:"2024-01-15",checkIn:"09:00",checkOut:"18:00",workHours:9,status:"normal",statusText:"正常",remark:"无"},{id:"AT028",employeeName:"罗三十",employeeAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Attendance28",date:"2024-01-15",checkIn:"08:30",checkOut:"17:30",workHours:8,status:"normal",statusText:"正常",remark:"无"},{id:"AT029",employeeName:"梁三一",employeeAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Attendance29",date:"2024-01-15",checkIn:"09:00",checkOut:"19:00",workHours:9,status:"overtime",statusText:"加班",remark:"加班1小时"},{id:"AT030",employeeName:"谢三二",employeeAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Attendance30",date:"2024-01-15",checkIn:"08:45",checkOut:"17:45",workHours:8,status:"normal",statusText:"正常",remark:"无"}]),d=()=>{e.push("/")},c=()=>{const e=localStorage.getItem("user");if(e)try{const s=JSON.parse(e),l=localStorage.getItem("savedUserInfo");if(l)try{const e=JSON.parse(l);a.value={...s,...e,username:e.username||s.username||"",avatar:e.avatar||a.value.avatar}}catch(t){console.error("解析保存的用户信息失败:",t),a.value={...s,username:s.username||"",avatar:a.value.avatar}}else a.value={...s,username:s.username||"",avatar:a.value.avatar}}catch(t){console.error("解析用户信息失败:",t)}},v=()=>{t.value=!0,o.value={employeeId:"",date:(new Date).toISOString().split("T")[0],checkIn:"09:00",checkOut:"18:00",status:"",workHours:"",remark:""},i.value={employeeId:"",date:"",checkIn:"",status:""}},p=()=>{t.value=!1,o.value={employeeId:"",date:"",checkIn:"",checkOut:"",status:"",workHours:"",remark:""},i.value={employeeId:"",date:"",checkIn:"",status:""}},m=async()=>{let e=!1;if(o.value.employeeId?i.value.employeeId="":(i.value.employeeId="请选择员工",e=!0),o.value.date?i.value.date="":(i.value.date="请选择考勤日期",e=!0),o.value.checkIn?i.value.checkIn="":(i.value.checkIn="请选择上班时间",e=!0),o.value.status?i.value.status="":(i.value.status="请选择考勤状态",e=!0),!e){s.value=!0;try{await new Promise(e=>setTimeout(e,2e3));const e=n.value.find(e=>e.id===o.value.employeeId);if(!e)return void alert("员工信息不存在");let a=0;if(o.value.checkIn&&o.value.checkOut){const e=new Date(`2000-01-01 ${o.value.checkIn}`),t=new Date(`2000-01-01 ${o.value.checkOut}`);a=Math.max(0,(t-e)/36e5)}else o.value.workHours&&(a=parseFloat(o.value.workHours));const t={normal:"正常",late:"迟到",early:"早退",absent:"缺勤",leave:"请假",overtime:"加班"},s={id:`AT${String(r.value.length+1).padStart(3,"0")}`,employeeName:e.name,employeeAvatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=${e.id}`,date:o.value.date,checkIn:o.value.checkIn,checkOut:o.value.checkOut||"",workHours:a.toFixed(1),status:o.value.status,statusText:t[o.value.status]||"未知",remark:o.value.remark||"无"};r.value.unshift(s),p(),alert("考勤记录添加成功！")}catch(a){alert("添加失败，请重试"),console.error("添加错误:",a)}finally{s.value=!1}}},k=()=>{c()};return(0,l.sV)(()=>{c(),window.addEventListener("userInfoUpdated",k)}),(0,l.hi)(()=>{window.removeEventListener("userInfoUpdated",k)}),{userInfo:a,attendanceRecords:r,goHome:d,showAddAttendanceModal:t,submitting:s,attendanceForm:o,formErrors:i,employeeList:n,showAddModal:v,closeAddModal:p,submitAttendance:m}}});const ls=(0,r.A)(ss,[["render",ts],["__scopeId","data-v-32d7dd62"]]);var os=ls;const is={class:"announcement-container"},ns={class:"page-header"},rs={class:"header-left"},ds={class:"title-section"},cs={class:"page-title"},us={class:"header-right"},vs={class:"user-info"},ps={class:"announcement-list"},ms={class:"list-header"},ks={class:"announcement-table"},hs={class:"publisher-info"},bs=["src","alt"],gs={class:"actions"},Ls=["onClick"],fs=["onClick"],ys={class:"modal-header"},xs={class:"modal-body"},Ts={class:"form-group"},As={class:"char-count"},ws={key:0,class:"form-error"},Cs={class:"form-group"},Fs={class:"char-count"},_s={key:0,class:"form-error"},Es={class:"form-group"},Is={key:0,class:"form-error"},Ss={class:"form-group"},Ms={class:"form-group"},Ds={class:"form-group"},Us={class:"modal-footer"},Rs=["disabled"],Os={key:0,class:"loading-spinner"},Ps={class:"modal-header"},Ns={class:"modal-body"},Ks={class:"modal-footer"};function zs(e,a,t,o,i,n){const r=(0,l.g2)("a-icon"),d=(0,l.g2)("a-avatar"),c=(0,l.g2)("a-button");return(0,l.uX)(),(0,l.CE)("div",is,[(0,l.Lk)("div",ns,[(0,l.Lk)("div",rs,[(0,l.Lk)("div",ds,[(0,l.Lk)("h1",cs,[(0,l.bF)(r,{type:"sound",class:"title-icon"}),a[18]||(a[18]=(0,l.eW)(" 公告管理 ",-1))]),a[19]||(a[19]=(0,l.Lk)("p",{class:"page-subtitle"},"发布和管理公司公告、通知和重要信息",-1))])]),(0,l.Lk)("div",us,[(0,l.Lk)("div",vs,[(0,l.bF)(d,{size:32,class:"user-avatar",src:e.userInfo.avatar},{default:(0,l.k6)(()=>[(0,l.bF)(r,{type:"user"})]),_:1},8,["src"]),(0,l.Lk)("span",null,"欢迎，"+(0,v.v_)(e.userInfo.username),1)]),(0,l.bF)(c,{type:"link",onClick:e.goHome,class:"home-btn"},{default:(0,l.k6)(()=>[(0,l.bF)(r,{type:"home"}),a[20]||(a[20]=(0,l.eW)(" 返回首页 ",-1))]),_:1,__:[20]},8,["onClick"])])]),a[37]||(a[37]=(0,l.Fv)('<div class="stats-overview" data-v-26220826><div class="stat-card" data-v-26220826><div class="stat-icon" data-v-26220826>📢</div><div class="stat-content" data-v-26220826><div class="stat-number" data-v-26220826>15</div><div class="stat-label" data-v-26220826>今日公告</div></div></div><div class="stat-card" data-v-26220826><div class="stat-icon" data-v-26220826>👁️</div><div class="stat-content" data-v-26220826><div class="stat-number" data-v-26220826>89%</div><div class="stat-label" data-v-26220826>阅读率</div></div></div><div class="stat-card" data-v-26220826><div class="stat-icon" data-v-26220826>⭐</div><div class="stat-content" data-v-26220826><div class="stat-number" data-v-26220826>12</div><div class="stat-label" data-v-26220826>重要公告</div></div></div><div class="stat-card" data-v-26220826><div class="stat-icon" data-v-26220826>📅</div><div class="stat-content" data-v-26220826><div class="stat-number" data-v-26220826>3</div><div class="stat-label" data-v-26220826>待发布</div></div></div></div>',1)),(0,l.Lk)("div",ps,[(0,l.Lk)("div",ms,[a[21]||(a[21]=(0,l.Lk)("h2",null,"公告列表",-1)),(0,l.Lk)("button",{class:"btn-add",onClick:a[0]||(a[0]=(...a)=>e.showAddModal&&e.showAddModal(...a))},"+ 发布公告")]),(0,l.Lk)("div",ks,[(0,l.Lk)("table",null,[a[22]||(a[22]=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"公告ID"),(0,l.Lk)("th",null,"发布人"),(0,l.Lk)("th",null,"标题"),(0,l.Lk)("th",null,"内容"),(0,l.Lk)("th",null,"发布时间"),(0,l.Lk)("th",null,"状态"),(0,l.Lk)("th",null,"优先级"),(0,l.Lk)("th",null,"操作")])],-1)),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.announcements,a=>((0,l.uX)(),(0,l.CE)("tr",{key:a.id},[(0,l.Lk)("td",null,(0,v.v_)(a.id),1),(0,l.Lk)("td",null,[(0,l.Lk)("div",hs,[(0,l.Lk)("img",{src:a.publisherAvatar,alt:a.publisher,class:"avatar"},null,8,bs),(0,l.Lk)("span",null,(0,v.v_)(a.publisher),1)])]),(0,l.Lk)("td",null,(0,v.v_)(a.title),1),(0,l.Lk)("td",null,(0,v.v_)(a.content),1),(0,l.Lk)("td",null,(0,v.v_)(a.publishTime),1),(0,l.Lk)("td",null,[(0,l.Lk)("span",{class:(0,v.C4)(["status",a.status])},(0,v.v_)(a.statusText),3)]),(0,l.Lk)("td",null,[(0,l.Lk)("span",{class:(0,v.C4)(["priority",a.priority])},(0,v.v_)(a.priorityText),3)]),(0,l.Lk)("td",null,[(0,l.Lk)("div",gs,[(0,l.Lk)("button",{class:"btn-edit",onClick:t=>e.showEditModal(a)},"编辑",8,Ls),(0,l.Lk)("button",{class:"btn-delete",onClick:t=>e.showDeleteConfirm(a)},"删除",8,fs)])])]))),128))])])])]),e.showAnnouncementModal?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"modal-overlay",onClick:a[12]||(a[12]=(...a)=>e.closeAnnouncementModal&&e.closeAnnouncementModal(...a))},[(0,l.Lk)("div",{class:"modal-content",onClick:a[11]||(a[11]=(0,s.D$)(()=>{},["stop"]))},[(0,l.Lk)("div",ys,[(0,l.Lk)("h3",null,(0,v.v_)(e.isEdit?"编辑公告":"发布公告"),1),(0,l.Lk)("button",{class:"modal-close",onClick:a[1]||(a[1]=(...a)=>e.closeAnnouncementModal&&e.closeAnnouncementModal(...a))},"×")]),(0,l.Lk)("div",xs,[(0,l.Lk)("form",{onSubmit:a[8]||(a[8]=(0,s.D$)((...a)=>e.submitAnnouncement&&e.submitAnnouncement(...a),["prevent"]))},[(0,l.Lk)("div",Ts,[a[23]||(a[23]=(0,l.Lk)("label",null,[(0,l.eW)("公告标题 "),(0,l.Lk)("span",{class:"required"},"*")],-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=a=>e.announcementForm.title=a),placeholder:"请输入公告标题...",maxlength:"100",required:""},null,512),[[s.Jo,e.announcementForm.title]]),(0,l.Lk)("div",As,(0,v.v_)(e.announcementForm.title.length)+"/100",1),e.formErrors.title?((0,l.uX)(),(0,l.CE)("div",ws,(0,v.v_)(e.formErrors.title),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",Cs,[a[24]||(a[24]=(0,l.Lk)("label",null,[(0,l.eW)("公告内容 "),(0,l.Lk)("span",{class:"required"},"*")],-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":a[3]||(a[3]=a=>e.announcementForm.content=a),placeholder:"请输入公告详细内容...",rows:"6",maxlength:"1000",required:""},null,512),[[s.Jo,e.announcementForm.content]]),(0,l.Lk)("div",Fs,(0,v.v_)(e.announcementForm.content.length)+"/1000",1),e.formErrors.content?((0,l.uX)(),(0,l.CE)("div",_s,(0,v.v_)(e.formErrors.content),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",Es,[a[26]||(a[26]=(0,l.Lk)("label",null,[(0,l.eW)("优先级 "),(0,l.Lk)("span",{class:"required"},"*")],-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[4]||(a[4]=a=>e.announcementForm.priority=a),required:""},a[25]||(a[25]=[(0,l.Lk)("option",{value:""},"请选择优先级",-1),(0,l.Lk)("option",{value:"low"},"普通",-1),(0,l.Lk)("option",{value:"medium"},"重要",-1),(0,l.Lk)("option",{value:"high"},"紧急",-1)]),512),[[s.u1,e.announcementForm.priority]]),e.formErrors.priority?((0,l.uX)(),(0,l.CE)("div",Is,(0,v.v_)(e.formErrors.priority),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",Ss,[a[28]||(a[28]=(0,l.Lk)("label",null,"发布状态",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[5]||(a[5]=a=>e.announcementForm.status=a)},a[27]||(a[27]=[(0,l.Lk)("option",{value:"published"},"立即发布",-1),(0,l.Lk)("option",{value:"draft"},"保存为草稿",-1)]),512),[[s.u1,e.announcementForm.status]])]),(0,l.Lk)("div",Ms,[a[30]||(a[30]=(0,l.Lk)("label",null,"是否置顶",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[6]||(a[6]=a=>e.announcementForm.isTop=a)},a[29]||(a[29]=[(0,l.Lk)("option",{value:"false"},"否",-1),(0,l.Lk)("option",{value:"true"},"是",-1)]),512),[[s.u1,e.announcementForm.isTop]])]),(0,l.Lk)("div",Ds,[a[32]||(a[32]=(0,l.Lk)("label",null,"通知范围",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[7]||(a[7]=a=>e.announcementForm.scope=a)},a[31]||(a[31]=[(0,l.Lk)("option",{value:"all"},"全公司",-1),(0,l.Lk)("option",{value:"department"},"部门内",-1),(0,l.Lk)("option",{value:"specific"},"指定人员",-1)]),512),[[s.u1,e.announcementForm.scope]])])],32)]),(0,l.Lk)("div",Us,[(0,l.Lk)("button",{type:"button",class:"btn-cancel",onClick:a[9]||(a[9]=(...a)=>e.closeAnnouncementModal&&e.closeAnnouncementModal(...a))},"取消"),(0,l.Lk)("button",{type:"button",class:"btn-submit",onClick:a[10]||(a[10]=(...a)=>e.submitAnnouncement&&e.submitAnnouncement(...a)),disabled:e.submitting},[e.submitting?((0,l.uX)(),(0,l.CE)("span",Os)):(0,l.Q3)("",!0),(0,l.eW)(" "+(0,v.v_)(e.submitting?e.isEdit?"更新中...":"发布中...":e.isEdit?"更新公告":"发布公告"),1)],8,Rs)])])])):(0,l.Q3)("",!0),e.showDeleteModal?((0,l.uX)(),(0,l.CE)("div",{key:1,class:"modal-overlay",onClick:a[17]||(a[17]=(...a)=>e.closeDeleteModal&&e.closeDeleteModal(...a))},[(0,l.Lk)("div",{class:"modal-content delete-modal",onClick:a[16]||(a[16]=(0,s.D$)(()=>{},["stop"]))},[(0,l.Lk)("div",Ps,[a[33]||(a[33]=(0,l.Lk)("h3",null,"确认删除",-1)),(0,l.Lk)("button",{class:"modal-close",onClick:a[13]||(a[13]=(...a)=>e.closeDeleteModal&&e.closeDeleteModal(...a))},"×")]),(0,l.Lk)("div",Ns,[(0,l.Lk)("p",null,[a[34]||(a[34]=(0,l.eW)("确定要删除公告 ",-1)),(0,l.Lk)("strong",null,(0,v.v_)(e.announcementToDelete?.title),1),a[35]||(a[35]=(0,l.eW)(" 吗？",-1))]),a[36]||(a[36]=(0,l.Lk)("p",null,"此操作无法撤销。",-1))]),(0,l.Lk)("div",Ks,[(0,l.Lk)("button",{type:"button",class:"btn-cancel",onClick:a[14]||(a[14]=(...a)=>e.closeDeleteModal&&e.closeDeleteModal(...a))},"取消"),(0,l.Lk)("button",{type:"button",class:"btn-delete-confirm",onClick:a[15]||(a[15]=(...a)=>e.confirmDelete&&e.confirmDelete(...a))},"确认删除")])])])):(0,l.Q3)("",!0)])}var Xs=(0,l.pM)({name:"Announcement",setup(){const e=(0,u.rd)(),a=(0,S.KR)({username:"",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=AnnouncementUser1"}),t=(0,S.KR)(!1),s=(0,S.KR)(!1),o=(0,S.KR)(!1),i=(0,S.KR)(!1),n=(0,S.KR)(null),r=(0,S.KR)(null),d=(0,S.KR)({title:"",content:"",priority:"",status:"published",isTop:"false",scope:"all"}),c=(0,S.KR)({title:"",content:"",priority:""}),v=(0,S.KR)([{id:"ANN001",publisher:"张总",publisherAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Announcement1",title:"公司年度总结会议通知",content:"定于本周五下午2点召开年度总结会议",publishTime:"2024-01-15 09:00:00",status:"published",statusText:"已发布",priority:"high",priorityText:"高"},{id:"ANN002",publisher:"李经理",publisherAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Announcement2",title:"年终奖金发放通知",content:"年终奖金将于本月底前发放到账",publishTime:"2024-01-14 14:30:00",status:"published",statusText:"已发布",priority:"medium",priorityText:"中"},{id:"ANN003",publisher:"王主管",publisherAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Announcement3",title:"新员工入职培训安排",content:"新员工入职培训将于下周一开始",publishTime:"2024-01-13 10:15:00",status:"draft",statusText:"草稿",priority:"low",priorityText:"低"},{id:"ANN004",publisher:"赵工程师",publisherAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Announcement4",title:"系统维护升级通知",content:"系统将于今晚进行维护升级",publishTime:"2024-01-12 16:45:00",status:"published",statusText:"已发布",priority:"high",priorityText:"高"},{id:"ANN005",publisher:"周人事",publisherAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Announcement5",title:"春节放假安排通知",content:"春节放假时间安排已确定",publishTime:"2024-01-11 11:20:00",status:"published",statusText:"已发布",priority:"high",priorityText:"高"},{id:"ANN006",publisher:"吴主管",publisherAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Announcement6",title:"员工体检安排通知",content:"年度员工体检将于下月进行",publishTime:"2024-01-10 15:30:00",status:"published",statusText:"已发布",priority:"medium",priorityText:"中"},{id:"ANN007",publisher:"郑总监",publisherAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Announcement7",title:"季度目标完成情况",content:"第四季度目标完成情况汇报",publishTime:"2024-01-09 09:45:00",status:"published",statusText:"已发布",priority:"medium",priorityText:"中"},{id:"ANN008",publisher:"孙经理",publisherAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Announcement8",title:"专业技能培训计划",content:"专业技能培训计划已制定完成",publishTime:"2024-01-08 14:15:00",status:"published",statusText:"已发布",priority:"medium",priorityText:"中"},{id:"ANN009",publisher:"钱总监",publisherAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Announcement9",title:"项目奖金分配方案",content:"项目奖金分配方案已确定",publishTime:"2024-01-07 10:30:00",status:"published",statusText:"已发布",priority:"high",priorityText:"高"},{id:"ANN010",publisher:"李总",publisherAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Announcement10",title:"新办公室搬迁通知",content:"新办公室搬迁计划已确定",publishTime:"2024-01-06 16:00:00",status:"published",statusText:"已发布",priority:"medium",priorityText:"中"},{id:"ANN011",publisher:"王总",publisherAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Announcement11",title:"公司成立五周年庆典",content:"公司成立五周年庆典活动安排",publishTime:"2024-01-05 13:45:00",status:"published",statusText:"已发布",priority:"high",priorityText:"高"},{id:"ANN012",publisher:"张总监",publisherAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Announcement12",title:"年度业绩报告发布",content:"年度业绩报告已发布",publishTime:"2024-01-04 09:20:00",status:"published",statusText:"已发布",priority:"medium",priorityText:"中"},{id:"ANN013",publisher:"陈主管",publisherAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Announcement13",title:"环保倡议活动通知",content:"环保倡议活动即将开始",publishTime:"2024-01-03 15:10:00",status:"published",statusText:"已发布",priority:"low",priorityText:"低"},{id:"ANN014",publisher:"刘工程师",publisherAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Announcement14",title:"信息安全培训通知",content:"信息安全培训将于下周进行",publishTime:"2024-01-02 11:35:00",status:"published",statusText:"已发布",priority:"medium",priorityText:"中"},{id:"ANN015",publisher:"马经理",publisherAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Announcement15",title:"团队建设活动安排",content:"团队建设活动安排已确定",publishTime:"2024-01-01 14:50:00",status:"published",statusText:"已发布",priority:"low",priorityText:"低"},{id:"ANN016",publisher:"朱总监",publisherAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Announcement16",title:"销售业绩表彰大会",content:"销售业绩表彰大会通知",publishTime:"2023-12-31 10:15:00",status:"published",statusText:"已发布",priority:"high",priorityText:"高"},{id:"ANN017",publisher:"胡人事",publisherAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Announcement17",title:"学历提升补贴政策",content:"学历提升补贴政策已更新",publishTime:"2023-12-30 16:30:00",status:"published",statusText:"已发布",priority:"medium",priorityText:"中"},{id:"ANN018",publisher:"郭主管",publisherAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Announcement18",title:"员工运动会通知",content:"员工运动会将于下月举行",publishTime:"2023-12-29 13:20:00",status:"published",statusText:"已发布",priority:"low",priorityText:"低"},{id:"ANN019",publisher:"何经理",publisherAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Announcement19",title:"年度工作总结要求",content:"年度工作总结要求已发布",publishTime:"2023-12-28 09:45:00",status:"published",statusText:"已发布",priority:"medium",priorityText:"中"},{id:"ANN020",publisher:"高主管",publisherAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Announcement20",title:"员工生日福利发放",content:"员工生日福利发放通知",publishTime:"2023-12-27 15:15:00",status:"published",statusText:"已发布",priority:"low",priorityText:"低"},{id:"ANN021",publisher:"林经理",publisherAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Announcement21",title:"考勤制度调整通知",content:"考勤制度调整通知",publishTime:"2023-12-26 11:00:00",status:"published",statusText:"已发布",priority:"high",priorityText:"高"},{id:"ANN022",publisher:"罗工程师",publisherAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Announcement22",title:"企业微信使用指南",content:"企业微信使用指南已更新",publishTime:"2023-12-25 14:25:00",status:"published",statusText:"已发布",priority:"medium",priorityText:"中"},{id:"ANN023",publisher:"梁总监",publisherAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Announcement23",title:"国际化发展战略",content:"公司国际化发展战略发布",publishTime:"2023-12-24 10:40:00",status:"published",statusText:"已发布",priority:"high",priorityText:"高"},{id:"ANN024",publisher:"谢经理",publisherAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Announcement24",title:"新产品发布会通知",content:"新产品发布会即将举行",publishTime:"2023-12-23 16:50:00",status:"published",statusText:"已发布",priority:"high",priorityText:"高"},{id:"ANN025",publisher:"王总监",publisherAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Announcement25",title:"年度预算编制通知",content:"年度预算编制工作开始",publishTime:"2023-12-22 13:15:00",status:"published",statusText:"已发布",priority:"medium",priorityText:"中"},{id:"ANN026",publisher:"李总",publisherAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Announcement26",title:"优秀员工评选结果",content:"年度优秀员工评选结果",publishTime:"2023-12-21 09:30:00",status:"published",statusText:"已发布",priority:"high",priorityText:"高"},{id:"ANN027",publisher:"张主管",publisherAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Announcement27",title:"图书角建设倡议",content:"公司图书角建设倡议",publishTime:"2023-12-20 15:45:00",status:"published",statusText:"已发布",priority:"low",priorityText:"低"},{id:"ANN028",publisher:"陈经理",publisherAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Announcement28",title:"绿色办公倡议",content:"绿色办公倡议活动",publishTime:"2023-12-19 11:20:00",status:"published",statusText:"已发布",priority:"low",priorityText:"低"},{id:"ANN029",publisher:"刘主管",publisherAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Announcement29",title:"部门团建活动安排",content:"部门团建活动安排通知",publishTime:"2023-12-18 14:10:00",status:"published",statusText:"已发布",priority:"low",priorityText:"低"},{id:"ANN030",publisher:"马总监",publisherAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Announcement30",title:"月度业绩分析报告",content:"11月业绩分析报告发布",publishTime:"2023-12-17 10:25:00",status:"published",statusText:"已发布",priority:"medium",priorityText:"中"}]),p=()=>{e.push("/")},m=()=>{const e=localStorage.getItem("user");if(e)try{const s=JSON.parse(e),l=localStorage.getItem("savedUserInfo");if(l)try{const e=JSON.parse(l);a.value={...s,...e,username:e.username||s.username||"",avatar:e.avatar||a.value.avatar}}catch(t){console.error("解析保存的用户信息失败:",t),a.value={...s,username:s.username||"",avatar:a.value.avatar}}else a.value={...s,username:s.username||"",avatar:a.value.avatar}}catch(t){console.error("解析用户信息失败:",t)}},k=()=>{o.value=!1,t.value=!0,d.value={title:"",content:"",priority:"",status:"published",isTop:"false",scope:"all"},c.value={title:"",content:"",priority:""}},h=e=>{o.value=!0,r.value=e,t.value=!0,d.value={title:e.title,content:e.content,priority:e.priority,status:e.status,isTop:e.isTop||"false",scope:e.scope||"all"},c.value={title:"",content:"",priority:""}},b=()=>{t.value=!1,o.value=!1,r.value=null,d.value={title:"",content:"",priority:"",status:"published",isTop:"false",scope:"all"},c.value={title:"",content:"",priority:""}},g=async()=>{let e=!1;if(d.value.title.trim()?c.value.title="":(c.value.title="请输入公告标题",e=!0),d.value.content.trim()?c.value.content="":(c.value.content="请输入公告内容",e=!0),d.value.priority?c.value.priority="":(c.value.priority="请选择优先级",e=!0),!e){i.value=!0;try{await new Promise(e=>setTimeout(e,2e3));const e={low:"普通",medium:"重要",high:"紧急"},t={published:"已发布",draft:"草稿"};if(o.value&&r.value){const a=r.value;a.title=d.value.title,a.content=d.value.content,a.priority=d.value.priority,a.priorityText=e[d.value.priority],a.status=d.value.status,a.statusText=t[d.value.status],a.isTop=d.value.isTop,a.scope=d.value.scope,a.updateTime=(new Date).toLocaleString("zh-CN"),alert("公告更新成功！")}else{const s={id:`ANN${String(v.value.length+1).padStart(3,"0")}`,publisher:a.value.username||"当前用户",publisherAvatar:a.value.avatar,title:d.value.title,content:d.value.content,publishTime:(new Date).toLocaleString("zh-CN"),status:d.value.status,statusText:t[d.value.status],priority:d.value.priority,priorityText:e[d.value.priority],isTop:d.value.isTop,scope:d.value.scope};v.value.unshift(s),alert("公告发布成功！")}b()}catch(t){alert("操作失败，请重试"),console.error("提交错误:",t)}finally{i.value=!1}}},L=e=>{n.value=e,s.value=!0},f=()=>{s.value=!1,n.value=null},y=()=>{if(n.value){const e=v.value.findIndex(e=>e.id===n.value.id);-1!==e&&(v.value.splice(e,1),f(),alert("公告已删除"))}},x=()=>{m()};return(0,l.sV)(()=>{m(),window.addEventListener("userInfoUpdated",x)}),(0,l.hi)(()=>{window.removeEventListener("userInfoUpdated",x)}),{userInfo:a,announcements:v,goHome:p,showAnnouncementModal:t,showDeleteModal:s,isEdit:o,submitting:i,announcementToDelete:n,announcementForm:d,formErrors:c,showAddModal:k,showEditModal:h,closeAnnouncementModal:b,submitAnnouncement:g,showDeleteConfirm:L,closeDeleteModal:f,confirmDelete:y}}});const Ws=(0,r.A)(Xs,[["render",zs],["__scopeId","data-v-26220826"]]);var js=Ws;const Hs={class:"file-manager-container"},qs={class:"page-header"},Js={class:"header-left"},Vs={class:"title-section"},$s={class:"page-title"},Qs={class:"header-right"},Bs={class:"user-info"},Gs={class:"file-list"},Ys={class:"list-header"},Zs={class:"file-table"},el={class:"file-info"},al={class:"file-icon"},tl={class:"file-name"},sl={class:"uploader-info"},ll=["src","alt"],ol={class:"actions"},il=["onClick"],nl=["onClick"],rl={class:"modal-header"},dl={class:"modal-body"},cl={class:"form-group"},ul={key:0,class:"upload-placeholder"},vl={key:1,class:"selected-file"},pl={class:"file-icon"},ml={class:"file-details"},kl={class:"file-name"},hl={class:"file-info"},bl={key:0,class:"form-error"},gl={class:"form-group"},Ll={class:"char-count"},fl={class:"form-group"},yl={class:"form-group"},xl={class:"modal-footer"},Tl=["disabled"],Al={key:0,class:"loading-spinner"},wl={class:"modal-header"},Cl={class:"modal-body"},Fl={class:"modal-footer"};function _l(e,a,t,o,i,n){const r=(0,l.g2)("a-icon"),d=(0,l.g2)("a-avatar"),c=(0,l.g2)("a-button");return(0,l.uX)(),(0,l.CE)("div",Hs,[(0,l.Lk)("div",qs,[(0,l.Lk)("div",Js,[(0,l.Lk)("div",Vs,[(0,l.Lk)("h1",$s,[(0,l.bF)(r,{type:"folder",class:"title-icon"}),a[21]||(a[21]=(0,l.eW)(" 文件管理 ",-1))]),a[22]||(a[22]=(0,l.Lk)("p",{class:"page-subtitle"},"管理系统文件、文档和资源共享",-1))])]),(0,l.Lk)("div",Qs,[(0,l.Lk)("div",Bs,[(0,l.bF)(d,{size:32,class:"user-avatar",src:e.userInfo.avatar},{default:(0,l.k6)(()=>[(0,l.bF)(r,{type:"user"})]),_:1},8,["src"]),(0,l.Lk)("span",null,"欢迎，"+(0,v.v_)(e.userInfo.username),1)]),(0,l.bF)(c,{type:"link",onClick:e.goHome,class:"home-btn"},{default:(0,l.k6)(()=>[(0,l.bF)(r,{type:"home"}),a[23]||(a[23]=(0,l.eW)(" 返回首页 ",-1))]),_:1,__:[23]},8,["onClick"])])]),a[38]||(a[38]=(0,l.Fv)('<div class="stats-overview" data-v-5d1aacdb><div class="stat-card total-files" data-v-5d1aacdb><div class="stat-icon" data-v-5d1aacdb><span class="icon-emoji" data-v-5d1aacdb>📁</span></div><div class="stat-content" data-v-5d1aacdb><div class="stat-number" data-v-5d1aacdb>1,234</div><div class="stat-label" data-v-5d1aacdb>总文件数</div></div></div><div class="stat-card total-size" data-v-5d1aacdb><div class="stat-icon" data-v-5d1aacdb><span class="icon-emoji" data-v-5d1aacdb>💾</span></div><div class="stat-content" data-v-5d1aacdb><div class="stat-number" data-v-5d1aacdb>45.6GB</div><div class="stat-label" data-v-5d1aacdb>总存储量</div></div></div><div class="stat-card uploaded-today" data-v-5d1aacdb><div class="stat-icon" data-v-5d1aacdb><span class="icon-emoji" data-v-5d1aacdb>📤</span></div><div class="stat-content" data-v-5d1aacdb><div class="stat-number" data-v-5d1aacdb>89</div><div class="stat-label" data-v-5d1aacdb>今日上传</div></div></div><div class="stat-card shared-files" data-v-5d1aacdb><div class="stat-icon" data-v-5d1aacdb><span class="icon-emoji" data-v-5d1aacdb>👥</span></div><div class="stat-content" data-v-5d1aacdb><div class="stat-number" data-v-5d1aacdb>156</div><div class="stat-label" data-v-5d1aacdb>共享文件</div></div></div></div>',1)),(0,l.Lk)("div",Gs,[(0,l.Lk)("div",Ys,[a[24]||(a[24]=(0,l.Lk)("h2",null,"文件列表",-1)),(0,l.Lk)("button",{class:"btn-upload",onClick:a[0]||(a[0]=(...a)=>e.openUploadModal&&e.openUploadModal(...a))},"+ 上传文件")]),(0,l.Lk)("div",Zs,[(0,l.Lk)("table",null,[a[25]||(a[25]=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"文件名"),(0,l.Lk)("th",null,"类型"),(0,l.Lk)("th",null,"大小"),(0,l.Lk)("th",null,"上传人"),(0,l.Lk)("th",null,"上传时间"),(0,l.Lk)("th",null,"状态"),(0,l.Lk)("th",null,"操作")])],-1)),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.fileList,a=>((0,l.uX)(),(0,l.CE)("tr",{key:a.id},[(0,l.Lk)("td",null,[(0,l.Lk)("div",el,[(0,l.Lk)("span",al,(0,v.v_)(a.icon),1),(0,l.Lk)("span",tl,(0,v.v_)(a.name),1)])]),(0,l.Lk)("td",null,(0,v.v_)(a.type),1),(0,l.Lk)("td",null,(0,v.v_)(a.size),1),(0,l.Lk)("td",null,[(0,l.Lk)("div",sl,[(0,l.Lk)("img",{src:a.uploaderAvatar,alt:a.uploader,class:"avatar"},null,8,ll),(0,l.Lk)("span",null,(0,v.v_)(a.uploader),1)])]),(0,l.Lk)("td",null,(0,v.v_)(a.uploadTime),1),(0,l.Lk)("td",null,[(0,l.Lk)("span",{class:(0,v.C4)(["status",a.status])},(0,v.v_)(a.statusText),3)]),(0,l.Lk)("td",null,[(0,l.Lk)("div",ol,[(0,l.Lk)("button",{class:"btn-download",onClick:t=>e.downloadFile(a)},"下载",8,il),(0,l.Lk)("button",{class:"btn-delete",onClick:t=>e.showDeleteConfirm(a)},"删除",8,nl)])])]))),128))])])])]),e.showUploadModal?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"modal-overlay",onClick:a[15]||(a[15]=(...a)=>e.closeUploadModal&&e.closeUploadModal(...a))},[(0,l.Lk)("div",{class:"modal-content",onClick:a[14]||(a[14]=(0,s.D$)(()=>{},["stop"]))},[(0,l.Lk)("div",rl,[a[26]||(a[26]=(0,l.Lk)("h3",null,"上传文件",-1)),(0,l.Lk)("button",{class:"modal-close",onClick:a[1]||(a[1]=(...a)=>e.closeUploadModal&&e.closeUploadModal(...a))},"×")]),(0,l.Lk)("div",dl,[(0,l.Lk)("form",{onSubmit:a[11]||(a[11]=(0,s.D$)((...a)=>e.submitUpload&&e.submitUpload(...a),["prevent"]))},[(0,l.Lk)("div",cl,[a[28]||(a[28]=(0,l.Lk)("label",null,[(0,l.eW)("选择文件 "),(0,l.Lk)("span",{class:"required"},"*")],-1)),(0,l.Lk)("div",{class:"file-upload-area",onClick:a[3]||(a[3]=(...a)=>e.triggerFileInput&&e.triggerFileInput(...a)),onDrop:a[4]||(a[4]=(...a)=>e.handleFileDrop&&e.handleFileDrop(...a)),onDragover:a[5]||(a[5]=(0,s.D$)(()=>{},["prevent"])),onDragenter:a[6]||(a[6]=(0,s.D$)(()=>{},["prevent"]))},[e.selectedFile?((0,l.uX)(),(0,l.CE)("div",vl,[(0,l.Lk)("span",pl,(0,v.v_)(e.getFileIcon(e.selectedFile.name)),1),(0,l.Lk)("div",ml,[(0,l.Lk)("div",kl,(0,v.v_)(e.selectedFile.name),1),(0,l.Lk)("div",hl,(0,v.v_)(e.formatFileSize(e.selectedFile.size))+" • "+(0,v.v_)(e.getFileType(e.selectedFile.name)),1)]),(0,l.Lk)("button",{type:"button",class:"remove-file",onClick:a[2]||(a[2]=(...a)=>e.removeSelectedFile&&e.removeSelectedFile(...a))},"✕")])):((0,l.uX)(),(0,l.CE)("div",ul,a[27]||(a[27]=[(0,l.Lk)("span",{class:"upload-icon"},"📁",-1),(0,l.Lk)("p",null,"点击选择文件或拖拽文件到此处",-1),(0,l.Lk)("p",{class:"upload-hint"},"支持所有文件类型，最大100MB",-1)])))],32),(0,l.Lk)("input",{ref:"fileInput",type:"file",onChange:a[7]||(a[7]=(...a)=>e.handleFileSelect&&e.handleFileSelect(...a)),accept:"*/*",style:{display:"none"}},null,544),e.formErrors.file?((0,l.uX)(),(0,l.CE)("div",bl,(0,v.v_)(e.formErrors.file),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",gl,[a[29]||(a[29]=(0,l.Lk)("label",null,[(0,l.eW)("文件描述 "),(0,l.Lk)("span",{class:"optional"},"(可选)")],-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":a[8]||(a[8]=a=>e.uploadForm.description=a),placeholder:"请输入文件描述，帮助其他用户了解文件内容...",rows:"3",maxlength:"200"},null,512),[[s.Jo,e.uploadForm.description]]),(0,l.Lk)("div",Ll,(0,v.v_)(e.uploadForm.description.length)+"/200",1)]),(0,l.Lk)("div",fl,[a[31]||(a[31]=(0,l.Lk)("label",null,"文件分类",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[9]||(a[9]=a=>e.uploadForm.category=a)},a[30]||(a[30]=[(0,l.Fv)('<option value="" data-v-5d1aacdb>请选择分类</option><option value="document" data-v-5d1aacdb>文档类</option><option value="image" data-v-5d1aacdb>图片类</option><option value="video" data-v-5d1aacdb>视频类</option><option value="audio" data-v-5d1aacdb>音频类</option><option value="archive" data-v-5d1aacdb>压缩包</option><option value="other" data-v-5d1aacdb>其他</option>',7)]),512),[[s.u1,e.uploadForm.category]])]),(0,l.Lk)("div",yl,[a[33]||(a[33]=(0,l.Lk)("label",null,"访问权限",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[10]||(a[10]=a=>e.uploadForm.access=a)},a[32]||(a[32]=[(0,l.Lk)("option",{value:"public"},"公开",-1),(0,l.Lk)("option",{value:"private"},"私有",-1),(0,l.Lk)("option",{value:"shared"},"共享",-1)]),512),[[s.u1,e.uploadForm.access]])])],32)]),(0,l.Lk)("div",xl,[(0,l.Lk)("button",{type:"button",class:"btn-cancel",onClick:a[12]||(a[12]=(...a)=>e.closeUploadModal&&e.closeUploadModal(...a))},"取消"),(0,l.Lk)("button",{type:"button",class:"btn-submit",onClick:a[13]||(a[13]=(...a)=>e.submitUpload&&e.submitUpload(...a)),disabled:!e.selectedFile||e.uploading},[e.uploading?((0,l.uX)(),(0,l.CE)("span",Al)):(0,l.Q3)("",!0),(0,l.eW)(" "+(0,v.v_)(e.uploading?"上传中...":"上传文件"),1)],8,Tl)])])])):(0,l.Q3)("",!0),e.showDeleteModal?((0,l.uX)(),(0,l.CE)("div",{key:1,class:"modal-overlay",onClick:a[20]||(a[20]=(...a)=>e.closeDeleteModal&&e.closeDeleteModal(...a))},[(0,l.Lk)("div",{class:"modal-content delete-modal",onClick:a[19]||(a[19]=(0,s.D$)(()=>{},["stop"]))},[(0,l.Lk)("div",wl,[a[34]||(a[34]=(0,l.Lk)("h3",null,"确认删除",-1)),(0,l.Lk)("button",{class:"modal-close",onClick:a[16]||(a[16]=(...a)=>e.closeDeleteModal&&e.closeDeleteModal(...a))},"×")]),(0,l.Lk)("div",Cl,[(0,l.Lk)("p",null,[a[35]||(a[35]=(0,l.eW)("确定要删除文件 ",-1)),(0,l.Lk)("strong",null,(0,v.v_)(e.fileToDelete?.name),1),a[36]||(a[36]=(0,l.eW)(" 吗？",-1))]),a[37]||(a[37]=(0,l.Lk)("p",null,"此操作无法撤销。",-1))]),(0,l.Lk)("div",Fl,[(0,l.Lk)("button",{type:"button",class:"btn-cancel",onClick:a[17]||(a[17]=(...a)=>e.closeDeleteModal&&e.closeDeleteModal(...a))},"取消"),(0,l.Lk)("button",{type:"button",class:"btn-delete-confirm",onClick:a[18]||(a[18]=(...a)=>e.confirmDelete&&e.confirmDelete(...a))},"确认删除")])])])):(0,l.Q3)("",!0)])}var El=(0,l.pM)({name:"FileManager",setup(){const e=(0,u.rd)(),a=(0,S.KR)(null),t=(0,S.KR)({username:"",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=FileManager1"}),s=(0,S.KR)([{id:"FILE001",name:"项目计划书.docx",icon:"📄",type:"Word文档",size:"2.5MB",uploader:"张三",uploaderAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=File1",uploadTime:"2024-01-15 10:30:00",status:"active",statusText:"正常"},{id:"FILE002",name:"财务报表.xlsx",icon:"📊",type:"Excel表格",size:"1.8MB",uploader:"李四",uploaderAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=File2",uploadTime:"2024-01-15 09:15:00",status:"active",statusText:"正常"},{id:"FILE003",name:"产品设计图.psd",icon:"🎨",type:"Photoshop文件",size:"15.2MB",uploader:"王五",uploaderAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=File3",uploadTime:"2024-01-14 16:45:00",status:"active",statusText:"正常"},{id:"FILE004",name:"会议纪要.pdf",icon:"📋",type:"PDF文档",size:"3.2MB",uploader:"赵六",uploaderAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=File4",uploadTime:"2024-01-14 14:20:00",status:"active",statusText:"正常"},{id:"FILE005",name:"员工手册.docx",icon:"📄",type:"Word文档",size:"5.7MB",uploader:"钱七",uploaderAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=File5",uploadTime:"2024-01-14 11:45:00",status:"active",statusText:"正常"},{id:"FILE006",name:"销售数据.xlsx",icon:"📊",type:"Excel表格",size:"2.1MB",uploader:"孙八",uploaderAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=File6",uploadTime:"2024-01-14 09:30:00",status:"active",statusText:"正常"},{id:"FILE007",name:"网站设计稿.fig",icon:"🎨",type:"Figma文件",size:"8.9MB",uploader:"周九",uploaderAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=File7",uploadTime:"2024-01-13 17:15:00",status:"active",statusText:"正常"},{id:"FILE008",name:"技术规范.pdf",icon:"📋",type:"PDF文档",size:"4.3MB",uploader:"吴十",uploaderAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=File8",uploadTime:"2024-01-13 15:40:00",status:"active",statusText:"正常"},{id:"FILE009",name:"客户名单.xlsx",icon:"📊",type:"Excel表格",size:"1.2MB",uploader:"郑十一",uploaderAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=File9",uploadTime:"2024-01-13 13:25:00",status:"active",statusText:"正常"},{id:"FILE010",name:"产品宣传片.mp4",icon:"🎬",type:"视频文件",size:"45.8MB",uploader:"王十二",uploaderAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=File10",uploadTime:"2024-01-13 10:50:00",status:"active",statusText:"正常"},{id:"FILE011",name:"年度报告.pdf",icon:"📋",type:"PDF文档",size:"12.7MB",uploader:"李十三",uploaderAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=File11",uploadTime:"2024-01-12 16:30:00",status:"active",statusText:"正常"},{id:"FILE012",name:"培训材料.pptx",icon:"📽️",type:"PowerPoint",size:"6.8MB",uploader:"张十四",uploaderAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=File12",uploadTime:"2024-01-12 14:15:00",status:"active",statusText:"正常"},{id:"FILE013",name:"数据库备份.sql",icon:"🗄️",type:"SQL文件",size:"2.3MB",uploader:"刘十五",uploaderAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=File13",uploadTime:"2024-01-12 11:20:00",status:"active",statusText:"正常"},{id:"FILE014",name:"合同模板.docx",icon:"📄",type:"Word文档",size:"3.9MB",uploader:"陈十六",uploaderAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=File14",uploadTime:"2024-01-12 09:45:00",status:"active",statusText:"正常"},{id:"FILE015",name:"库存清单.xlsx",icon:"📊",type:"Excel表格",size:"1.6MB",uploader:"杨十七",uploaderAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=File15",uploadTime:"2024-01-11 17:10:00",status:"active",statusText:"正常"},{id:"FILE016",name:"Logo设计.ai",icon:"🎨",type:"Illustrator",size:"7.4MB",uploader:"黄十八",uploaderAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=File16",uploadTime:"2024-01-11 15:35:00",status:"active",statusText:"正常"},{id:"FILE017",name:"系统日志.txt",icon:"📝",type:"文本文件",size:"0.8MB",uploader:"赵十九",uploaderAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=File17",uploadTime:"2024-01-11 13:50:00",status:"active",statusText:"正常"},{id:"FILE018",name:"项目预算.xlsx",icon:"📊",type:"Excel表格",size:"2.8MB",uploader:"吴二十",uploaderAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=File18",uploadTime:"2024-01-11 11:25:00",status:"active",statusText:"正常"},{id:"FILE019",name:"用户手册.pdf",icon:"📋",type:"PDF文档",size:"9.1MB",uploader:"徐二一",uploaderAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=File19",uploadTime:"2024-01-10 16:40:00",status:"active",statusText:"正常"},{id:"FILE020",name:"代码规范.md",icon:"📝",type:"Markdown",size:"0.5MB",uploader:"孙二二",uploaderAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=File20",uploadTime:"2024-01-10 14:55:00",status:"active",statusText:"正常"},{id:"FILE021",name:"产品图片.jpg",icon:"🖼️",type:"图片文件",size:"3.7MB",uploader:"马二三",uploaderAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=File21",uploadTime:"2024-01-10 12:30:00",status:"active",statusText:"正常"},{id:"FILE022",name:"会议录音.mp3",icon:"🎵",type:"音频文件",size:"18.5MB",uploader:"朱二四",uploaderAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=File22",uploadTime:"2024-01-10 10:15:00",status:"active",statusText:"正常"},{id:"FILE023",name:"工作流程.pdf",icon:"📋",type:"PDF文档",size:"5.2MB",uploader:"胡二五",uploaderAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=File23",uploadTime:"2024-01-09 17:25:00",status:"active",statusText:"正常"},{id:"FILE024",name:"数据分析.xlsx",icon:"📊",type:"Excel表格",size:"4.1MB",uploader:"郭二六",uploaderAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=File24",uploadTime:"2024-01-09 15:40:00",status:"active",statusText:"正常"},{id:"FILE025",name:"设计方案.sketch",icon:"🎨",type:"Sketch文件",size:"22.3MB",uploader:"何二七",uploaderAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=File25",uploadTime:"2024-01-09 13:55:00",status:"active",statusText:"正常"},{id:"FILE026",name:"测试报告.docx",icon:"📄",type:"Word文档",size:"2.9MB",uploader:"高二八",uploaderAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=File26",uploadTime:"2024-01-09 11:20:00",status:"active",statusText:"正常"},{id:"FILE027",name:"配置文件.yaml",icon:"⚙️",type:"配置文件",size:"0.3MB",uploader:"林二九",uploaderAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=File27",uploadTime:"2024-01-09 09:35:00",status:"active",statusText:"正常"},{id:"FILE028",name:"演示文稿.pptx",icon:"📽️",type:"PowerPoint",size:"8.7MB",uploader:"罗三十",uploaderAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=File28",uploadTime:"2024-01-08 16:50:00",status:"active",statusText:"正常"},{id:"FILE029",name:"源代码.zip",icon:"📦",type:"压缩文件",size:"35.6MB",uploader:"梁三一",uploaderAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=File29",uploadTime:"2024-01-08 14:25:00",status:"active",statusText:"正常"},{id:"FILE030",name:"项目总结.docx",icon:"📄",type:"Word文档",size:"4.8MB",uploader:"谢三二",uploaderAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=File30",uploadTime:"2024-01-08 12:10:00",status:"active",statusText:"正常"}]),o=(0,S.KR)(!1),i=(0,S.KR)(!1),n=(0,S.KR)(null),r=(0,S.KR)(null),d=(0,S.KR)({description:"",category:"",access:"public"}),c=(0,S.KR)(!1),v=(0,S.KR)({file:""}),p=()=>{e.push("/")},m=()=>{const e=localStorage.getItem("user");if(e)try{const s=JSON.parse(e),l=localStorage.getItem("savedUserInfo");if(l)try{const e=JSON.parse(l);t.value={...s,...e,username:e.username||s.username||"",avatar:e.avatar||t.value.avatar}}catch(a){console.error("解析保存的用户信息失败:",a),t.value={...s,username:s.username||"",avatar:t.value.avatar}}else t.value={...s,username:s.username||"",avatar:t.value.avatar}}catch(a){console.error("解析用户信息失败:",a)}},k=()=>{o.value=!0,n.value=null,d.value={description:"",category:"",access:"public"},v.value.file=""},h=()=>{o.value=!1,n.value=null,d.value={description:"",category:"",access:"public"},v.value.file=""},b=()=>{a.value.click()},g=e=>{const a=e.target.files[0];a&&f(a)},L=e=>{e.preventDefault();const a=e.dataTransfer.files;a.length>0&&f(a[0])},f=e=>{const a=104857600;if(e.size>a)return void(v.value.file="文件大小不能超过100MB");const t=["image/","video/","audio/","text/","application/","application/pdf","application/msword","application/vnd.openxmlformats-officedocument","application/vnd.ms-excel","application/zip","application/x-rar-compressed"],s=t.some(a=>e.type.startsWith(a));s||e.name.includes(".")?(n.value=e,v.value.file="",e.type.startsWith("image/")?d.value.category="image":e.type.startsWith("video/")?d.value.category="video":e.type.startsWith("audio/")?d.value.category="audio":e.type.includes("zip")||e.type.includes("rar")?d.value.category="archive":e.type.includes("pdf")||e.type.includes("word")||e.type.includes("excel")?d.value.category="document":d.value.category="other"):v.value.file="不支持的文件类型"},y=()=>{n.value=null,v.value.file="",a.value&&(a.value.value="")},x=()=>{if(!n.value)return void(v.value.file="请选择要上传的文件");const e={id:`FILE${String(s.value.length+1).padStart(3,"0")}`,name:n.value.name,icon:T(n.value.name),type:A(n.value.name),size:w(n.value.size),uploader:t.value.username||"当前用户",uploaderAvatar:t.value.avatar,uploadTime:(new Date).toLocaleString("zh-CN"),status:"active",statusText:"正常"};s.value.unshift(e),h(),alert("文件上传成功！")},T=e=>{const a=e.toLowerCase().split(".").pop(),t={pdf:"📋",doc:"📄",docx:"📄",xls:"📊",xlsx:"📊",ppt:"📽️",pptx:"📽️",jpg:"🖼️",jpeg:"🖼️",png:"🖼️",gif:"🖼️",mp4:"🎬",avi:"🎬",mov:"🎬",mp3:"🎵",wav:"🎵",zip:"📦",rar:"📦","7z":"📦",psd:"🎨",ai:"🎨",sketch:"🎨",fig:"🎨",sql:"🗄️",md:"📝",txt:"📝",yaml:"⚙️",yml:"⚙️",json:"⚙️"};return t[a]||"📄"},A=e=>{const a=e.toLowerCase().split(".").pop(),t={pdf:"PDF文档",doc:"Word文档",docx:"Word文档",xls:"Excel表格",xlsx:"Excel表格",ppt:"PowerPoint",pptx:"PowerPoint",jpg:"图片文件",jpeg:"图片文件",png:"图片文件",gif:"图片文件",mp4:"视频文件",avi:"视频文件",mov:"视频文件",mp3:"音频文件",wav:"音频文件",zip:"压缩文件",rar:"压缩文件","7z":"压缩文件",psd:"Photoshop文件",ai:"Illustrator",sketch:"Sketch文件",fig:"Figma文件",sql:"SQL文件",md:"Markdown",txt:"文本文件",yaml:"配置文件",yml:"配置文件",json:"配置文件"};return t[a]||"未知文件"},w=e=>{if(0===e)return"0 B";const a=1024,t=["B","KB","MB","GB"],s=Math.floor(Math.log(e)/Math.log(a));return parseFloat((e/Math.pow(a,s)).toFixed(1))+t[s]},C=e=>{const a=document.createElement("a");a.href=`data:text/plain;charset=utf-8,${encodeURIComponent(e.name)}`,a.download=e.name,document.body.appendChild(a),a.click(),document.body.removeChild(a),alert(`开始下载文件：${e.name}`)},F=e=>{r.value=e,i.value=!0},_=()=>{i.value=!1,r.value=null},E=()=>{if(r.value){const e=s.value.findIndex(e=>e.id===r.value.id);-1!==e&&(s.value.splice(e,1),_(),alert("文件已删除"))}},I=()=>{m()};return(0,l.sV)(()=>{m(),window.addEventListener("userInfoUpdated",I)}),(0,l.hi)(()=>{window.removeEventListener("userInfoUpdated",I)}),{userInfo:t,fileList:s,goHome:p,showUploadModal:o,openUploadModal:k,closeUploadModal:h,triggerFileInput:b,handleFileSelect:g,handleFileDrop:L,removeSelectedFile:y,submitUpload:x,downloadFile:C,showDeleteConfirm:F,closeDeleteModal:_,confirmDelete:E,selectedFile:n,uploadForm:d,formErrors:v,uploading:c,showDeleteModal:i,fileToDelete:r,fileInput:a,getFileIcon:T,getFileType:A,formatFileSize:w}}});const Il=(0,r.A)(El,[["render",_l],["__scopeId","data-v-5d1aacdb"]]);var Sl=Il;const Ml={class:"user-management-container"},Dl={class:"page-header"},Ul={class:"header-left"},Rl={class:"title-section"},Ol={class:"page-title"},Pl={class:"header-right"},Nl={class:"user-info"},Kl={class:"user-list"},zl={class:"list-header"},Xl={class:"user-table"},Wl={class:"user-info"},jl=["src","alt"],Hl={class:"actions"},ql=["onClick"],Jl=["onClick"],Vl={class:"modal-header"},$l={class:"modal-body"},Ql={class:"form-group"},Bl=["disabled"],Gl={key:0,class:"form-error"},Yl={class:"form-group"},Zl={key:0,class:"form-error"},eo={class:"form-group"},ao={key:0,class:"form-error"},to={class:"form-group"},so={key:0,class:"form-error"},lo={class:"form-group"},oo={key:0,class:"form-error"},io={class:"form-group"},no={key:0,class:"form-error"},ro={class:"modal-footer"},co={class:"modal-header"},uo={class:"modal-body"},vo={class:"modal-footer"};function po(e,a,t,o,i,n){const r=(0,l.g2)("a-icon"),d=(0,l.g2)("a-avatar"),c=(0,l.g2)("a-button");return(0,l.uX)(),(0,l.CE)("div",Ml,[(0,l.Lk)("div",Dl,[(0,l.Lk)("div",Ul,[(0,l.Lk)("div",Rl,[(0,l.Lk)("h1",Ol,[(0,l.bF)(r,{type:"user",class:"title-icon"}),a[18]||(a[18]=(0,l.eW)(" 用户管理 ",-1))]),a[19]||(a[19]=(0,l.Lk)("p",{class:"page-subtitle"},"管理系统用户账户、权限和角色分配",-1))])]),(0,l.Lk)("div",Pl,[(0,l.Lk)("div",Nl,[(0,l.bF)(d,{size:32,class:"user-avatar",src:e.userInfo.avatar},{default:(0,l.k6)(()=>[(0,l.bF)(r,{type:"user"})]),_:1},8,["src"]),(0,l.Lk)("span",null,"欢迎，"+(0,v.v_)(e.userInfo.username),1)]),(0,l.bF)(c,{type:"link",onClick:e.goHome,class:"home-btn"},{default:(0,l.k6)(()=>[(0,l.bF)(r,{type:"home"}),a[20]||(a[20]=(0,l.eW)(" 返回首页 ",-1))]),_:1,__:[20]},8,["onClick"])])]),a[35]||(a[35]=(0,l.Fv)('<div class="stats-overview" data-v-0f9e2541><div class="stat-card" data-v-0f9e2541><div class="stat-icon" data-v-0f9e2541>👥</div><div class="stat-content" data-v-0f9e2541><div class="stat-number" data-v-0f9e2541>156</div><div class="stat-label" data-v-0f9e2541>总用户数</div></div></div><div class="stat-card" data-v-0f9e2541><div class="stat-icon" data-v-0f9e2541>✅</div><div class="stat-content" data-v-0f9e2541><div class="stat-number" data-v-0f9e2541>142</div><div class="stat-label" data-v-0f9e2541>活跃用户</div></div></div><div class="stat-card" data-v-0f9e2541><div class="stat-icon" data-v-0f9e2541>🔒</div><div class="stat-content" data-v-0f9e2541><div class="stat-number" data-v-0f9e2541>8</div><div class="stat-label" data-v-0f9e2541>管理员</div></div></div><div class="stat-card" data-v-0f9e2541><div class="stat-icon" data-v-0f9e2541>📅</div><div class="stat-content" data-v-0f9e2541><div class="stat-number" data-v-0f9e2541>12</div><div class="stat-label" data-v-0f9e2541>本月新增</div></div></div></div>',1)),(0,l.Lk)("div",Kl,[(0,l.Lk)("div",zl,[a[21]||(a[21]=(0,l.Lk)("h2",null,"用户列表",-1)),(0,l.Lk)("button",{class:"btn-add",onClick:a[0]||(a[0]=(...a)=>e.showAddModal&&e.showAddModal(...a))},"+ 添加用户")]),(0,l.Lk)("div",Xl,[(0,l.Lk)("table",null,[a[22]||(a[22]=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"用户ID"),(0,l.Lk)("th",null,"用户信息"),(0,l.Lk)("th",null,"用户名"),(0,l.Lk)("th",null,"邮箱"),(0,l.Lk)("th",null,"角色"),(0,l.Lk)("th",null,"状态"),(0,l.Lk)("th",null,"创建时间"),(0,l.Lk)("th",null,"操作")])],-1)),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.users,a=>((0,l.uX)(),(0,l.CE)("tr",{key:a.id},[(0,l.Lk)("td",null,(0,v.v_)(a.id),1),(0,l.Lk)("td",null,[(0,l.Lk)("div",Wl,[(0,l.Lk)("img",{src:a.avatar,alt:a.name,class:"avatar"},null,8,jl),(0,l.Lk)("span",null,(0,v.v_)(a.name),1)])]),(0,l.Lk)("td",null,(0,v.v_)(a.username),1),(0,l.Lk)("td",null,(0,v.v_)(a.email),1),(0,l.Lk)("td",null,[(0,l.Lk)("span",{class:(0,v.C4)(["role",a.role])},(0,v.v_)(a.roleText),3)]),(0,l.Lk)("td",null,[(0,l.Lk)("span",{class:(0,v.C4)(["status",a.status])},(0,v.v_)(a.statusText),3)]),(0,l.Lk)("td",null,(0,v.v_)(a.createTime),1),(0,l.Lk)("td",null,[(0,l.Lk)("div",Hl,[(0,l.Lk)("button",{class:"btn-edit",onClick:t=>e.showEditModal(a)},"编辑",8,ql),(0,l.Lk)("button",{class:"btn-delete",onClick:t=>e.showDeleteConfirm(a)},"删除",8,Jl)])])]))),128))])])])]),e.showModal?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"modal-overlay",onClick:a[12]||(a[12]=(...a)=>e.closeModal&&e.closeModal(...a))},[(0,l.Lk)("div",{class:"modal-content",onClick:a[11]||(a[11]=(0,s.D$)(()=>{},["stop"]))},[(0,l.Lk)("div",Vl,[(0,l.Lk)("h3",null,(0,v.v_)(e.isEditing?"编辑用户":"添加用户"),1),(0,l.Lk)("button",{class:"modal-close",onClick:a[1]||(a[1]=(...a)=>e.closeModal&&e.closeModal(...a))},"×")]),(0,l.Lk)("div",$l,[(0,l.Lk)("form",{onSubmit:a[8]||(a[8]=(0,s.D$)((...a)=>e.submitForm&&e.submitForm(...a),["prevent"]))},[(0,l.Lk)("div",Ql,[a[23]||(a[23]=(0,l.Lk)("label",null,"用户ID",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=a=>e.formData.id=a),disabled:e.isEditing,placeholder:"请输入用户ID"},null,8,Bl),[[s.Jo,e.formData.id]]),e.formErrors.id?((0,l.uX)(),(0,l.CE)("div",Gl,(0,v.v_)(e.formErrors.id),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",Yl,[a[24]||(a[24]=(0,l.Lk)("label",null,"姓名",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=a=>e.formData.name=a),placeholder:"请输入姓名"},null,512),[[s.Jo,e.formData.name]]),e.formErrors.name?((0,l.uX)(),(0,l.CE)("div",Zl,(0,v.v_)(e.formErrors.name),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",eo,[a[25]||(a[25]=(0,l.Lk)("label",null,"用户名",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":a[4]||(a[4]=a=>e.formData.username=a),placeholder:"请输入用户名"},null,512),[[s.Jo,e.formData.username]]),e.formErrors.username?((0,l.uX)(),(0,l.CE)("div",ao,(0,v.v_)(e.formErrors.username),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",to,[a[26]||(a[26]=(0,l.Lk)("label",null,"邮箱",-1)),(0,l.bo)((0,l.Lk)("input",{type:"email","onUpdate:modelValue":a[5]||(a[5]=a=>e.formData.email=a),placeholder:"请输入邮箱"},null,512),[[s.Jo,e.formData.email]]),e.formErrors.email?((0,l.uX)(),(0,l.CE)("div",so,(0,v.v_)(e.formErrors.email),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",lo,[a[28]||(a[28]=(0,l.Lk)("label",null,"角色",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[6]||(a[6]=a=>e.formData.role=a)},a[27]||(a[27]=[(0,l.Lk)("option",{value:""},"请选择角色",-1),(0,l.Lk)("option",{value:"admin"},"管理员",-1),(0,l.Lk)("option",{value:"employee"},"员工",-1)]),512),[[s.u1,e.formData.role]]),e.formErrors.role?((0,l.uX)(),(0,l.CE)("div",oo,(0,v.v_)(e.formErrors.role),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",io,[a[30]||(a[30]=(0,l.Lk)("label",null,"状态",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[7]||(a[7]=a=>e.formData.status=a)},a[29]||(a[29]=[(0,l.Lk)("option",{value:""},"请选择状态",-1),(0,l.Lk)("option",{value:"active"},"启用",-1),(0,l.Lk)("option",{value:"inactive"},"禁用",-1)]),512),[[s.u1,e.formData.status]]),e.formErrors.status?((0,l.uX)(),(0,l.CE)("div",no,(0,v.v_)(e.formErrors.status),1)):(0,l.Q3)("",!0)])],32)]),(0,l.Lk)("div",ro,[(0,l.Lk)("button",{type:"button",class:"btn-cancel",onClick:a[9]||(a[9]=(...a)=>e.closeModal&&e.closeModal(...a))},"取消"),(0,l.Lk)("button",{type:"button",class:"btn-submit",onClick:a[10]||(a[10]=(...a)=>e.submitForm&&e.submitForm(...a))},(0,v.v_)(e.isEditing?"更新":"添加"),1)])])])):(0,l.Q3)("",!0),e.showDeleteModal?((0,l.uX)(),(0,l.CE)("div",{key:1,class:"modal-overlay",onClick:a[17]||(a[17]=(...a)=>e.closeDeleteModal&&e.closeDeleteModal(...a))},[(0,l.Lk)("div",{class:"modal-content delete-modal",onClick:a[16]||(a[16]=(0,s.D$)(()=>{},["stop"]))},[(0,l.Lk)("div",co,[a[31]||(a[31]=(0,l.Lk)("h3",null,"确认删除",-1)),(0,l.Lk)("button",{class:"modal-close",onClick:a[13]||(a[13]=(...a)=>e.closeDeleteModal&&e.closeDeleteModal(...a))},"×")]),(0,l.Lk)("div",uo,[(0,l.Lk)("p",null,[a[32]||(a[32]=(0,l.eW)("确定要删除用户 ",-1)),(0,l.Lk)("strong",null,(0,v.v_)(e.userToDelete?.name),1),a[33]||(a[33]=(0,l.eW)(" 吗？",-1))]),a[34]||(a[34]=(0,l.Lk)("p",null,"此操作无法撤销。",-1))]),(0,l.Lk)("div",vo,[(0,l.Lk)("button",{type:"button",class:"btn-cancel",onClick:a[14]||(a[14]=(...a)=>e.closeDeleteModal&&e.closeDeleteModal(...a))},"取消"),(0,l.Lk)("button",{type:"button",class:"btn-delete-confirm",onClick:a[15]||(a[15]=(...a)=>e.confirmDelete&&e.confirmDelete(...a))},"确认删除")])])])):(0,l.Q3)("",!0)])}var mo=(0,l.pM)({name:"UserManagement",setup(){const e=(0,u.rd)(),a=(0,S.KR)({username:"",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=UserManagement1"}),t=(0,S.KR)([{id:"USR001",name:"张三",username:"zhangsan",email:"zhangsan@company.com",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=User1",role:"admin",roleText:"管理员",status:"active",statusText:"启用",createTime:"2024-01-15"},{id:"USR002",name:"李四",username:"lisi",email:"lisi@company.com",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=User2",role:"employee",roleText:"员工",status:"active",statusText:"启用",createTime:"2024-01-14"},{id:"USR003",name:"王五",username:"wangwu",email:"wangwu@company.com",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=User3",role:"employee",roleText:"员工",status:"inactive",statusText:"禁用",createTime:"2024-01-13"},{id:"USR004",name:"赵六",username:"zhaoliu",email:"zhaoliu@company.com",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=User4",role:"employee",roleText:"员工",status:"active",statusText:"启用",createTime:"2024-01-12"},{id:"USR005",name:"钱七",username:"qianqi",email:"qianqi@company.com",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=User5",role:"employee",roleText:"员工",status:"active",statusText:"启用",createTime:"2024-01-11"},{id:"USR006",name:"孙八",username:"sunba",email:"sunba@company.com",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=User6",role:"admin",roleText:"管理员",status:"active",statusText:"启用",createTime:"2024-01-10"},{id:"USR007",name:"周九",username:"zhoujiu",email:"zhoujiu@company.com",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=User7",role:"employee",roleText:"员工",status:"active",statusText:"启用",createTime:"2024-01-09"},{id:"USR008",name:"吴十",username:"wushi",email:"wushi@company.com",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=User8",role:"employee",roleText:"员工",status:"active",statusText:"启用",createTime:"2024-01-08"},{id:"USR009",name:"郑十一",username:"zhengshiyi",email:"zhengshiyi@company.com",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=User9",role:"admin",roleText:"管理员",status:"active",statusText:"启用",createTime:"2024-01-07"},{id:"USR010",name:"王十二",username:"wangshier",email:"wangshier@company.com",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=User10",role:"employee",roleText:"员工",status:"active",statusText:"启用",createTime:"2024-01-06"},{id:"USR011",name:"李十三",username:"lishisan",email:"lishisan@company.com",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=User11",role:"employee",roleText:"员工",status:"active",statusText:"启用",createTime:"2024-01-05"},{id:"USR012",name:"张十四",username:"zhangshisi",email:"zhangshisi@company.com",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=User12",role:"employee",roleText:"员工",status:"inactive",statusText:"禁用",createTime:"2024-01-04"},{id:"USR013",name:"刘十五",username:"liushiwu",email:"liushiwu@company.com",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=User13",role:"employee",roleText:"员工",status:"active",statusText:"启用",createTime:"2024-01-03"},{id:"USR014",name:"陈十六",username:"chenshiliu",email:"chenshiliu@company.com",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=User14",role:"employee",roleText:"员工",status:"active",statusText:"启用",createTime:"2024-01-02"},{id:"USR015",name:"杨十七",username:"yangshiqi",email:"yangshiqi@company.com",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=User15",role:"admin",roleText:"管理员",status:"active",statusText:"启用",createTime:"2024-01-01"},{id:"USR016",name:"黄十八",username:"huangshiba",email:"huangshiba@company.com",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=User16",role:"employee",roleText:"员工",status:"active",statusText:"启用",createTime:"2023-12-31"},{id:"USR017",name:"赵十九",username:"zhaoshijiu",email:"zhaoshijiu@company.com",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=User17",role:"employee",roleText:"员工",status:"active",statusText:"启用",createTime:"2023-12-30"},{id:"USR018",name:"吴二十",username:"wuershi",email:"wuershi@company.com",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=User18",role:"employee",roleText:"员工",status:"active",statusText:"启用",createTime:"2023-12-29"},{id:"USR019",name:"徐二一",username:"xuerer",email:"xuerer@company.com",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=User19",role:"employee",roleText:"员工",status:"inactive",statusText:"禁用",createTime:"2023-12-28"},{id:"USR020",name:"孙二二",username:"sunerr",email:"sunerr@company.com",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=User20",role:"employee",roleText:"员工",status:"active",statusText:"启用",createTime:"2023-12-27"},{id:"USR021",name:"马二三",username:"maersan",email:"maersan@company.com",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=User21",role:"employee",roleText:"员工",status:"active",statusText:"启用",createTime:"2023-12-26"},{id:"USR022",name:"朱二四",username:"zhuersi",email:"zhuersi@company.com",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=User22",role:"admin",roleText:"管理员",status:"active",statusText:"启用",createTime:"2023-12-25"},{id:"USR023",name:"胡二五",username:"huerwu",email:"huerwu@company.com",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=User23",role:"employee",roleText:"员工",status:"active",statusText:"启用",createTime:"2023-12-24"},{id:"USR024",name:"郭二六",username:"guoerliu",email:"guoerliu@company.com",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=User24",role:"employee",roleText:"员工",status:"active",statusText:"启用",createTime:"2023-12-23"},{id:"USR025",name:"何二七",username:"heerqi",email:"heerqi@company.com",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=User25",role:"employee",roleText:"员工",status:"active",statusText:"启用",createTime:"2023-12-22"},{id:"USR026",name:"高二八",username:"gaoerba",email:"gaoerba@company.com",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=User26",role:"employee",roleText:"员工",status:"active",statusText:"启用",createTime:"2023-12-21"},{id:"USR027",name:"林二九",username:"linerjiu",email:"linerjiu@company.com",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=User27",role:"admin",roleText:"管理员",status:"active",statusText:"启用",createTime:"2023-12-20"},{id:"USR028",name:"罗三十",username:"luosanshi",email:"luosanshi@company.com",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=User28",role:"employee",roleText:"员工",status:"active",statusText:"启用",createTime:"2023-12-19"},{id:"USR029",name:"梁三一",username:"liangsanyi",email:"liangsanyi@company.com",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=User29",role:"employee",roleText:"员工",status:"active",statusText:"启用",createTime:"2023-12-18"},{id:"USR030",name:"谢三二",username:"xiesaner",email:"xiesaner@company.com",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=User30",role:"employee",roleText:"员工",status:"active",statusText:"启用",createTime:"2023-12-17"}]),s=(0,S.KR)(!1),o=(0,S.KR)(!1),i=(0,S.KR)({id:"",name:"",username:"",email:"",role:"",status:"",avatar:""}),n=(0,S.KR)({id:"",name:"",username:"",email:"",role:"",status:""}),r=(0,S.KR)(!1),d=(0,S.KR)(null),c=()=>{e.push("/")},v=()=>{const e=localStorage.getItem("user");if(e)try{const s=JSON.parse(e),l=localStorage.getItem("savedUserInfo");if(l)try{const e=JSON.parse(l);a.value={...s,...e,username:e.username||s.username||"",avatar:e.avatar||a.value.avatar}}catch(t){console.error("解析保存的用户信息失败:",t),a.value={...s,username:s.username||"",avatar:a.value.avatar}}else a.value={...s,username:s.username||"",avatar:a.value.avatar}}catch(t){console.error("解析用户信息失败:",t)}},p=()=>{o.value=!1,i.value={id:"",name:"",username:"",email:"",role:"",status:"",avatar:""},n.value={id:"",name:"",username:"",email:"",role:"",status:""},s.value=!0},m=e=>{o.value=!0,i.value={...e,roleText:void 0,statusText:void 0},n.value={id:"",name:"",username:"",email:"",role:"",status:""},s.value=!0},k=()=>{s.value=!1},h=()=>{let e=!0;if(n.value={id:"",name:"",username:"",email:"",role:"",status:""},i.value.id||(n.value.id="用户ID不能为空",e=!1),i.value.name||(n.value.name="姓名不能为空",e=!1),i.value.username||(n.value.username="用户名不能为空",e=!1),i.value.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.value.email)||(n.value.email="邮箱格式不正确",e=!1):(n.value.email="邮箱不能为空",e=!1),i.value.role||(n.value.role="角色不能为空",e=!1),i.value.status||(n.value.status="状态不能为空",e=!1),!o.value||i.value.id!==t.value.find(e=>e.id===i.value.id)?.id){const a=t.value.find(e=>e.id===i.value.id);a&&(n.value.id="用户ID已存在",e=!1)}const a=t.value.find(e=>e.username===i.value.username&&(!o.value||e.id!==i.value.id));return a&&(n.value.username="用户名已存在",e=!1),e},b=()=>{if(h())if(o.value){const e=t.value.findIndex(e=>e.id===i.value.id);if(-1!==e){const a={...i.value,roleText:"admin"===i.value.role?"管理员":"员工",statusText:"active"===i.value.status?"启用":"禁用",avatar:i.value.avatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${i.value.id}`};t.value[e]=a,k(),alert("用户信息已更新")}}else{const e={...i.value,roleText:"admin"===i.value.role?"管理员":"员工",statusText:"active"===i.value.status?"启用":"禁用",avatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=${i.value.id}`,createTime:(new Date).toISOString().split("T")[0]};t.value.unshift(e),k(),alert("用户添加成功")}},g=e=>{d.value=e,r.value=!0},L=()=>{r.value=!1,d.value=null},f=()=>{if(d.value){const e=t.value.findIndex(e=>e.id===d.value.id);-1!==e?(t.value.splice(e,1),L(),alert("用户已删除")):alert("未找到该用户，无法删除")}},y=()=>{v()};return(0,l.sV)(()=>{v(),window.addEventListener("userInfoUpdated",y)}),(0,l.hi)(()=>{window.removeEventListener("userInfoUpdated",y)}),{userInfo:a,users:t,goHome:c,showModal:s,isEditing:o,formData:i,formErrors:n,showAddModal:p,showEditModal:m,closeModal:k,submitForm:b,validateForm:h,showDeleteConfirm:g,closeDeleteModal:L,confirmDelete:f,showDeleteModal:r,userToDelete:d}}});const ko=(0,r.A)(mo,[["render",po],["__scopeId","data-v-0f9e2541"]]);var ho=ko;const bo={class:"system-container"},go={class:"page-header"},Lo={class:"header-left"},fo={class:"title-section"},yo={class:"page-title"},xo={class:"header-right"},To={class:"user-info"},Ao={class:"system-overview"},wo={class:"status-card"},Co={class:"status-content"},Fo={class:"status-value"},_o={class:"status-card"},Eo={class:"status-content"},Io={class:"status-value"},So={class:"status-card"},Mo={class:"status-content"},Do={class:"status-value"},Uo={class:"monitoring-data"},Ro={class:"data-section"},Oo={class:"data-grid"},Po={class:"data-item"},No={class:"data-value"},Ko={class:"data-item"},zo={class:"data-value"},Xo={class:"data-item"},Wo={class:"data-value"},jo={class:"data-item"},Ho={class:"data-value"},qo={class:"system-logs"},Jo={class:"logs-header"},Vo={class:"logs-table"},$o={class:"user-info"},Qo=["src","alt"];function Bo(e,a,t,s,o,i){const n=(0,l.g2)("a-icon"),r=(0,l.g2)("a-avatar"),d=(0,l.g2)("a-button");return(0,l.uX)(),(0,l.CE)("div",bo,[(0,l.Lk)("div",go,[(0,l.Lk)("div",Lo,[(0,l.Lk)("div",fo,[(0,l.Lk)("h1",yo,[(0,l.bF)(n,{type:"dashboard",class:"title-icon"}),a[1]||(a[1]=(0,l.eW)(" 系统监控 ",-1))]),a[2]||(a[2]=(0,l.Lk)("p",{class:"page-subtitle"},"实时监控系统运行状态、性能指标和资源使用情况",-1))])]),(0,l.Lk)("div",xo,[(0,l.Lk)("div",To,[(0,l.bF)(r,{size:32,class:"user-avatar",src:e.userInfo.avatar},{default:(0,l.k6)(()=>[(0,l.bF)(n,{type:"user"})]),_:1},8,["src"]),(0,l.Lk)("span",null,"欢迎，"+(0,v.v_)(e.userInfo.username),1)]),(0,l.bF)(d,{type:"link",onClick:e.goHome,class:"home-btn"},{default:(0,l.k6)(()=>[(0,l.bF)(n,{type:"home"}),a[3]||(a[3]=(0,l.eW)(" 返回首页 ",-1))]),_:1,__:[3]},8,["onClick"])])]),(0,l.Lk)("div",Ao,[a[10]||(a[10]=(0,l.Fv)('<div class="status-card" data-v-8a904dee><div class="status-icon" data-v-8a904dee>🟢</div><div class="status-content" data-v-8a904dee><div class="status-title" data-v-8a904dee>系统状态</div><div class="status-value" data-v-8a904dee>正常运行</div></div></div>',1)),(0,l.Lk)("div",wo,[a[5]||(a[5]=(0,l.Lk)("div",{class:"status-icon"},"⚡",-1)),(0,l.Lk)("div",Co,[a[4]||(a[4]=(0,l.Lk)("div",{class:"status-title"},"CPU使用率",-1)),(0,l.Lk)("div",Fo,(0,v.v_)(e.systemStats.cpuUsage)+"%",1)])]),(0,l.Lk)("div",_o,[a[7]||(a[7]=(0,l.Lk)("div",{class:"status-icon"},"💾",-1)),(0,l.Lk)("div",Eo,[a[6]||(a[6]=(0,l.Lk)("div",{class:"status-title"},"内存使用率",-1)),(0,l.Lk)("div",Io,(0,v.v_)(e.systemStats.memoryUsage)+"%",1)])]),(0,l.Lk)("div",So,[a[9]||(a[9]=(0,l.Lk)("div",{class:"status-icon"},"💿",-1)),(0,l.Lk)("div",Mo,[a[8]||(a[8]=(0,l.Lk)("div",{class:"status-title"},"磁盘使用率",-1)),(0,l.Lk)("div",Do,(0,v.v_)(e.systemStats.diskUsage)+"%",1)])])]),(0,l.Lk)("div",Uo,[(0,l.Lk)("div",Ro,[a[15]||(a[15]=(0,l.Lk)("h2",null,"实时监控",-1)),(0,l.Lk)("div",Oo,[(0,l.Lk)("div",Po,[a[11]||(a[11]=(0,l.Lk)("div",{class:"data-label"},"在线用户",-1)),(0,l.Lk)("div",No,(0,v.v_)(e.systemStats.onlineUsers),1)]),(0,l.Lk)("div",Ko,[a[12]||(a[12]=(0,l.Lk)("div",{class:"data-label"},"活跃会话",-1)),(0,l.Lk)("div",zo,(0,v.v_)(e.systemStats.activeSessions),1)]),(0,l.Lk)("div",Xo,[a[13]||(a[13]=(0,l.Lk)("div",{class:"data-label"},"请求响应时间",-1)),(0,l.Lk)("div",Wo,(0,v.v_)(e.systemStats.responseTime)+"ms",1)]),(0,l.Lk)("div",jo,[a[14]||(a[14]=(0,l.Lk)("div",{class:"data-label"},"错误率",-1)),(0,l.Lk)("div",Ho,(0,v.v_)(e.systemStats.errorRate.toFixed(2))+"%",1)])])])]),(0,l.Lk)("div",qo,[(0,l.Lk)("div",Jo,[a[16]||(a[16]=(0,l.Lk)("h2",null,"系统日志",-1)),(0,l.Lk)("button",{class:"btn-refresh",onClick:a[0]||(a[0]=(...a)=>e.refreshLogs&&e.refreshLogs(...a))},"刷新")]),(0,l.Lk)("div",Vo,[(0,l.Lk)("table",null,[a[17]||(a[17]=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"时间"),(0,l.Lk)("th",null,"级别"),(0,l.Lk)("th",null,"模块"),(0,l.Lk)("th",null,"消息"),(0,l.Lk)("th",null,"用户")])],-1)),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.systemLogs,e=>((0,l.uX)(),(0,l.CE)("tr",{key:e.id},[(0,l.Lk)("td",null,(0,v.v_)(e.timestamp),1),(0,l.Lk)("td",null,[(0,l.Lk)("span",{class:(0,v.C4)(["log-level",e.level])},(0,v.v_)(e.levelText),3)]),(0,l.Lk)("td",null,(0,v.v_)(e.module),1),(0,l.Lk)("td",null,(0,v.v_)(e.message),1),(0,l.Lk)("td",null,[(0,l.Lk)("div",$o,[(0,l.Lk)("img",{src:e.userAvatar,alt:e.user,class:"avatar"},null,8,Qo),(0,l.Lk)("span",null,(0,v.v_)(e.user),1)])])]))),128))])])])])])}var Go=(0,l.pM)({name:"System",setup(){const e=(0,u.rd)(),a=(0,S.KR)({username:"",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=SystemUser1"}),t=(0,S.KR)({cpuUsage:45,memoryUsage:62,diskUsage:78,onlineUsers:142,activeSessions:89,responseTime:125,errorRate:.02}),s=(0,S.KR)([{id:"LOG001",timestamp:"2024-01-15 10:30:00",level:"info",levelText:"信息",module:"用户管理",message:"用户登录成功",user:"张三",userAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=SystemLog1"},{id:"LOG002",timestamp:"2024-01-15 10:25:00",level:"warning",levelText:"警告",module:"系统监控",message:"内存使用率超过80%",user:"李四",userAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=SystemLog2"},{id:"LOG003",timestamp:"2024-01-15 10:20:00",level:"error",levelText:"错误",module:"文件管理",message:"文件上传失败",user:"王五",userAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=SystemLog3"},{id:"LOG004",timestamp:"2024-01-15 10:15:00",level:"info",levelText:"信息",module:"考勤管理",message:"员工打卡记录同步完成",user:"赵六",userAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=SystemLog4"},{id:"LOG005",timestamp:"2024-01-15 10:10:00",level:"info",levelText:"信息",module:"审批流程",message:"请假申请审批通过",user:"钱七",userAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=SystemLog5"},{id:"LOG006",timestamp:"2024-01-15 10:05:00",level:"warning",levelText:"警告",module:"数据库",message:"数据库连接池使用率较高",user:"孙八",userAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=SystemLog6"},{id:"LOG007",timestamp:"2024-01-15 10:00:00",level:"info",levelText:"信息",module:"公告管理",message:"新公告发布成功",user:"周九",userAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=SystemLog7"},{id:"LOG008",timestamp:"2024-01-15 09:55:00",level:"error",levelText:"错误",module:"邮件服务",message:"邮件发送失败",user:"吴十",userAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=SystemLog8"},{id:"LOG009",timestamp:"2024-01-15 09:50:00",level:"info",levelText:"信息",module:"权限管理",message:"角色权限更新完成",user:"郑十一",userAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=SystemLog9"},{id:"LOG010",timestamp:"2024-01-15 09:45:00",level:"info",levelText:"信息",module:"系统备份",message:"系统数据备份完成",user:"王十二",userAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=SystemLog10"},{id:"LOG011",timestamp:"2024-01-15 09:40:00",level:"warning",levelText:"警告",module:"网络监控",message:"网络延迟异常",user:"李十三",userAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=SystemLog11"},{id:"LOG012",timestamp:"2024-01-15 09:35:00",level:"info",levelText:"信息",module:"用户管理",message:"新用户注册成功",user:"张十四",userAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=SystemLog12"},{id:"LOG013",timestamp:"2024-01-15 09:30:00",level:"info",levelText:"信息",module:"文件管理",message:"文件下载完成",user:"刘十五",userAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=SystemLog13"},{id:"LOG014",timestamp:"2024-01-15 09:25:00",level:"error",levelText:"错误",module:"审批流程",message:"审批流程异常终止",user:"陈十六",userAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=SystemLog14"},{id:"LOG015",timestamp:"2024-01-15 09:20:00",level:"info",levelText:"信息",module:"考勤管理",message:"考勤数据统计完成",user:"杨十七",userAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=SystemLog15"},{id:"LOG016",timestamp:"2024-01-15 09:15:00",level:"warning",levelText:"警告",module:"系统监控",message:"CPU使用率异常波动",user:"黄十八",userAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=SystemLog16"},{id:"LOG017",timestamp:"2024-01-15 09:10:00",level:"info",levelText:"信息",module:"公告管理",message:"公告阅读统计更新",user:"赵十九",userAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=SystemLog17"},{id:"LOG018",timestamp:"2024-01-15 09:05:00",level:"info",levelText:"信息",module:"权限管理",message:"用户权限验证通过",user:"吴二十",userAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=SystemLog18"},{id:"LOG019",timestamp:"2024-01-15 09:00:00",level:"error",levelText:"错误",module:"数据库",message:"数据库查询超时",user:"徐二一",userAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=SystemLog19"},{id:"LOG020",timestamp:"2024-01-15 08:55:00",level:"info",levelText:"信息",module:"系统维护",message:"系统维护任务完成",user:"孙二二",userAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=SystemLog20"},{id:"LOG021",timestamp:"2024-01-15 08:50:00",level:"info",levelText:"信息",module:"用户管理",message:"用户信息更新成功",user:"马二三",userAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=SystemLog21"},{id:"LOG022",timestamp:"2024-01-15 08:45:00",level:"warning",levelText:"警告",module:"网络监控",message:"网络流量异常",user:"朱二四",userAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=SystemLog22"},{id:"LOG023",timestamp:"2024-01-15 08:40:00",level:"info",levelText:"信息",module:"文件管理",message:"文件压缩完成",user:"胡二五",userAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=SystemLog23"},{id:"LOG024",timestamp:"2024-01-15 08:35:00",level:"info",levelText:"信息",module:"审批流程",message:"审批流程启动成功",user:"郭二六",userAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=SystemLog24"},{id:"LOG025",timestamp:"2024-01-15 08:30:00",level:"error",levelText:"错误",module:"邮件服务",message:"邮件模板加载失败",user:"何二七",userAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=SystemLog25"},{id:"LOG026",timestamp:"2024-01-15 08:25:00",level:"info",levelText:"信息",module:"考勤管理",message:"考勤规则更新完成",user:"高二八",userAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=SystemLog26"},{id:"LOG027",timestamp:"2024-01-15 08:20:00",level:"info",levelText:"信息",module:"系统监控",message:"系统性能检测完成",user:"林二九",userAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=SystemLog27"},{id:"LOG028",timestamp:"2024-01-15 08:15:00",level:"warning",levelText:"警告",module:"数据库",message:"数据库索引重建建议",user:"罗三十",userAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=SystemLog28"},{id:"LOG029",timestamp:"2024-01-15 08:10:00",level:"info",levelText:"信息",module:"公告管理",message:"公告分类更新完成",user:"梁三一",userAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=SystemLog29"},{id:"LOG030",timestamp:"2024-01-15 08:05:00",level:"info",levelText:"信息",module:"权限管理",message:"权限组配置完成",user:"谢三二",userAvatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=SystemLog30"}]),o=()=>{e.push("/")},i=()=>{t.value.cpuUsage=Math.floor(31*Math.random())+35,t.value.memoryUsage=Math.floor(31*Math.random())+50,t.value.diskUsage=Math.floor(16*Math.random())+70,t.value.onlineUsers=Math.floor(61*Math.random())+120,t.value.activeSessions=Math.floor(41*Math.random())+70,t.value.responseTime=Math.floor(121*Math.random())+80,t.value.errorRate=parseFloat((.1*Math.random()).toFixed(2))};let n=null;const r=()=>{n=setInterval(i,3e3)},d=()=>{n&&(clearInterval(n),n=null)},c=()=>{const e=["用户管理","系统监控","文件管理","考勤管理","审批流程","公告管理","权限管理","数据库","邮件服务","网络监控","系统维护"],a=["info","warning","error"],t=["信息","警告","错误"],l=["张三","李四","王五","赵六","钱七","孙八","周九","吴十","郑十一","王十二","李十三","张十四","刘十五","陈十六","杨十七","黄十八","赵十九","吴二十","徐二一","孙二二","马二三","朱二四","胡二五","郭二六","何二七","高二八","林二九","罗三十","梁三一","谢三二"],o=["用户登录成功","内存使用率超过80%","文件上传失败","员工打卡记录同步完成","请假申请审批通过","数据库连接池使用率较高","新公告发布成功","邮件发送失败","角色权限更新完成","系统数据备份完成","网络延迟异常","新用户注册成功","文件下载完成","审批流程异常终止","考勤数据统计完成","CPU使用率异常波动","公告阅读统计更新","用户权限验证通过","数据库查询超时","系统维护任务完成","用户信息更新成功","网络流量异常","文件压缩完成","审批流程启动成功","邮件模板加载失败","考勤规则更新完成","系统性能检测完成","数据库索引重建建议","公告分类更新完成","权限组配置完成"],i=[],n=new Date;for(let s=0;s<30;s++){const r=e[Math.floor(Math.random()*e.length)],d=Math.floor(Math.random()*a.length),c=l[Math.floor(Math.random()*l.length)],u=o[Math.floor(Math.random()*o.length)],v=new Date(n.getTime()-24*Math.random()*60*60*1e3),p=v.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"});i.push({id:`LOG${String(s+1).padStart(3,"0")}`,timestamp:p,level:a[d],levelText:t[d],module:r,message:u,user:c,userAvatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=SystemLog${s+1}`})}i.sort((e,a)=>new Date(a.timestamp)-new Date(e.timestamp)),s.value=i},v=()=>{const e=localStorage.getItem("user");if(e)try{const s=JSON.parse(e),l=localStorage.getItem("savedUserInfo");if(l)try{const e=JSON.parse(l);a.value={...s,...e,username:e.username||s.username||"",avatar:e.avatar||a.value.avatar}}catch(t){console.error("解析保存的用户信息失败:",t),a.value={...s,username:s.username||"",avatar:a.value.avatar}}else a.value={...s,username:s.username||"",avatar:a.value.avatar}}catch(t){console.error("解析用户信息失败:",t)}},p=()=>{v()};return(0,l.sV)(()=>{v(),r(),window.addEventListener("userInfoUpdated",p)}),(0,l.hi)(()=>{d(),window.removeEventListener("userInfoUpdated",p)}),{userInfo:a,systemStats:t,systemLogs:s,goHome:o,refreshLogs:c}}});const Yo=(0,r.A)(Go,[["render",Bo],["__scopeId","data-v-8a904dee"]]);var Zo=Yo;const ei={class:"profile-container"},ai={class:"page-header"},ti={class:"header-left"},si={class:"title-section"},li={class:"page-title"},oi={class:"header-right"},ii={class:"user-info"},ni={class:"profile-content"},ri={class:"profile-card"},di={class:"profile-header"},ci={class:"avatar-section"},ui={class:"avatar-container"},vi={class:"avatar-overlay"},pi={class:"default-avatars"},mi={class:"avatar-grid"},ki=["onClick"],hi={class:"user-details"},bi={class:"profile-actions"};function gi(e,a,t,s,o,i){const n=(0,l.g2)("a-icon"),r=(0,l.g2)("a-avatar"),d=(0,l.g2)("a-button"),c=(0,l.g2)("a-upload"),u=(0,l.g2)("a-input"),p=(0,l.g2)("a-form-item"),m=(0,l.g2)("a-textarea"),k=(0,l.g2)("a-form");return(0,l.uX)(),(0,l.CE)("div",ei,[(0,l.Lk)("div",ai,[(0,l.Lk)("div",ti,[(0,l.Lk)("div",si,[(0,l.Lk)("h1",li,[(0,l.bF)(n,{type:"user",class:"title-icon"}),a[4]||(a[4]=(0,l.eW)(" 个人信息管理 ",-1))]),a[5]||(a[5]=(0,l.Lk)("p",{class:"page-subtitle"},"管理您的个人资料、头像和基本信息",-1))])]),(0,l.Lk)("div",oi,[(0,l.Lk)("div",ii,[(0,l.bF)(r,{size:32,class:"user-avatar",src:e.headerUserInfo.avatar},{default:(0,l.k6)(()=>[(0,l.bF)(n,{type:"user"})]),_:1},8,["src"]),(0,l.Lk)("span",null,"欢迎，"+(0,v.v_)(e.headerUserInfo.username),1)]),(0,l.bF)(d,{type:"link",onClick:e.goHome,class:"home-btn"},{default:(0,l.k6)(()=>[(0,l.bF)(n,{type:"home"}),a[6]||(a[6]=(0,l.eW)(" 返回首页 ",-1))]),_:1,__:[6]},8,["onClick"])])]),(0,l.Lk)("div",ni,[(0,l.Lk)("div",ri,[(0,l.Lk)("div",di,[(0,l.Lk)("div",ci,[(0,l.Lk)("div",ui,[(0,l.bF)(r,{size:120,src:e.userInfo.avatar||e.defaultAvatar,class:"user-avatar"},null,8,["src"]),(0,l.Lk)("div",vi,[(0,l.bF)(c,{name:"avatar","show-upload-list":!1,"before-upload":e.beforeAvatarUpload,onChange:e.handleAvatarChange,customRequest:()=>{}},{default:(0,l.k6)(()=>[(0,l.bF)(d,{type:"primary",size:"small"},{default:(0,l.k6)(()=>[(0,l.bF)(n,{type:"camera"}),a[7]||(a[7]=(0,l.eW)(" 更换头像 ",-1))]),_:1,__:[7]})]),_:1},8,["before-upload","onChange"])])]),(0,l.Lk)("div",pi,[a[8]||(a[8]=(0,l.Lk)("h4",null,"选择默认头像",-1)),(0,l.Lk)("div",mi,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.defaultAvatars,(a,t)=>((0,l.uX)(),(0,l.CE)("div",{key:t,class:(0,v.C4)(["default-avatar-item",{active:e.userInfo.avatar===a}]),onClick:t=>e.selectDefaultAvatar(a)},[(0,l.bF)(r,{size:50,src:a},null,8,["src"])],10,ki))),128))])])]),(0,l.Lk)("div",hi,[(0,l.bF)(k,{model:e.userInfo,"label-col":{span:6},"wrapper-col":{span:18},layout:"horizontal"},{default:(0,l.k6)(()=>[(0,l.bF)(p,{label:"用户名"},{default:(0,l.k6)(()=>[(0,l.bF)(u,{value:e.userInfo.username,"onUpdate:value":a[0]||(a[0]=a=>e.userInfo.username=a),placeholder:"请输入用户名"},null,8,["value"])]),_:1}),(0,l.bF)(p,{label:"部门"},{default:(0,l.k6)(()=>[(0,l.bF)(u,{value:e.userInfo.department,"onUpdate:value":a[1]||(a[1]=a=>e.userInfo.department=a),placeholder:"请输入部门名称"},null,8,["value"])]),_:1}),(0,l.bF)(p,{label:"职位"},{default:(0,l.k6)(()=>[(0,l.bF)(u,{value:e.userInfo.position,"onUpdate:value":a[2]||(a[2]=a=>e.userInfo.position=a),placeholder:"请输入职位名称"},null,8,["value"])]),_:1}),(0,l.bF)(p,{label:"个人简介"},{default:(0,l.k6)(()=>[(0,l.bF)(m,{value:e.userInfo.bio,"onUpdate:value":a[3]||(a[3]=a=>e.userInfo.bio=a),rows:4,placeholder:"请输入个人简介"},null,8,["value"])]),_:1})]),_:1},8,["model"])])]),(0,l.Lk)("div",bi,[(0,l.bF)(d,{type:"primary",onClick:e.saveProfile,loading:e.saving},{default:(0,l.k6)(()=>[(0,l.bF)(n,{type:"save"}),a[9]||(a[9]=(0,l.eW)(" 保存信息 ",-1))]),_:1,__:[9]},8,["onClick","loading"]),(0,l.bF)(d,{onClick:e.resetProfile,class:"btn-reset"},{default:(0,l.k6)(()=>[(0,l.bF)(n,{type:"undo"}),a[10]||(a[10]=(0,l.eW)(" 重置 ",-1))]),_:1,__:[10]},8,["onClick"])])])])])}var Li=(0,l.pM)({name:"Profile",setup(){const e=(0,u.rd)(),a=(0,S.Kh)({username:"",avatar:""}),t=(0,S.Kh)({username:"",department:"",position:"",bio:"",avatar:""}),s=["https://api.dicebear.com/7.x/avataaars/svg?seed=user1","https://api.dicebear.com/7.x/avataaars/svg?seed=user2","https://api.dicebear.com/7.x/avataaars/svg?seed=user3","https://api.dicebear.com/7.x/avataaars/svg?seed=user4","https://api.dicebear.com/7.x/avataaars/svg?seed=user5","https://api.dicebear.com/7.x/avataaars/svg?seed=user6"],o=s[0],i=(0,S.KR)(!1),n=()=>{try{const s=localStorage.getItem("token");if(s){const s=localStorage.getItem("savedUserInfo");if(s)try{const e=JSON.parse(s);t.username=e.username||"",t.department=e.department||"",t.position=e.position||"",t.bio=e.bio||"",t.avatar=e.avatar||o,a.username=e.username||"",a.avatar=e.avatar||o,console.log("已加载保存的个人信息:",t)}catch(e){console.error("解析保存的用户信息失败:",e)}else{const s=localStorage.getItem("user");if(s)try{const e=JSON.parse(s);t.username=e.username||localStorage.getItem("username")||"user",t.department=e.department||"",t.position=e.position||"",t.bio=e.bio||"",t.avatar=e.avatar||o,a.username=e.username||localStorage.getItem("username")||"user",a.avatar=e.avatar||o,console.log("已加载当前用户信息:",t)}catch(e){console.error("解析当前用户信息失败:",e)}}}}catch(e){console.error("加载用户信息失败:",e)}},r=async()=>{i.value=!0;try{await new Promise(e=>setTimeout(e,1e3));const e={username:t.username,department:t.department,position:t.position,bio:t.bio,avatar:t.avatar};localStorage.setItem("savedUserInfo",JSON.stringify(e)),a.username=t.username,a.avatar=t.avatar,window.dispatchEvent(new CustomEvent("userInfoUpdated",{detail:e})),M.Ay.success("个人信息保存成功！")}catch(e){M.Ay.error("保存失败，请重试"),console.error("保存错误:",e)}finally{i.value=!1}},d=()=>{n(),M.Ay.info("个人信息已重置")},c=e=>{t.avatar=e,M.Ay.success("头像已更新")},v=e=>{const a="image/jpeg"===e.type||"image/png"===e.type;if(!a)return M.Ay.error("只能上传 JPG/PNG 格式的图片!"),!1;const t=e.size/1024/1024<2;return!!t||(M.Ay.error("图片大小不能超过 2MB!"),!1)},p=e=>{"done"===e.file.status?M.Ay.success("头像上传成功"):"error"===e.file.status&&M.Ay.error("头像上传失败")},m=()=>{e.push("/")};return(0,l.sV)(()=>{n()}),{userInfo:t,headerUserInfo:a,defaultAvatars:s,defaultAvatar:o,saving:i,saveProfile:r,resetProfile:d,selectDefaultAvatar:c,beforeAvatarUpload:v,handleAvatarChange:p,goHome:m}}});const fi=(0,r.A)(Li,[["render",gi],["__scopeId","data-v-e9b00820"]]);var yi=fi,xi=t(1373),Ti=t(892),Ai=t(3390),wi=t(389);const Ci={class:"page-header"},Fi={class:"header-left"},_i={class:"title-section"},Ei={class:"page-title"},Ii={class:"page-subtitle"},Si={class:"header-right"},Mi={class:"user-info"};function Di(e,a,t,s,o,i){const n=(0,l.g2)("a-icon"),r=(0,l.g2)("UserOutlined"),d=(0,l.g2)("a-avatar"),c=(0,l.g2)("a-modal");return(0,l.uX)(),(0,l.CE)("div",Ci,[(0,l.Lk)("div",Fi,[(0,l.Lk)("div",_i,[(0,l.Lk)("h1",Ei,[(0,l.bF)(n,{type:e.iconType,class:"title-icon"},null,8,["type"]),(0,l.eW)(" "+(0,v.v_)(e.title),1)]),(0,l.Lk)("p",Ii,(0,v.v_)(e.subtitle),1)])]),(0,l.Lk)("div",Si,[(0,l.Lk)("div",Mi,[(0,l.Lk)("span",null,"欢迎, "+(0,v.v_)(e.headerUserInfo.username||e.userInfo.username||"用户"),1),(0,l.bF)(d,{src:e.headerUserInfo.avatar||e.userInfo.avatar,class:"user-avatar",size:"small"},{icon:(0,l.k6)(()=>[(0,l.bF)(r)]),_:1},8,["src"])]),(0,l.Lk)("button",{class:"home-btn",onClick:a[0]||(a[0]=(...a)=>e.goHome&&e.goHome(...a))}," 返回首页 "),(0,l.Lk)("button",{class:"logout-btn",onClick:a[1]||(a[1]=(...a)=>e.handleLogout&&e.handleLogout(...a))}," 退出登录 ")]),(0,l.bF)(c,{visible:e.showLogoutConfirm,"onUpdate:visible":a[2]||(a[2]=a=>e.showLogoutConfirm=a),title:"确认退出登录","confirm-loading":e.loggingOut,onOk:e.confirmLogout,onCancel:a[3]||(a[3]=a=>e.showLogoutConfirm=!1),"ok-text":"确认退出","cancel-text":"取消"},{default:(0,l.k6)(()=>a[4]||(a[4]=[(0,l.Lk)("p",null,"您确定要退出登录吗？退出后需要重新登录才能访问系统。",-1)])),_:1,__:[4]},8,["visible","confirm-loading","onOk"])])}var Ui=(0,l.pM)({name:"CommonHeader",components:{UserOutlined:xi.A},props:{title:{type:String,required:!0},subtitle:{type:String,default:""},iconType:{type:String,default:"setting"},isUserSide:{type:Boolean,default:!1}},setup(e){const a=(0,u.rd)(),t=(0,u.lq)(),s=(0,l.WQ)("userInfo",{username:"",avatar:""}),o=(0,S.KR)({username:"",avatar:""}),i=()=>{try{const e=localStorage.getItem("recentRegisteredUser");if(e){const a=JSON.parse(e);return void(o.value={username:a.username||"",avatar:a.avatar||""})}const a=localStorage.getItem("savedUserInfo");if(a){const e=JSON.parse(a);return void(o.value={username:e.username||"",avatar:e.avatar||""})}const t=localStorage.getItem("user");if(t){const e=JSON.parse(t);o.value={username:e.username||"",avatar:e.avatar||""}}}catch(e){}},n=e=>{const a=e&&e.detail?e.detail:null;a?o.value={username:a.username||o.value.username,avatar:a.avatar||o.value.avatar}:i()},r=(0,S.KR)(!1),d=(0,S.KR)(!1),c=()=>{console.log("CommonHeader - isUserSide prop:",e.isUserSide),console.log("CommonHeader - 当前路径:",t.path),e.isUserSide?(console.log("CommonHeader - 跳转到用户端首页: /user"),a.push("/user")):(console.log("CommonHeader - 跳转到管理端首页: /"),a.push("/"))},v=()=>{r.value=!0},p=async()=>{d.value=!0;try{localStorage.removeItem("user"),localStorage.removeItem("username"),localStorage.removeItem("token"),localStorage.removeItem("savedUserInfo"),e.isUserSide?a.push("/login?system=user"):a.push("/login?system=admin"),M.Ay.success("退出登录成功")}catch(t){console.error("退出登录失败:",t),M.Ay.error("退出登录失败，请重试")}finally{d.value=!1,r.value=!1}};return(0,l.sV)(()=>{i(),window.addEventListener("userInfoUpdated",n)}),(0,l.hi)(()=>{window.removeEventListener("userInfoUpdated",n)}),{userInfo:s,headerUserInfo:o,goHome:c,showLogoutConfirm:r,loggingOut:d,handleLogout:v,confirmLogout:p}}});const Ri=(0,r.A)(Ui,[["render",Di],["__scopeId","data-v-414014ba"]]);var Oi=Ri;const Pi={class:"navigation-container"},Ni={class:"nav-header"},Ki={class:"nav-menu"},zi=["onClick"],Xi={class:"nav-text"};function Wi(e,a,t,s,o,i){const n=(0,l.g2)("a-icon");return(0,l.uX)(),(0,l.CE)("div",Pi,[(0,l.Lk)("div",Ni,[(0,l.Lk)("h3",null,(0,v.v_)(e.isAdmin?"管理端导航":"用户端导航"),1)]),(0,l.Lk)("div",Ki,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.navigationItems,a=>((0,l.uX)(),(0,l.CE)("div",{key:a.path,class:(0,v.C4)(["nav-item",{active:e.currentPath===a.path}]),onClick:t=>e.navigateTo(a.path)},[(0,l.bF)(n,{type:a.icon,class:"nav-icon"},null,8,["type"]),(0,l.Lk)("span",Xi,(0,v.v_)(a.title),1)],10,zi))),128))])])}var ji=(0,l.pM)({name:"CommonNavigation",props:{isAdmin:{type:Boolean,default:!1}},setup(e){const a=(0,u.rd)(),t=(0,u.lq)(),s=(0,l.EW)(()=>t.path),o=[{path:"/admin/employee",title:"员工管理",icon:"team"},{path:"/admin/user-management",title:"用户管理",icon:"user"},{path:"/admin/file-manager",title:"文件管理",icon:"folder"},{path:"/admin/approval",title:"审批管理",icon:"check-circle"},{path:"/admin/attendance",title:"考勤管理",icon:"clock-circle"},{path:"/admin/announcement",title:"公告管理",icon:"sound"},{path:"/admin/system",title:"系统监控",icon:"dashboard"}],i=[{path:"/user",title:"用户主页",icon:"home"},{path:"/user/workbench",title:"我的工作台",icon:"dashboard"},{path:"/user/profile",title:"个人信息",icon:"user"},{path:"/user/approval",title:"我的审批",icon:"check-circle"},{path:"/user/attendance",title:"我的考勤",icon:"clock-circle"},{path:"/user/files",title:"我的文件",icon:"folder"},{path:"/user/announcement",title:"我的公告",icon:"sound"},{path:"/user/data-manager",title:"数据管理",icon:"database"}],n=(0,l.EW)(()=>e.isAdmin?o:i),r=e=>{a.push(e)};return{currentPath:s,navigationItems:n,navigateTo:r}}});const Hi=(0,r.A)(ji,[["render",Wi],["__scopeId","data-v-588ee81e"]]);var qi=Hi;const Ji={class:"user-profile-container"},Vi={class:"user-profile-content"},$i={class:"main-content"},Qi={class:"profile-section"},Bi={class:"profile-content"},Gi={class:"avatar-section"},Yi={class:"avatar-container"},Zi={class:"avatar-overlay"},en={class:"avatar-info"},an={class:"profile-form"},tn={class:"form-row"},sn={class:"form-row"},ln={class:"form-actions"},on={class:"account-info-section"},nn={class:"info-cards"},rn={class:"info-card"},dn={class:"info-content"},cn={class:"info-value"},un={class:"info-card"},vn={class:"info-content"},pn={class:"info-value"},mn={class:"info-card"},kn={class:"info-content"},hn={class:"info-value"},bn={class:"info-card"},gn={class:"info-content"},Ln={class:"info-value"},fn="https://gw.alipayobjects.com/zos/antfincdn/XAosXuNZyF/BiazfanxmamNRoxxVxka.png";var yn={__name:"UserProfile",setup(e){const a=(0,S.KR)(!1),t=(0,S.KR)([]),s=(0,S.Kh)({username:"",department:"",position:"",employeeId:"",bio:"",avatar:""}),o=(0,S.Kh)({email:"",phone:"",company:"智能OA系统",registerTime:new Date}),i=()=>{try{const e=localStorage.getItem("token");if(e){const e=localStorage.getItem("savedUserInfo");if(e){const a=JSON.parse(e);s.username=a.username||"",s.department=a.department||"",s.position=a.position||"",s.bio=a.bio||"",s.avatar=a.avatar||fn,s.employeeId=a.employeeId||"EMP001",console.log("已加载保存的个人信息:",s)}else{const e=localStorage.getItem("user");if(e){const a=JSON.parse(e);s.username=a.username||localStorage.getItem("username")||"user",s.department=a.department||"",s.position=a.position||"",s.bio=a.bio||"",s.avatar=a.avatar||fn,s.employeeId=a.employeeId||"EMP001",console.log("已加载当前用户信息:",s)}}o.email=localStorage.getItem("userEmail")||"",o.phone=localStorage.getItem("userPhone")||"",o.registerTime=new Date(localStorage.getItem("registerTime")||Date.now())}}catch(e){console.error("加载用户信息失败:",e)}},n=e=>{const a="image/jpeg"===e.type||"image/png"===e.type;if(!a)return M.Ay.error("只能上传 JPG/PNG 格式的图片!"),!1;const t=e.size/1024/1024<2;return!!t||(M.Ay.error("图片大小不能超过 2MB!"),!1)},r=async()=>{if(s.username.trim()){a.value=!0;try{await new Promise(e=>setTimeout(e,1e3));const e={username:s.username,department:s.department,position:s.position,employeeId:s.employeeId,bio:s.bio,avatar:s.avatar};localStorage.setItem("savedUserInfo",JSON.stringify(e)),window.dispatchEvent(new CustomEvent("userInfoUpdated",{detail:e})),M.Ay.success("个人信息保存成功！")}catch(e){M.Ay.error("保存失败，请重试"),console.error("保存错误:",e)}finally{a.value=!1}}else M.Ay.warning("请输入用户名")},d=()=>{i(),M.Ay.info("表单已重置")},c=e=>e?new Date(e).toLocaleDateString("zh-CN"):"未知";return(0,l.sV)(()=>{i()}),(0,l.hi)(()=>{}),(e,i)=>{const u=(0,l.g2)("a-avatar"),p=(0,l.g2)("a-button"),m=(0,l.g2)("a-upload"),k=(0,l.g2)("a-input"),h=(0,l.g2)("a-form-item"),b=(0,l.g2)("a-textarea"),g=(0,l.g2)("a-form");return(0,l.uX)(),(0,l.CE)("div",Ji,[(0,l.bF)(Oi,{title:"个人信息",subtitle:"管理您的个人资料",iconType:"user",isUserSide:!0}),(0,l.Lk)("div",Vi,[(0,l.bF)(qi,{isAdmin:!1}),(0,l.Lk)("div",$i,[(0,l.Lk)("div",Qi,[i[9]||(i[9]=(0,l.Lk)("div",{class:"profile-header"},[(0,l.Lk)("h2",null,"个人资料"),(0,l.Lk)("p",null,"管理您的个人信息和账户设置")],-1)),(0,l.Lk)("div",Bi,[(0,l.Lk)("div",Gi,[(0,l.Lk)("div",Yi,[(0,l.bF)(u,{size:140,src:s.avatar,class:"profile-avatar"},{icon:(0,l.k6)(()=>[(0,l.bF)((0,S.R1)(xi.A))]),_:1},8,["src"]),(0,l.Lk)("div",Zi,[(0,l.bF)(m,{"file-list":t.value,"onUpdate:fileList":i[0]||(i[0]=e=>t.value=e),"before-upload":n,"show-upload-list":!1,accept:"image/*"},{default:(0,l.k6)(()=>[(0,l.bF)(p,{type:"primary",size:"small"},{icon:(0,l.k6)(()=>[(0,l.bF)((0,S.R1)(Ti.A))]),default:(0,l.k6)(()=>[i[6]||(i[6]=(0,l.eW)(" 更换头像 ",-1))]),_:1,__:[6]})]),_:1},8,["file-list"])])]),(0,l.Lk)("div",en,[(0,l.Lk)("h3",null,(0,v.v_)(s.username||"用户名"),1),(0,l.Lk)("p",null,(0,v.v_)(s.department||"部门")+" · "+(0,v.v_)(s.position||"职位"),1)])]),(0,l.Lk)("div",an,[(0,l.bF)(g,{model:s,layout:"vertical","label-col":{span:24},"wrapper-col":{span:24}},{default:(0,l.k6)(()=>[(0,l.Lk)("div",tn,[(0,l.bF)(h,{label:"用户名",name:"username",class:"form-item"},{default:(0,l.k6)(()=>[(0,l.bF)(k,{value:s.username,"onUpdate:value":i[1]||(i[1]=e=>s.username=e),placeholder:"请输入用户名",size:"large",class:"form-input"},null,8,["value"])]),_:1}),(0,l.bF)(h,{label:"部门",name:"department",class:"form-item"},{default:(0,l.k6)(()=>[(0,l.bF)(k,{value:s.department,"onUpdate:value":i[2]||(i[2]=e=>s.department=e),placeholder:"请输入部门",size:"large",class:"form-input"},null,8,["value"])]),_:1})]),(0,l.Lk)("div",sn,[(0,l.bF)(h,{label:"职位",name:"position",class:"form-item"},{default:(0,l.k6)(()=>[(0,l.bF)(k,{value:s.position,"onUpdate:value":i[3]||(i[3]=e=>s.position=e),placeholder:"请输入职位",size:"large",class:"form-input"},null,8,["value"])]),_:1}),(0,l.bF)(h,{label:"工号",name:"employeeId",class:"form-item"},{default:(0,l.k6)(()=>[(0,l.bF)(k,{value:s.employeeId,"onUpdate:value":i[4]||(i[4]=e=>s.employeeId=e),placeholder:"请输入工号",size:"large",disabled:"",class:"form-input"},null,8,["value"])]),_:1})]),(0,l.bF)(h,{label:"个人简介",name:"bio",class:"form-item-full"},{default:(0,l.k6)(()=>[(0,l.bF)(b,{value:s.bio,"onUpdate:value":i[5]||(i[5]=e=>s.bio=e),placeholder:"请输入个人简介",rows:4,size:"large",class:"form-textarea"},null,8,["value"])]),_:1})]),_:1},8,["model"]),(0,l.Lk)("div",ln,[(0,l.bF)(p,{type:"primary",size:"large",onClick:r,loading:a.value,class:"save-btn"},{icon:(0,l.k6)(()=>[(0,l.bF)((0,S.R1)(Ai.A))]),default:(0,l.k6)(()=>[i[7]||(i[7]=(0,l.eW)(" 保存信息 ",-1))]),_:1,__:[7]},8,["loading"]),(0,l.bF)(p,{size:"large",onClick:d,class:"reset-btn"},{icon:(0,l.k6)(()=>[(0,l.bF)((0,S.R1)(wi.A))]),default:(0,l.k6)(()=>[i[8]||(i[8]=(0,l.eW)(" 重置 ",-1))]),_:1,__:[8]})])])])]),(0,l.Lk)("div",on,[i[18]||(i[18]=(0,l.Lk)("h3",null,"账户信息",-1)),(0,l.Lk)("div",nn,[(0,l.Lk)("div",rn,[i[11]||(i[11]=(0,l.Lk)("div",{class:"info-icon"},"📧",-1)),(0,l.Lk)("div",dn,[i[10]||(i[10]=(0,l.Lk)("div",{class:"info-label"},"邮箱",-1)),(0,l.Lk)("div",cn,(0,v.v_)(o.email||"未设置"),1)])]),(0,l.Lk)("div",un,[i[13]||(i[13]=(0,l.Lk)("div",{class:"info-icon"},"📱",-1)),(0,l.Lk)("div",vn,[i[12]||(i[12]=(0,l.Lk)("div",{class:"info-label"},"手机号",-1)),(0,l.Lk)("div",pn,(0,v.v_)(o.phone||"未设置"),1)])]),(0,l.Lk)("div",mn,[i[15]||(i[15]=(0,l.Lk)("div",{class:"info-icon"},"🏢",-1)),(0,l.Lk)("div",kn,[i[14]||(i[14]=(0,l.Lk)("div",{class:"info-label"},"所属公司",-1)),(0,l.Lk)("div",hn,(0,v.v_)(o.company||"智能OA系统"),1)])]),(0,l.Lk)("div",bn,[i[17]||(i[17]=(0,l.Lk)("div",{class:"info-icon"},"📅",-1)),(0,l.Lk)("div",gn,[i[16]||(i[16]=(0,l.Lk)("div",{class:"info-label"},"注册时间",-1)),(0,l.Lk)("div",Ln,(0,v.v_)(c(o.registerTime)),1)])])])])])])])}}};const xn=(0,r.A)(yn,[["__scopeId","data-v-5df4fa54"]]);var Tn=xn;const An={class:"user-home-container"},wn={class:"user-home-content"},Cn={class:"main-content"},Fn={class:"welcome-section"},_n={class:"welcome-card"},En={class:"welcome-info"},In={class:"user-stats"},Sn={class:"stat-item"},Mn={class:"stat-item"},Dn={class:"welcome-avatar"},Un={class:"quick-nav-section"},Rn={class:"nav-grid"},On={class:"quick-actions-section"},Pn={class:"action-buttons"},Nn={class:"recent-activity-section"},Kn={class:"activity-list"},zn={class:"activity-icon"},Xn={class:"activity-content"},Wn={class:"activity-title"},jn={class:"activity-time"};function Hn(e,a,t,s,o,i){const n=(0,l.g2)("CommonHeader"),r=(0,l.g2)("CommonNavigation"),d=(0,l.g2)("a-icon"),c=(0,l.g2)("UserOutlined"),u=(0,l.g2)("a-avatar");return(0,l.uX)(),(0,l.CE)("div",An,[(0,l.bF)(n,{title:"欢迎回来",subtitle:"开始您今天的工作",iconType:"home",isUserSide:!0}),(0,l.Lk)("div",wn,[(0,l.bF)(r,{isAdmin:!1}),(0,l.Lk)("div",Cn,[(0,l.Lk)("div",Fn,[(0,l.Lk)("div",_n,[(0,l.Lk)("div",En,[(0,l.Lk)("h1",null,(0,v.v_)(e.getGreeting())+"，"+(0,v.v_)(e.userInfo.username||"用户"),1),(0,l.Lk)("p",null,(0,v.v_)(e.getCurrentDate()),1),(0,l.Lk)("div",In,[(0,l.Lk)("div",Sn,[(0,l.bF)(d,{type:"clock-circle"}),(0,l.Lk)("span",null,"今日工作时长："+(0,v.v_)(e.workStats.todayHours)+"小时",1)]),(0,l.Lk)("div",Mn,[(0,l.bF)(d,{type:"check-circle"}),(0,l.Lk)("span",null,"已完成任务："+(0,v.v_)(e.workStats.completedTasks)+"个",1)])])]),(0,l.Lk)("div",Dn,[(0,l.bF)(u,{size:80,src:e.userInfo.avatar},{icon:(0,l.k6)(()=>[(0,l.bF)(c)]),_:1},8,["src"])])])]),(0,l.Lk)("div",Un,[a[15]||(a[15]=(0,l.Lk)("h2",null,"快速导航",-1)),(0,l.Lk)("div",Rn,[(0,l.Lk)("div",{class:"nav-card",onClick:a[0]||(a[0]=a=>e.navigateTo("/user/workbench"))},a[9]||(a[9]=[(0,l.Lk)("div",{class:"nav-icon"},"📊",-1),(0,l.Lk)("h3",null,"我的工作台",-1),(0,l.Lk)("p",null,"查看工作概览和快速操作",-1)])),(0,l.Lk)("div",{class:"nav-card",onClick:a[1]||(a[1]=a=>e.navigateTo("/user/approval"))},a[10]||(a[10]=[(0,l.Lk)("div",{class:"nav-icon"},"📋",-1),(0,l.Lk)("h3",null,"我的审批",-1),(0,l.Lk)("p",null,"管理审批申请和查看状态",-1)])),(0,l.Lk)("div",{class:"nav-card",onClick:a[2]||(a[2]=a=>e.navigateTo("/user/attendance"))},a[11]||(a[11]=[(0,l.Lk)("div",{class:"nav-icon"},"⏰",-1),(0,l.Lk)("h3",null,"我的考勤",-1),(0,l.Lk)("p",null,"查看考勤记录和打卡状态",-1)])),(0,l.Lk)("div",{class:"nav-card",onClick:a[3]||(a[3]=a=>e.navigateTo("/user/files"))},a[12]||(a[12]=[(0,l.Lk)("div",{class:"nav-icon"},"📁",-1),(0,l.Lk)("h3",null,"我的文件",-1),(0,l.Lk)("p",null,"管理个人文件和文档",-1)])),(0,l.Lk)("div",{class:"nav-card",onClick:a[4]||(a[4]=a=>e.navigateTo("/user/announcement"))},a[13]||(a[13]=[(0,l.Lk)("div",{class:"nav-icon"},"📢",-1),(0,l.Lk)("h3",null,"我的公告",-1),(0,l.Lk)("p",null,"查看重要公告信息",-1)])),(0,l.Lk)("div",{class:"nav-card",onClick:a[5]||(a[5]=a=>e.navigateTo("/user/profile"))},a[14]||(a[14]=[(0,l.Lk)("div",{class:"nav-icon"},"👤",-1),(0,l.Lk)("h3",null,"个人信息",-1),(0,l.Lk)("p",null,"管理个人资料和设置",-1)]))])]),(0,l.Lk)("div",On,[a[19]||(a[19]=(0,l.Lk)("h2",null,"快捷操作",-1)),(0,l.Lk)("div",Pn,[(0,l.Lk)("button",{class:"action-btn",onClick:a[6]||(a[6]=a=>e.quickAction("checkin"))},[(0,l.bF)(d,{type:"clock-circle"}),a[16]||(a[16]=(0,l.eW)(" 打卡签到 ",-1))]),(0,l.Lk)("button",{class:"action-btn",onClick:a[7]||(a[7]=a=>e.quickAction("approval"))},[(0,l.bF)(d,{type:"file-text"}),a[17]||(a[17]=(0,l.eW)(" 申请审批 ",-1))]),(0,l.Lk)("button",{class:"action-btn",onClick:a[8]||(a[8]=a=>e.quickAction("upload"))},[(0,l.bF)(d,{type:"upload"}),a[18]||(a[18]=(0,l.eW)(" 上传文件 ",-1))])])]),(0,l.Lk)("div",Nn,[a[20]||(a[20]=(0,l.Lk)("h2",null,"最近活动",-1)),(0,l.Lk)("div",Kn,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.recentActivities,e=>((0,l.uX)(),(0,l.CE)("div",{key:e.id,class:"activity-item"},[(0,l.Lk)("div",zn,(0,v.v_)(e.icon),1),(0,l.Lk)("div",Xn,[(0,l.Lk)("div",Wn,(0,v.v_)(e.title),1),(0,l.Lk)("div",jn,(0,v.v_)(e.time),1)]),(0,l.Lk)("div",{class:(0,v.C4)(["activity-status",e.status])},(0,v.v_)(e.statusText),3)]))),128))])])])])])}var qn=(0,l.pM)({name:"UserHome",components:{CommonHeader:Oi,CommonNavigation:qi,UserOutlined:xi.A},setup(){const e=(0,u.rd)(),a=(0,S.KR)({username:"",avatar:""}),t="userActivities",s=(0,S.KR)([]),o=()=>{try{const e=localStorage.getItem(t),a=e?JSON.parse(e):[];Array.isArray(a)&&(s.value=a)}catch(e){}},i=()=>{try{localStorage.setItem(t,JSON.stringify(s.value.slice(0,20)))}catch(e){}},n=e=>{s.value.unshift(e),s.value.length>20&&s.value.pop(),i()},r=a,d=()=>{try{const e=localStorage.getItem("recentRegisteredUser");if(e){const a=JSON.parse(e);return void(r.value={username:a.username||"",avatar:a.avatar||""})}const a=localStorage.getItem("savedUserInfo");if(a){const e=JSON.parse(a);return void(r.value={username:e.username||"",avatar:e.avatar||""})}const t=localStorage.getItem("user");if(t){const e=JSON.parse(t);r.value={username:e.username||"",avatar:e.avatar||""}}}catch(e){}},c=e=>{const a=e&&e.detail?e.detail:null;a?r.value={username:a.username||r.value.username,avatar:a.avatar||r.value.avatar}:d()},v=e=>{const a=e&&e.detail?e.detail:null;if(!a)return;const t=Date.now(),s={id:t,type:a.type||"activity",icon:"attendance"===a.type?"clock-circle":"file"===a.type?"folder":"notification",title:a.title||"用户操作",time:a.time||(new Date).toTimeString().slice(0,5),status:a.status||"completed",statusText:a.statusText||"已完成"};n(s)};(0,l.sV)(()=>{d(),o(),window.addEventListener("userInfoUpdated",c),window.addEventListener("userActivity",v);const e=setInterval(()=>{},6e4);return()=>clearInterval(e)}),(0,l.hi)(()=>{window.removeEventListener("userInfoUpdated",c),window.removeEventListener("userActivity",v)}),(0,l.Gt)("userInfo",a);const p=(0,S.Kh)({todayHours:8.5,completedTasks:12}),m=()=>{const e=(new Date).getHours();return e<6?"夜深了":e<9?"早上好":e<12?"上午好":e<14?"中午好":e<18?"下午好":e<22?"晚上好":"夜深了"},k=()=>{const e=new Date,a={year:"numeric",month:"long",day:"numeric",weekday:"long"};return e.toLocaleDateString("zh-CN",a)},h=a=>e.push(a),b=a=>{switch(a){case"checkin":e.push("/user/attendance");break;case"approval":e.push("/user/approval");break;case"upload":e.push("/user/files");break}};return{userInfo:a,workStats:p,recentActivities:s,getGreeting:m,getCurrentDate:k,navigateTo:h,quickAction:b}}});const Jn=(0,r.A)(qn,[["render",Hn],["__scopeId","data-v-16ad95bc"]]);var Vn=Jn;const $n={class:"workbench-container"},Qn={class:"workbench-content"},Bn={class:"main-content"},Gn={class:"stats-section"},Yn={class:"stat-card"},Zn={class:"stat-icon"},er={class:"stat-info"},ar={class:"stat-value"},tr={class:"stat-card"},sr={class:"stat-icon"},lr={class:"stat-info"},or={class:"stat-value"},ir={class:"stat-card"},nr={class:"stat-icon"},rr={class:"stat-info"},dr={class:"stat-value"},cr={class:"stat-card"},ur={class:"stat-icon"},vr={class:"stat-info"},pr={class:"stat-value"},mr={class:"quick-actions"},kr={class:"action-grid"},hr={class:"recent-work"},br={class:"work-list"},gr={class:"work-icon"},Lr={class:"work-info"},fr={class:"work-title"},yr={class:"work-time"},xr={class:"todo-section"},Tr={class:"todo-list"},Ar={class:"add-todo"};function wr(e,a,t,s,o,i){const n=(0,l.g2)("CommonHeader"),r=(0,l.g2)("CommonNavigation"),d=(0,l.g2)("a-icon"),c=(0,l.g2)("a-checkbox"),u=(0,l.g2)("a-button"),p=(0,l.g2)("a-input");return(0,l.uX)(),(0,l.CE)("div",$n,[(0,l.bF)(n,{title:"我的工作台",subtitle:"个人工作概览与快速操作",iconType:"dashboard",isUserSide:!0}),(0,l.Lk)("div",Qn,[(0,l.bF)(r,{isAdmin:!1}),(0,l.Lk)("div",Bn,[(0,l.Lk)("div",Gn,[(0,l.Lk)("div",Yn,[(0,l.Lk)("div",Zn,[(0,l.bF)(d,{type:"clock-circle"})]),(0,l.Lk)("div",er,[(0,l.Lk)("div",ar,(0,v.v_)(e.workStats.todayHours)+"h",1),a[5]||(a[5]=(0,l.Lk)("div",{class:"stat-label"},"今日工作时长",-1))])]),(0,l.Lk)("div",tr,[(0,l.Lk)("div",sr,[(0,l.bF)(d,{type:"check-circle"})]),(0,l.Lk)("div",lr,[(0,l.Lk)("div",or,(0,v.v_)(e.workStats.completedTasks),1),a[6]||(a[6]=(0,l.Lk)("div",{class:"stat-label"},"已完成任务",-1))])]),(0,l.Lk)("div",ir,[(0,l.Lk)("div",nr,[(0,l.bF)(d,{type:"file-text"})]),(0,l.Lk)("div",rr,[(0,l.Lk)("div",dr,(0,v.v_)(e.workStats.pendingApprovals),1),a[7]||(a[7]=(0,l.Lk)("div",{class:"stat-label"},"待审批事项",-1))])]),(0,l.Lk)("div",cr,[(0,l.Lk)("div",ur,[(0,l.bF)(d,{type:"notification"})]),(0,l.Lk)("div",vr,[(0,l.Lk)("div",pr,(0,v.v_)(e.workStats.unreadAnnouncements),1),a[8]||(a[8]=(0,l.Lk)("div",{class:"stat-label"},"未读公告",-1))])])]),(0,l.Lk)("div",mr,[a[13]||(a[13]=(0,l.Lk)("h3",null,"快速操作",-1)),(0,l.Lk)("div",kr,[(0,l.Lk)("div",{class:"action-item",onClick:a[0]||(a[0]=a=>e.quickAction("attendance"))},[(0,l.bF)(d,{type:"clock-circle"}),a[9]||(a[9]=(0,l.Lk)("span",null,"打卡签到",-1))]),(0,l.Lk)("div",{class:"action-item",onClick:a[1]||(a[1]=a=>e.quickAction("approval"))},[(0,l.bF)(d,{type:"file-text"}),a[10]||(a[10]=(0,l.Lk)("span",null,"申请审批",-1))]),(0,l.Lk)("div",{class:"action-item",onClick:a[2]||(a[2]=a=>e.quickAction("file"))},[(0,l.bF)(d,{type:"upload"}),a[11]||(a[11]=(0,l.Lk)("span",null,"上传文件",-1))]),(0,l.Lk)("div",{class:"action-item",onClick:a[3]||(a[3]=a=>e.quickAction("announcement"))},[(0,l.bF)(d,{type:"notification"}),a[12]||(a[12]=(0,l.Lk)("span",null,"查看公告",-1))])])]),(0,l.Lk)("div",hr,[a[14]||(a[14]=(0,l.Lk)("h3",null,"最近工作记录",-1)),(0,l.Lk)("div",br,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.recentWorkRecords,e=>((0,l.uX)(),(0,l.CE)("div",{key:e.id,class:"work-item"},[(0,l.Lk)("div",gr,[(0,l.bF)(d,{type:e.icon},null,8,["type"])]),(0,l.Lk)("div",Lr,[(0,l.Lk)("div",fr,(0,v.v_)(e.title),1),(0,l.Lk)("div",yr,(0,v.v_)(e.time),1)]),(0,l.Lk)("div",{class:(0,v.C4)(["work-status",e.status])},(0,v.v_)(e.statusText),3)]))),128))])]),(0,l.Lk)("div",xr,[a[16]||(a[16]=(0,l.Lk)("h3",null,"待办事项",-1)),(0,l.Lk)("div",Tr,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.todoList,a=>((0,l.uX)(),(0,l.CE)("div",{key:a.id,class:"todo-item"},[(0,l.bF)(c,{checked:a.completed,onChange:t=>e.toggleTodo(a.id)},null,8,["checked","onChange"]),(0,l.Lk)("span",{class:(0,v.C4)(["todo-text",{completed:a.completed}])},(0,v.v_)(a.text),3),(0,l.Lk)("span",{class:(0,v.C4)(["todo-priority",a.priority])},(0,v.v_)(a.priorityText),3)]))),128))]),(0,l.Lk)("div",Ar,[(0,l.bF)(p,{value:e.newTodoText,"onUpdate:value":a[4]||(a[4]=a=>e.newTodoText=a),placeholder:"添加新的待办事项...",onPressEnter:e.addTodo},{suffix:(0,l.k6)(()=>[(0,l.bF)(u,{type:"primary",size:"small",onClick:e.addTodo},{default:(0,l.k6)(()=>a[15]||(a[15]=[(0,l.eW)(" 添加 ",-1)])),_:1,__:[15]},8,["onClick"])]),_:1},8,["value","onPressEnter"])])])])])])}var Cr=(0,l.pM)({name:"MyWorkbench",components:{CommonHeader:Oi,CommonNavigation:qi},setup(){const e=(0,u.rd)(),a=(0,l.WQ)("userInfo",{username:"",avatar:""}),t=(0,S.Kh)({todayHours:8.5,completedTasks:12,pendingApprovals:3,unreadAnnouncements:5}),s=(0,S.KR)([{id:1,icon:"clock-circle",title:"上午打卡签到",time:"09:00",status:"completed",statusText:"已完成"},{id:2,icon:"file-text",title:"提交请假申请",time:"10:30",status:"pending",statusText:"审批中"},{id:3,icon:"upload",title:"上传项目文档",time:"14:15",status:"completed",statusText:"已完成"},{id:4,icon:"notification",title:"查看部门公告",time:"16:00",status:"completed",statusText:"已读"}]),o=(0,S.KR)([{id:1,text:"完成周报总结",completed:!1,priority:"high",priorityText:"高"},{id:2,text:"准备明日会议材料",completed:!1,priority:"medium",priorityText:"中"},{id:3,text:"回复客户邮件",completed:!0,priority:"low",priorityText:"低"}]),i=(0,S.KR)(""),n=a=>{switch(a){case"attendance":e.push("/user/attendance");break;case"approval":e.push("/user/approval");break;case"file":e.push("/user/files");break;case"announcement":e.push("/user/announcement");break}},r=e=>{const a=o.value.find(a=>a.id===e);a&&(a.completed=!a.completed)},d=()=>{if(i.value.trim()){const e={id:Date.now(),text:i.value.trim(),completed:!1,priority:"medium",priorityText:"中"};o.value.unshift(e),i.value=""}},c=()=>{t.todayHours=Math.max(0,t.todayHours+.2*(Math.random()-.5)),t.completedTasks=Math.max(0,t.completedTasks+Math.floor(2*(Math.random()-.5))),t.pendingApprovals=Math.max(0,t.pendingApprovals+Math.floor(2*(Math.random()-.5))),t.unreadAnnouncements=Math.max(0,t.unreadAnnouncements+Math.floor(2*(Math.random()-.5)))};return(0,l.sV)(()=>{const e=setInterval(c,3e4);return()=>clearInterval(e)}),{userInfo:a,workStats:t,recentWorkRecords:s,todoList:o,newTodoText:i,quickAction:n,toggleTodo:r,addTodo:d}}});const Fr=(0,r.A)(Cr,[["render",wr],["__scopeId","data-v-74f55e9c"]]);var _r=Fr;const Er={class:"my-approval-container"},Ir={class:"approval-content"},Sr={class:"main-content"},Mr={class:"stats-overview"},Dr={class:"stat-card"},Ur={class:"stat-content"},Rr={class:"stat-number"},Or={class:"stat-card"},Pr={class:"stat-content"},Nr={class:"stat-number"},Kr={class:"stat-card"},zr={class:"stat-content"},Xr={class:"stat-number"},Wr={class:"stat-card"},jr={class:"stat-content"},Hr={class:"stat-number"},qr={class:"approval-list"},Jr={class:"list-header"},Vr={class:"approval-table"},$r={class:"actions"},Qr=["onClick"],Br=["onClick"],Gr={class:"modal-header"},Yr={class:"modal-body"},Zr={class:"form-group"},ed={key:0,class:"form-error"},ad={class:"form-group"},td={key:0,class:"form-error"},sd={class:"form-group"},ld={class:"form-group"},od={class:"modal-footer"},id=["disabled"];function nd(e,a,t,o,i,n){const r=(0,l.g2)("CommonHeader"),d=(0,l.g2)("CommonNavigation");return(0,l.uX)(),(0,l.CE)("div",Er,[(0,l.bF)(r,{title:"我的审批",subtitle:"查看和管理您的审批申请","icon-type":"check-circle",isUserSide:!0}),(0,l.Lk)("div",Ir,[(0,l.bF)(d,{isAdmin:!1}),(0,l.Lk)("div",Sr,[(0,l.Lk)("div",Mr,[(0,l.Lk)("div",Dr,[a[12]||(a[12]=(0,l.Lk)("div",{class:"stat-icon"},"📋",-1)),(0,l.Lk)("div",Ur,[(0,l.Lk)("div",Rr,(0,v.v_)(e.myApprovals.length),1),a[11]||(a[11]=(0,l.Lk)("div",{class:"stat-label"},"总申请数",-1))])]),(0,l.Lk)("div",Or,[a[14]||(a[14]=(0,l.Lk)("div",{class:"stat-icon"},"⏳",-1)),(0,l.Lk)("div",Pr,[(0,l.Lk)("div",Nr,(0,v.v_)(e.pendingCount),1),a[13]||(a[13]=(0,l.Lk)("div",{class:"stat-label"},"待审批",-1))])]),(0,l.Lk)("div",Kr,[a[16]||(a[16]=(0,l.Lk)("div",{class:"stat-icon"},"✅",-1)),(0,l.Lk)("div",zr,[(0,l.Lk)("div",Xr,(0,v.v_)(e.approvedCount),1),a[15]||(a[15]=(0,l.Lk)("div",{class:"stat-label"},"已通过",-1))])]),(0,l.Lk)("div",Wr,[a[18]||(a[18]=(0,l.Lk)("div",{class:"stat-icon"},"❌",-1)),(0,l.Lk)("div",jr,[(0,l.Lk)("div",Hr,(0,v.v_)(e.rejectedCount),1),a[17]||(a[17]=(0,l.Lk)("div",{class:"stat-label"},"已拒绝",-1))])])]),(0,l.Lk)("div",qr,[(0,l.Lk)("div",Jr,[a[19]||(a[19]=(0,l.Lk)("h2",null,"我的审批记录",-1)),(0,l.Lk)("button",{class:"btn-add",onClick:a[0]||(a[0]=(...a)=>e.showAddModal&&e.showAddModal(...a))},"+ 新建审批")]),(0,l.Lk)("div",Vr,[(0,l.Lk)("table",null,[a[20]||(a[20]=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"申请ID"),(0,l.Lk)("th",null,"申请类型"),(0,l.Lk)("th",null,"申请内容"),(0,l.Lk)("th",null,"申请时间"),(0,l.Lk)("th",null,"审批状态"),(0,l.Lk)("th",null,"审批意见"),(0,l.Lk)("th",null,"操作")])],-1)),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.myApprovals,a=>((0,l.uX)(),(0,l.CE)("tr",{key:a.id},[(0,l.Lk)("td",null,(0,v.v_)(a.id),1),(0,l.Lk)("td",null,(0,v.v_)(a.type),1),(0,l.Lk)("td",null,(0,v.v_)(a.content),1),(0,l.Lk)("td",null,(0,v.v_)(a.applyTime),1),(0,l.Lk)("td",null,[(0,l.Lk)("span",{class:(0,v.C4)(["status",a.status])},(0,v.v_)(a.statusText),3)]),(0,l.Lk)("td",null,(0,v.v_)(a.comment||"-"),1),(0,l.Lk)("td",null,[(0,l.Lk)("div",$r,["pending"===a.status?((0,l.uX)(),(0,l.CE)("button",{key:0,class:"btn-cancel",onClick:t=>e.cancelApproval(a)}," 撤回 ",8,Qr)):(0,l.Q3)("",!0),"pending"===a.status?((0,l.uX)(),(0,l.CE)("button",{key:1,class:"btn-edit",onClick:t=>e.showEditModal(a)}," 编辑 ",8,Br)):(0,l.Q3)("",!0)])])]))),128))])])])])])]),e.showModal?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"modal-overlay",onClick:a[10]||(a[10]=(...a)=>e.closeModal&&e.closeModal(...a))},[(0,l.Lk)("div",{class:"modal-content",onClick:a[9]||(a[9]=(0,s.D$)(()=>{},["stop"]))},[(0,l.Lk)("div",Gr,[(0,l.Lk)("h3",null,(0,v.v_)(e.isEditing?"编辑审批":"新建审批"),1),(0,l.Lk)("button",{class:"modal-close",onClick:a[1]||(a[1]=(...a)=>e.closeModal&&e.closeModal(...a))},"×")]),(0,l.Lk)("div",Yr,[(0,l.Lk)("form",{onSubmit:a[6]||(a[6]=(0,s.D$)((...a)=>e.submitApproval&&e.submitApproval(...a),["prevent"]))},[(0,l.Lk)("div",Zr,[a[22]||(a[22]=(0,l.Lk)("label",null,[(0,l.eW)("申请类型 "),(0,l.Lk)("span",{class:"required"},"*")],-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[2]||(a[2]=a=>e.approvalForm.type=a),required:""},a[21]||(a[21]=[(0,l.Fv)('<option value="" data-v-2ea96e79>请选择申请类型</option><option value="请假" data-v-2ea96e79>请假申请</option><option value="报销" data-v-2ea96e79>报销申请</option><option value="采购" data-v-2ea96e79>采购申请</option><option value="其他" data-v-2ea96e79>其他申请</option>',5)]),512),[[s.u1,e.approvalForm.type]]),e.formErrors.type?((0,l.uX)(),(0,l.CE)("div",ed,(0,v.v_)(e.formErrors.type),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",ad,[a[23]||(a[23]=(0,l.Lk)("label",null,[(0,l.eW)("申请内容 "),(0,l.Lk)("span",{class:"required"},"*")],-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":a[3]||(a[3]=a=>e.approvalForm.content=a),placeholder:"请详细描述您的申请内容...",rows:"4",required:""},null,512),[[s.Jo,e.approvalForm.content]]),e.formErrors.content?((0,l.uX)(),(0,l.CE)("div",td,(0,v.v_)(e.formErrors.content),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",sd,[a[24]||(a[24]=(0,l.Lk)("label",null,"申请金额",-1)),(0,l.bo)((0,l.Lk)("input",{type:"number","onUpdate:modelValue":a[4]||(a[4]=a=>e.approvalForm.amount=a),placeholder:"请输入申请金额（如适用）",min:"0",step:"0.01"},null,512),[[s.Jo,e.approvalForm.amount]])]),(0,l.Lk)("div",ld,[a[26]||(a[26]=(0,l.Lk)("label",null,"紧急程度",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[5]||(a[5]=a=>e.approvalForm.priority=a)},a[25]||(a[25]=[(0,l.Lk)("option",{value:"low"},"普通",-1),(0,l.Lk)("option",{value:"medium"},"重要",-1),(0,l.Lk)("option",{value:"high"},"紧急",-1)]),512),[[s.u1,e.approvalForm.priority]])])],32)]),(0,l.Lk)("div",od,[(0,l.Lk)("button",{type:"button",class:"btn-cancel",onClick:a[7]||(a[7]=(...a)=>e.closeModal&&e.closeModal(...a))},"取消"),(0,l.Lk)("button",{type:"button",class:"btn-submit",onClick:a[8]||(a[8]=(...a)=>e.submitApproval&&e.submitApproval(...a)),disabled:e.submitting},(0,v.v_)(e.submitting?e.isEditing?"更新中...":"提交中...":e.isEditing?"更新审批":"提交审批"),9,id)])])])):(0,l.Q3)("",!0)])}var rd=(0,l.pM)({name:"MyApproval",components:{CommonHeader:Oi,CommonNavigation:qi},setup(){const e=(0,S.Kh)({username:"",avatar:""});(0,l.Gt)("userInfo",e);const a=e=>{try{window.dispatchEvent(new CustomEvent("userActivity",{detail:e}));const a="userActivities",t=localStorage.getItem(a),s=t?JSON.parse(t):[];s.unshift({id:Date.now(),type:e.type||"approval",icon:"notification",title:e.title||"审批操作",time:e.time||(new Date).toTimeString().slice(0,5),status:e.status||"pending",statusText:e.statusText||"待处理"}),localStorage.setItem(a,JSON.stringify(s.slice(0,20)))}catch(a){}},t=(0,S.KR)(!1),s=(0,S.KR)(!1),o=(0,S.KR)(!1),i=(0,S.KR)(null),n=(0,S.KR)({type:"",content:"",amount:"",priority:"low"}),r=(0,S.KR)({type:"",content:""}),d=(0,S.KR)([{id:"APP001",type:"请假申请",content:"因家中有事，申请请假3天",applyTime:"2024-01-15 09:00:00",status:"pending",statusText:"待审批",comment:"",amount:"",priority:"medium"},{id:"APP002",type:"报销申请",content:"出差期间的交通费和住宿费报销",applyTime:"2024-01-14 14:30:00",status:"approved",statusText:"已通过",comment:"同意报销，请提供相关票据",amount:"1200.00",priority:"high"},{id:"APP003",type:"采购申请",content:"申请购买办公用品",applyTime:"2024-01-13 10:15:00",status:"rejected",statusText:"已拒绝",comment:"预算不足，建议延后采购",amount:"500.00",priority:"low"}]),c=(0,l.EW)(()=>d.value.filter(e=>"pending"===e.status).length),u=(0,l.EW)(()=>d.value.filter(e=>"approved"===e.status).length),v=(0,l.EW)(()=>d.value.filter(e=>"rejected"===e.status).length),p=()=>{try{const a=localStorage.getItem("savedUserInfo");if(a){const t=JSON.parse(a);e.username=t.username||"",e.avatar=t.avatar||""}else{const a=localStorage.getItem("user");if(a){const t=JSON.parse(a);e.username=t.username||localStorage.getItem("username")||"user",e.avatar=t.avatar||""}}}catch(a){console.error("加载用户信息失败:",a)}},m=()=>{s.value=!1,i.value=null,n.value={type:"",content:"",amount:"",priority:"low"},r.value={type:"",content:""},t.value=!0},k=e=>{s.value=!0,i.value=e,n.value={type:e.type,content:e.content,amount:e.amount,priority:e.priority},r.value={type:"",content:""},t.value=!0},h=()=>{t.value=!1,s.value=!1,i.value=null},b=()=>{let e=!0;return r.value={type:"",content:""},n.value.type||(r.value.type="请选择申请类型",e=!1),n.value.content.trim()||(r.value.content="请输入申请内容",e=!1),e},g=async()=>{if(b()){o.value=!0;try{if(await new Promise(e=>setTimeout(e,1e3)),s.value&&i.value){const e=i.value;e.type=n.value.type,e.content=n.value.content,e.amount=n.value.amount,e.priority=n.value.priority,e.updateTime=(new Date).toLocaleString("zh-CN"),a({type:"approval",title:"更新审批申请",status:"completed",statusText:"已更新"}),M.Ay.success("审批申请已更新！")}else{const e={id:`APP${String(d.value.length+1).padStart(3,"0")}`,type:n.value.type,content:n.value.content,amount:n.value.amount,priority:n.value.priority,applyTime:(new Date).toLocaleString("zh-CN"),status:"pending",statusText:"待审批",comment:""};d.value.unshift(e),a({type:"approval",title:"提交审批申请",status:"pending",statusText:"待审批"}),M.Ay.success("审批申请已提交！")}h()}catch(e){M.Ay.error("操作失败，请重试"),console.error("提交错误:",e)}finally{o.value=!1}}},L=e=>{if(confirm("确定要撤回这个审批申请吗？")){const t=d.value.findIndex(a=>a.id===e.id);-1!==t&&(d.value.splice(t,1),a({type:"approval",title:"撤回审批申请",status:"completed",statusText:"已撤回"}),M.Ay.success("审批申请已撤回"))}};return(0,l.sV)(()=>{p()}),{headerUserInfo:e,showModal:t,isEditing:s,submitting:o,editingApproval:i,approvalForm:n,formErrors:r,myApprovals:d,pendingCount:c,approvedCount:u,rejectedCount:v,showAddModal:m,showEditModal:k,closeModal:h,submitApproval:g,cancelApproval:L}}});const dd=(0,r.A)(rd,[["render",nd],["__scopeId","data-v-2ea96e79"]]);var cd=dd;const ud={class:"my-attendance-container"},vd={class:"attendance-content"},pd={class:"main-content"},md={class:"stats-overview"},kd={class:"stat-card"},hd={class:"stat-content"},bd={class:"stat-number"},gd={class:"stat-card"},Ld={class:"stat-content"},fd={class:"stat-number"},yd={class:"stat-card"},xd={class:"stat-content"},Td={class:"stat-number"},Ad={class:"stat-card"},wd={class:"stat-content"},Cd={class:"stat-number"},Fd={class:"attendance-list"},_d={class:"list-header"},Ed={class:"attendance-table"},Id={class:"modal-header"},Sd={class:"modal-body"},Md={class:"form-group"},Dd=["max"],Ud={key:0,class:"form-error"},Rd={class:"form-group"},Od={key:0,class:"form-error"},Pd={class:"form-group"},Nd={class:"form-group"},Kd={class:"modal-footer"},zd=["disabled"];function Xd(e,a,t,o,i,n){const r=(0,l.g2)("CommonHeader"),d=(0,l.g2)("CommonNavigation");return(0,l.uX)(),(0,l.CE)("div",ud,[(0,l.bF)(r,{title:"我的考勤",subtitle:"查看和管理您的考勤记录","icon-type":"clock-circle",isUserSide:!0}),(0,l.Lk)("div",vd,[(0,l.bF)(d,{isAdmin:!1}),(0,l.Lk)("div",pd,[(0,l.Lk)("div",md,[(0,l.Lk)("div",kd,[a[12]||(a[12]=(0,l.Lk)("div",{class:"stat-icon"},"📅",-1)),(0,l.Lk)("div",hd,[(0,l.Lk)("div",bd,(0,v.v_)(e.attendanceStats.totalDays),1),a[11]||(a[11]=(0,l.Lk)("div",{class:"stat-label"},"本月出勤天数",-1))])]),(0,l.Lk)("div",gd,[a[14]||(a[14]=(0,l.Lk)("div",{class:"stat-icon"},"⏰",-1)),(0,l.Lk)("div",Ld,[(0,l.Lk)("div",fd,(0,v.v_)(e.attendanceStats.avgWorkHours),1),a[13]||(a[13]=(0,l.Lk)("div",{class:"stat-label"},"平均工作时长",-1))])]),(0,l.Lk)("div",yd,[a[16]||(a[16]=(0,l.Lk)("div",{class:"stat-icon"},"✅",-1)),(0,l.Lk)("div",xd,[(0,l.Lk)("div",Td,(0,v.v_)(e.attendanceStats.onTimeCount),1),a[15]||(a[15]=(0,l.Lk)("div",{class:"stat-label"},"准时打卡次数",-1))])]),(0,l.Lk)("div",Ad,[a[18]||(a[18]=(0,l.Lk)("div",{class:"stat-icon"},"⚠️",-1)),(0,l.Lk)("div",wd,[(0,l.Lk)("div",Cd,(0,v.v_)(e.attendanceStats.lateCount),1),a[17]||(a[17]=(0,l.Lk)("div",{class:"stat-label"},"迟到次数",-1))])])]),(0,l.Lk)("div",Fd,[(0,l.Lk)("div",_d,[a[19]||(a[19]=(0,l.Lk)("h2",null,"考勤记录",-1)),(0,l.Lk)("button",{class:"btn-checkin",onClick:a[0]||(a[0]=(...a)=>e.handleCheckin&&e.handleCheckin(...a))},"打卡签到")]),(0,l.Lk)("div",Ed,[(0,l.Lk)("table",null,[a[20]||(a[20]=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"日期"),(0,l.Lk)("th",null,"星期"),(0,l.Lk)("th",null,"上班时间"),(0,l.Lk)("th",null,"下班时间"),(0,l.Lk)("th",null,"工作时长"),(0,l.Lk)("th",null,"状态"),(0,l.Lk)("th",null,"备注")])],-1)),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.attendanceRecords,e=>((0,l.uX)(),(0,l.CE)("tr",{key:e.id},[(0,l.Lk)("td",null,(0,v.v_)(e.date),1),(0,l.Lk)("td",null,(0,v.v_)(e.weekday),1),(0,l.Lk)("td",null,(0,v.v_)(e.checkInTime||"-"),1),(0,l.Lk)("td",null,(0,v.v_)(e.checkOutTime||"-"),1),(0,l.Lk)("td",null,(0,v.v_)(e.workHours||"-"),1),(0,l.Lk)("td",null,[(0,l.Lk)("span",{class:(0,v.C4)(["status",e.status])},(0,v.v_)(e.statusText),3)]),(0,l.Lk)("td",null,(0,v.v_)(e.note||"-"),1)]))),128))])])])])])]),e.showModal?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"modal-overlay",onClick:a[10]||(a[10]=(...a)=>e.closeModal&&e.closeModal(...a))},[(0,l.Lk)("div",{class:"modal-content",onClick:a[9]||(a[9]=(0,s.D$)(()=>{},["stop"]))},[(0,l.Lk)("div",Id,[(0,l.Lk)("h3",null,(0,v.v_)(e.isEditing?"编辑考勤记录":"添加考勤记录"),1),(0,l.Lk)("button",{class:"modal-close",onClick:a[1]||(a[1]=(...a)=>e.closeModal&&e.closeModal(...a))},"×")]),(0,l.Lk)("div",Sd,[(0,l.Lk)("form",{onSubmit:a[6]||(a[6]=(0,s.D$)((...a)=>e.submitRecord&&e.submitRecord(...a),["prevent"]))},[(0,l.Lk)("div",Md,[a[21]||(a[21]=(0,l.Lk)("label",null,[(0,l.eW)("日期 "),(0,l.Lk)("span",{class:"required"},"*")],-1)),(0,l.bo)((0,l.Lk)("input",{type:"date","onUpdate:modelValue":a[2]||(a[2]=a=>e.attendanceForm.date=a),required:"",max:e.today},null,8,Dd),[[s.Jo,e.attendanceForm.date]]),e.formErrors.date?((0,l.uX)(),(0,l.CE)("div",Ud,(0,v.v_)(e.formErrors.date),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",Rd,[a[22]||(a[22]=(0,l.Lk)("label",null,[(0,l.eW)("签到时间 "),(0,l.Lk)("span",{class:"required"},"*")],-1)),(0,l.bo)((0,l.Lk)("input",{type:"time","onUpdate:modelValue":a[3]||(a[3]=a=>e.attendanceForm.checkIn=a),required:""},null,512),[[s.Jo,e.attendanceForm.checkIn]]),e.formErrors.checkIn?((0,l.uX)(),(0,l.CE)("div",Od,(0,v.v_)(e.formErrors.checkIn),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",Pd,[a[23]||(a[23]=(0,l.Lk)("label",null,"签退时间",-1)),(0,l.bo)((0,l.Lk)("input",{type:"time","onUpdate:modelValue":a[4]||(a[4]=a=>e.attendanceForm.checkOut=a)},null,512),[[s.Jo,e.attendanceForm.checkOut]])]),(0,l.Lk)("div",Nd,[a[24]||(a[24]=(0,l.Lk)("label",null,"备注",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":a[5]||(a[5]=a=>e.attendanceForm.note=a),placeholder:"请输入备注信息...",rows:"3"},null,512),[[s.Jo,e.attendanceForm.note]])])],32)]),(0,l.Lk)("div",Kd,[(0,l.Lk)("button",{type:"button",class:"btn-cancel",onClick:a[7]||(a[7]=(...a)=>e.closeModal&&e.closeModal(...a))},"取消"),(0,l.Lk)("button",{type:"button",class:"btn-submit",onClick:a[8]||(a[8]=(...a)=>e.submitRecord&&e.submitRecord(...a)),disabled:e.submitting},(0,v.v_)(e.submitting?e.isEditing?"更新中...":"提交中...":e.isEditing?"更新记录":"添加记录"),9,zd)])])])):(0,l.Q3)("",!0)])}var Wd=(0,l.pM)({name:"MyAttendance",components:{CommonHeader:Oi,CommonNavigation:qi},setup(){const e="08:30",a="17:30",t=(0,S.Kh)({username:"",avatar:""});(0,l.Gt)("userInfo",t);const s=(0,S.KR)(!1),o=(0,S.KR)(!1),i=(0,S.KR)(!1),n=(0,S.KR)(null),r=(0,S.Kh)({date:"",checkIn:"",checkOut:"",note:""}),d=(0,S.Kh)({date:"",checkIn:""}),c=(0,S.Kh)({totalDays:0,avgWorkHours:"0小时",onTimeCount:0,lateCount:0}),u=(0,S.KR)([{id:"ATT001",date:"2024-01-15",weekday:"周一",checkInTime:"08:30",checkOutTime:"17:30",workHours:"9小时",status:"normal",statusText:"正常出勤",note:""},{id:"ATT002",date:"2024-01-14",weekday:"周日",checkInTime:"08:45",checkOutTime:"17:30",workHours:"8.75小时",status:"normal",statusText:"正常出勤",note:"提前到岗"},{id:"ATT003",date:"2024-01-13",weekday:"周六",checkInTime:"09:15",checkOutTime:"",workHours:"",status:"checked-in",statusText:"已签到",note:"忘记签退"}]),v=()=>{z(u.value)},p=()=>{const e=X();e&&e.length>0&&(u.value=e)},m=(0,l.EW)(()=>u.value.length),k=(0,l.EW)(()=>{const e=u.value.filter(e=>e.workHours);if(0===e.length)return"0小时";const a=e.reduce((e,a)=>{const t=parseFloat(a.workHours.replace("小时",""));return e+t},0);return(a/e.length).toFixed(1)+"小时"}),h=(0,l.EW)(()=>u.value.filter(a=>a.checkInTime&&a.checkInTime<=e).length),b=(0,l.EW)(()=>u.value.filter(a=>a.checkInTime&&a.checkInTime>e).length),g=()=>{c.totalDays=m.value,c.avgWorkHours=k.value,c.onTimeCount=h.value,c.lateCount=b.value},L=e=>{N({type:e.type||"attendance",icon:"clock-circle",title:e.title||"考勤操作",time:e.time||(new Date).toTimeString().slice(0,5),status:e.status||"completed",statusText:e.statusText||"已完成"})},f=()=>{const t=new Date,s=t.toTimeString().slice(0,5),l=t.toISOString().split("T")[0],o=["周日","周一","周二","周三","周四","周五","周六"],i=o[t.getDay()],n=u.value.find(e=>e.date===l);if(n)if(n.checkOutTime)M.Ay.warning("今天已经完成打卡！");else{n.checkOutTime=s;const e=new Date(`2000-01-01 ${n.checkInTime}`),t=new Date(`2000-01-01 ${s}`),l=((t-e)/36e5).toFixed(1);n.workHours=`${l}小时`,s<a?"late"===n.status?(n.status="late-early",n.statusText="迟到+早退"):(n.status="early-leave",n.statusText="早退"):"late"!==n.status&&(n.status="present",n.statusText="正常出勤"),M.Ay.success("签退成功！"),L({type:"attendance",title:"下午签退",time:s,status:"early-leave"===n.status?"early-leave":"late-early"===n.status?"late-early":"completed",statusText:n.statusText}),v()}else{const a={id:`ATT${Date.now()}`,date:l,weekday:i,checkInTime:s,checkOutTime:"",workHours:"",status:"present",statusText:"已签到",note:""};s>e&&(a.status="late",a.statusText="迟到"),u.value.unshift(a),M.Ay.success("签到成功！"),L({type:"attendance",title:"上午打卡签到",time:s,status:"late"===a.status?"late":"completed",statusText:"late"===a.status?"迟到":"已完成"}),v()}g()},y=(0,l.EW)(()=>{const e=new Date;return e.toISOString().split("T")[0]}),x=()=>{try{const e=localStorage.getItem("savedUserInfo");if(e){const a=JSON.parse(e);t.username=a.username||"",t.avatar=a.avatar||""}else{const e=localStorage.getItem("user");if(e){const a=JSON.parse(e);t.username=a.username||localStorage.getItem("username")||"user",t.avatar=a.avatar||""}}}catch(e){console.error("加载用户信息失败:",e)}},T=()=>{o.value=!1,n.value=null,r.date=y.value,r.checkIn="09:00",r.checkOut="",r.note="",d.date="",d.checkIn="",s.value=!0},A=e=>{o.value=!0,n.value=e,r.date=e.date,r.checkIn=e.checkInTime,r.checkOut=e.checkOutTime||"",r.note=e.note||"",d.date="",d.checkIn="",s.value=!0},w=()=>{s.value=!1,o.value=!1,n.value=null},C=()=>{let e=!0;return d.date="",d.checkIn="",r.date||(d.date="请选择日期",e=!1),r.checkIn||(d.checkIn="请输入签到时间",e=!1),e},F=async()=>{if(C()){i.value=!0;try{if(await new Promise(e=>setTimeout(e,1e3)),o.value&&n.value){const t=n.value;if(t.date=r.date,t.checkInTime=r.checkIn,t.checkOutTime=r.checkOut,t.note=r.note,t.checkOutTime){const e=new Date(`2000-01-01 ${t.checkInTime}`),a=new Date(`2000-01-01 ${t.checkOutTime}`),s=(a-e)/36e5;t.workHours=s.toFixed(1)+"小时"}else t.workHours="";t.checkInTime>e?(t.status="late",t.statusText="迟到"):(t.status="present",t.statusText=t.checkOutTime?"正常出勤":"已签到"),t.checkOutTime&&t.checkOutTime<a&&("late"===t.status?(t.status="late-early",t.statusText="迟到+早退"):(t.status="early-leave",t.statusText="早退")),v(),M.Ay.success("考勤记录已更新！")}else{const t=["周日","周一","周二","周三","周四","周五","周六"],s=t[new Date(r.date).getDay()],l={id:`ATT${String(Date.now())}`,date:r.date,weekday:s,checkInTime:r.checkIn,checkOutTime:r.checkOut,workHours:"",status:"present",statusText:r.checkOut?"正常出勤":"已签到",note:r.note};if(l.checkOutTime){const e=new Date(`2000-01-01 ${l.checkInTime}`),a=new Date(`2000-01-01 ${l.checkOutTime}`),t=(a-e)/36e5;l.workHours=t.toFixed(1)+"小时"}l.checkInTime>e&&(l.status="late",l.statusText="迟到"),l.checkOutTime&&l.checkOutTime<a&&("late"===l.status?(l.status="late-early",l.statusText="迟到+早退"):(l.status="early-leave",l.statusText="早退")),u.value.unshift(l),v(),M.Ay.success("考勤记录已添加！")}w()}catch(t){M.Ay.error("操作失败，请重试"),console.error("提交错误:",t)}finally{i.value=!1}}},_=e=>{const a=new Date,t=a.toTimeString().slice(0,5);e.checkOutTime=t;const s=new Date(`2000-01-01 ${e.checkInTime}`),l=new Date(`2000-01-01 ${t}`),o=(l-s)/36e5;e.workHours=o.toFixed(1)+"小时",e.statusText="正常出勤",v(),M.Ay.success("签退成功！")},E=e=>{if(confirm("确定要删除这条考勤记录吗？")){const a=u.value.findIndex(a=>a.id===e.id);-1!==a&&(u.value.splice(a,1),v(),M.Ay.success("考勤记录已删除"))}};return(0,l.sV)(()=>{x(),p(),g()}),{headerUserInfo:t,showModal:s,isEditing:o,submitting:i,editingRecord:n,attendanceForm:r,formErrors:d,attendanceStats:c,attendanceRecords:u,totalDays:m,averageHours:k,onTimeCount:h,lateCount:b,today:y,showAddModal:T,showEditModal:A,closeModal:w,submitRecord:F,handleCheckin:f,checkOut:_,deleteRecord:E}}});const jd=(0,r.A)(Wd,[["render",Xd],["__scopeId","data-v-405c2261"]]);var Hd=jd,qd=t(1262),Jd=t(6024),Vd=t(912),$d=t(3235),Qd=t(9729);const Bd={class:"my-files-container"},Gd={class:"main-content"},Yd={class:"content-area"},Zd={class:"stats-section"},ec={class:"stat-card"},ac={class:"stat-content"},tc={class:"stat-number"},sc={class:"stat-card"},lc={class:"stat-content"},oc={class:"stat-number"},ic={class:"stat-card"},nc={class:"stat-content"},rc={class:"stat-number"},dc={class:"stat-card"},cc={class:"stat-content"},uc={class:"stat-number"},vc={class:"file-management-section"},pc={class:"management-header"},mc={class:"left-actions"},kc={class:"right-actions"},hc=["onClick"],bc={class:"file-icon"},gc={class:"file-info"},Lc={class:"file-name"},fc={class:"file-meta"},yc={class:"file-size"},xc={class:"file-date"},Tc={class:"file-actions"};var Ac={__name:"MyFiles",setup(e){const a=(0,S.KR)(!1),t=(0,S.KR)(!1),o=(0,S.KR)(!1),i=(0,S.KR)(!1),n=(0,S.KR)(!1),r=(0,S.KR)(""),d=(0,S.KR)("grid"),c=(0,S.KR)(1),u=(0,S.KR)(null),p=(0,S.Kh)({totalFiles:0,totalSize:0,recentUploads:0,privateFiles:0}),m=(0,S.KR)([]),k=(0,S.KR)([]),h=(0,S.Kh)({name:"",description:""}),b=(0,S.Kh)({id:"",name:"",description:"",tags:[]}),g=(0,l.EW)(()=>{let e=m.value;return r.value&&(e=e.filter(e=>e.name.toLowerCase().includes(r.value.toLowerCase())||e.description?.toLowerCase().includes(r.value.toLowerCase()))),e}),L=()=>{const e=[{id:1,name:"项目计划书.docx",type:"document",size:2621440,uploadTime:new Date("2024-01-15"),description:"2024年第一季度项目计划",tags:["项目","计划","文档"],isPrivate:!1},{id:2,name:"会议记录.pdf",type:"document",size:524288,uploadTime:new Date("2024-01-14"),description:"团队周会会议记录",tags:["会议","记录"],isPrivate:!1},{id:3,name:"产品设计图.psd",type:"image",size:15728640,uploadTime:new Date("2024-01-13"),description:"新产品UI设计稿",tags:["设计","UI","产品"],isPrivate:!0},{id:4,name:"演示视频.mp4",type:"video",size:47185920,uploadTime:new Date("2024-01-12"),description:"产品功能演示视频",tags:["视频","演示","产品"],isPrivate:!1},{id:5,name:"数据报表.xlsx",type:"spreadsheet",size:262144,uploadTime:new Date("2024-01-11"),description:"月度销售数据报表",tags:["数据","报表","销售"],isPrivate:!1},{id:6,name:"代码文件.zip",type:"archive",size:8388608,uploadTime:new Date("2024-01-10"),description:"前端代码压缩包",tags:["代码","前端","开发"],isPrivate:!0}];m.value=e,f()},f=()=>{const e=m.value.length,a=m.value.reduce((e,a)=>e+a.size,0),t=m.value.filter(e=>{const a=(new Date-e.uploadTime)/864e5;return a<=7}).length,s=m.value.filter(e=>e.isPrivate).length;p.totalFiles=e,p.totalSize=a,p.recentUploads=t,p.privateFiles=s},y=e=>{const a={document:"📄",image:"🖼️",video:"🎥",audio:"🎵",spreadsheet:"📊",presentation:"📽️",archive:"📦",code:"💻",pdf:"📕",folder:"📁"};return a[e]||"📄"},x=e=>{if(0===e)return"0 B";const a=1024,t=["B","KB","MB","GB"],s=Math.floor(Math.log(e)/Math.log(a));return parseFloat((e/Math.pow(a,s)).toFixed(2))+" "+t[s]},T=e=>new Date(e).toLocaleDateString("zh-CN"),A=()=>{c.value=1},w=e=>{"folder"===e.type?M.Ay.info(`进入文件夹: ${e.name}`):M.Ay.info(`预览文件: ${e.name}`)},C=e=>{const a=e.size/1024/1024<50;return!!a||(M.Ay.error("文件大小不能超过50MB!"),!1)},F=e=>{try{window.dispatchEvent(new CustomEvent("userActivity",{detail:e}));const a="userActivities",t=localStorage.getItem(a),s=t?JSON.parse(t):[];s.unshift({id:Date.now(),type:e.type||"file",icon:"folder",title:e.title||"文件操作",time:e.time||(new Date).toTimeString().slice(0,5),status:e.status||"completed",statusText:e.statusText||"已完成"}),localStorage.setItem(a,JSON.stringify(s.slice(0,20)))}catch(a){}},_=async()=>{if(0!==k.value.length){n.value=!0;try{await new Promise(e=>setTimeout(e,2e3));const e=k.value.map((e,a)=>({id:Date.now()+a,name:e.name,type:E(e.name),size:e.size||1048576,uploadTime:new Date,description:"",tags:[],isPrivate:!1}));m.value.unshift(...e),f(),F({type:"file",title:"上传文件",status:"completed",statusText:"已完成"}),M.Ay.success("文件上传成功！"),a.value=!1,k.value=[]}catch(e){M.Ay.error("上传失败，请重试")}finally{n.value=!1}}else M.Ay.warning("请选择要上传的文件")},E=e=>{const a=e.split(".").pop().toLowerCase(),t={doc:"document",docx:"document",pdf:"pdf",jpg:"image",jpeg:"image",png:"image",gif:"image",mp4:"video",avi:"video",mov:"video",mp3:"audio",wav:"audio",flac:"audio",xls:"spreadsheet",xlsx:"spreadsheet",ppt:"presentation",pptx:"presentation",zip:"archive",rar:"archive","7z":"archive",js:"code",ts:"code",vue:"code",html:"code",css:"code"};return t[a]||"document"},I=async()=>{if(h.name.trim())try{await new Promise(e=>setTimeout(e,1e3));const e={id:Date.now(),name:h.name,type:"folder",size:0,uploadTime:new Date,description:h.description,tags:[],isPrivate:!1};m.value.unshift(e),f(),F({type:"file",title:"新建文件夹",status:"completed",statusText:"已完成"}),M.Ay.success("文件夹创建成功！"),t.value=!1,h.name="",h.description=""}catch(e){M.Ay.error("创建失败，请重试")}else M.Ay.warning("请输入文件夹名称")},D=e=>{b.id=e.id,b.name=e.name,b.description=e.description||"",b.tags=e.tags||[],o.value=!0},U=async()=>{if(b.name.trim())try{await new Promise(e=>setTimeout(e,1e3));const e=m.value.findIndex(e=>e.id===b.id);-1!==e&&(m.value[e].name=b.name,m.value[e].description=b.description,m.value[e].tags=b.tags,F({type:"file",title:"更新文件信息",status:"completed",statusText:"已完成"}),M.Ay.success("文件信息更新成功！"),o.value=!1)}catch(e){M.Ay.error("更新失败，请重试")}else M.Ay.warning("请输入文件名称")},R=e=>{u.value=e,i.value=!0},O=async()=>{if(u.value)try{await new Promise(e=>setTimeout(e,1e3));const e=m.value.findIndex(e=>e.id===u.value.id);-1!==e&&(m.value.splice(e,1),f(),F({type:"file",title:"删除文件",status:"completed",statusText:"已完成"}),M.Ay.success("文件删除成功！"),i.value=!1,u.value=null)}catch(e){M.Ay.error("删除失败，请重试")}},P=e=>{M.Ay.info(`开始下载文件: ${e.name}`)};return(0,l.sV)(()=>{L()}),(0,l.hi)(()=>{}),(e,c)=>{const m=(0,l.g2)("a-button"),L=(0,l.g2)("a-input-search"),f=(0,l.g2)("a-select-option"),F=(0,l.g2)("a-select"),E=(0,l.g2)("a-upload"),M=(0,l.g2)("a-modal"),N=(0,l.g2)("a-input"),K=(0,l.g2)("a-form-item"),z=(0,l.g2)("a-textarea"),X=(0,l.g2)("a-form");return(0,l.uX)(),(0,l.CE)("div",Bd,[(0,l.bF)(Oi,{title:"我的文件",subtitle:"管理您的个人文件和文档","icon-type":"folder",isUserSide:!0}),(0,l.Lk)("div",Gd,[(0,l.bF)(qi,{isAdmin:!1}),(0,l.Lk)("div",Yd,[(0,l.Lk)("div",Zd,[(0,l.Lk)("div",ec,[c[19]||(c[19]=(0,l.Lk)("div",{class:"stat-icon"},"📁",-1)),(0,l.Lk)("div",ac,[(0,l.Lk)("div",tc,(0,v.v_)(p.totalFiles),1),c[18]||(c[18]=(0,l.Lk)("div",{class:"stat-label"},"总文件数",-1))])]),(0,l.Lk)("div",sc,[c[21]||(c[21]=(0,l.Lk)("div",{class:"stat-icon"},"💾",-1)),(0,l.Lk)("div",lc,[(0,l.Lk)("div",oc,(0,v.v_)(x(p.totalSize)),1),c[20]||(c[20]=(0,l.Lk)("div",{class:"stat-label"},"总大小",-1))])]),(0,l.Lk)("div",ic,[c[23]||(c[23]=(0,l.Lk)("div",{class:"stat-icon"},"📤",-1)),(0,l.Lk)("div",nc,[(0,l.Lk)("div",rc,(0,v.v_)(p.recentUploads),1),c[22]||(c[22]=(0,l.Lk)("div",{class:"stat-label"},"最近上传",-1))])]),(0,l.Lk)("div",dc,[c[25]||(c[25]=(0,l.Lk)("div",{class:"stat-icon"},"🔒",-1)),(0,l.Lk)("div",cc,[(0,l.Lk)("div",uc,(0,v.v_)(p.privateFiles),1),c[24]||(c[24]=(0,l.Lk)("div",{class:"stat-label"},"私有文件",-1))])])]),(0,l.Lk)("div",vc,[(0,l.Lk)("div",pc,[(0,l.Lk)("div",mc,[(0,l.bF)(m,{type:"primary",onClick:c[0]||(c[0]=e=>a.value=!0),class:"action-btn"},{icon:(0,l.k6)(()=>[(0,l.bF)((0,S.R1)(qd.A))]),default:(0,l.k6)(()=>[c[26]||(c[26]=(0,l.eW)(" 上传文件 ",-1))]),_:1,__:[26]}),(0,l.bF)(m,{onClick:c[1]||(c[1]=e=>t.value=!0),class:"action-btn"},{icon:(0,l.k6)(()=>[(0,l.bF)((0,S.R1)(Jd.A))]),default:(0,l.k6)(()=>[c[27]||(c[27]=(0,l.eW)(" 新建文件夹 ",-1))]),_:1,__:[27]})]),(0,l.Lk)("div",kc,[(0,l.bF)(L,{value:r.value,"onUpdate:value":c[2]||(c[2]=e=>r.value=e),placeholder:"搜索文件...",style:{width:"200px","margin-right":"16px"},onSearch:A},null,8,["value"]),(0,l.bF)(F,{value:d.value,"onUpdate:value":c[3]||(c[3]=e=>d.value=e),style:{width:"120px"}},{default:(0,l.k6)(()=>[(0,l.bF)(f,{value:"grid"},{default:(0,l.k6)(()=>c[28]||(c[28]=[(0,l.eW)("网格视图",-1)])),_:1,__:[28]}),(0,l.bF)(f,{value:"list"},{default:(0,l.k6)(()=>c[29]||(c[29]=[(0,l.eW)("列表视图",-1)])),_:1,__:[29]})]),_:1},8,["value"])])]),(0,l.Lk)("div",{class:(0,v.C4)(["file-list",d.value])},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(g.value,e=>((0,l.uX)(),(0,l.CE)("div",{key:e.id,class:"file-item",onClick:a=>w(e)},[(0,l.Lk)("div",bc,(0,v.v_)(y(e.type)),1),(0,l.Lk)("div",gc,[(0,l.Lk)("div",Lc,(0,v.v_)(e.name),1),(0,l.Lk)("div",fc,[(0,l.Lk)("span",yc,(0,v.v_)(x(e.size)),1),(0,l.Lk)("span",xc,(0,v.v_)(T(e.uploadTime)),1)])]),(0,l.Lk)("div",Tc,[(0,l.bF)(m,{type:"text",size:"small",onClick:(0,s.D$)(a=>P(e),["stop"]),class:"action-btn"},{icon:(0,l.k6)(()=>[(0,l.bF)((0,S.R1)(Vd.A))]),_:2},1032,["onClick"]),(0,l.bF)(m,{type:"text",size:"small",onClick:(0,s.D$)(a=>D(e),["stop"]),class:"action-btn"},{icon:(0,l.k6)(()=>[(0,l.bF)((0,S.R1)($d.A))]),_:2},1032,["onClick"]),(0,l.bF)(m,{type:"text",size:"small",onClick:(0,s.D$)(a=>R(e),["stop"]),class:"action-btn",danger:""},{icon:(0,l.k6)(()=>[(0,l.bF)((0,S.R1)(Qd.A))]),_:2},1032,["onClick"])])],8,hc))),128))],2)])])]),(0,l.bF)(M,{open:a.value,"onUpdate:open":c[5]||(c[5]=e=>a.value=e),title:"上传文件",onOk:_,onCancel:c[6]||(c[6]=e=>a.value=!1),"confirm-loading":n.value},{default:(0,l.k6)(()=>[(0,l.bF)(E,{"file-list":k.value,"onUpdate:fileList":c[4]||(c[4]=e=>k.value=e),"before-upload":C,multiple:!0,"show-upload-list":!0},{default:(0,l.k6)(()=>[(0,l.bF)(m,null,{icon:(0,l.k6)(()=>[(0,l.bF)((0,S.R1)(qd.A))]),default:(0,l.k6)(()=>[c[30]||(c[30]=(0,l.eW)(" 选择文件 ",-1))]),_:1,__:[30]})]),_:1},8,["file-list"]),c[31]||(c[31]=(0,l.Lk)("div",{class:"upload-tips"},[(0,l.Lk)("p",null,"支持的文件类型：文档、图片、视频、音频等"),(0,l.Lk)("p",null,"单个文件大小限制：50MB")],-1))]),_:1,__:[31]},8,["open","confirm-loading"]),(0,l.bF)(M,{open:t.value,"onUpdate:open":c[9]||(c[9]=e=>t.value=e),title:"新建文件夹",onOk:I,onCancel:c[10]||(c[10]=e=>t.value=!1)},{default:(0,l.k6)(()=>[(0,l.bF)(X,{model:h,layout:"vertical"},{default:(0,l.k6)(()=>[(0,l.bF)(K,{label:"文件夹名称",name:"name"},{default:(0,l.k6)(()=>[(0,l.bF)(N,{value:h.name,"onUpdate:value":c[7]||(c[7]=e=>h.name=e),placeholder:"请输入文件夹名称"},null,8,["value"])]),_:1}),(0,l.bF)(K,{label:"描述",name:"description"},{default:(0,l.k6)(()=>[(0,l.bF)(z,{value:h.description,"onUpdate:value":c[8]||(c[8]=e=>h.description=e),placeholder:"请输入文件夹描述"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]),(0,l.bF)(M,{open:o.value,"onUpdate:open":c[14]||(c[14]=e=>o.value=e),title:"编辑文件信息",onOk:U,onCancel:c[15]||(c[15]=e=>o.value=!1)},{default:(0,l.k6)(()=>[(0,l.bF)(X,{model:b,layout:"vertical"},{default:(0,l.k6)(()=>[(0,l.bF)(K,{label:"文件名称",name:"name"},{default:(0,l.k6)(()=>[(0,l.bF)(N,{value:b.name,"onUpdate:value":c[11]||(c[11]=e=>b.name=e),placeholder:"请输入文件名称"},null,8,["value"])]),_:1}),(0,l.bF)(K,{label:"描述",name:"description"},{default:(0,l.k6)(()=>[(0,l.bF)(z,{value:b.description,"onUpdate:value":c[12]||(c[12]=e=>b.description=e),placeholder:"请输入文件描述"},null,8,["value"])]),_:1}),(0,l.bF)(K,{label:"标签",name:"tags"},{default:(0,l.k6)(()=>[(0,l.bF)(F,{value:b.tags,"onUpdate:value":c[13]||(c[13]=e=>b.tags=e),mode:"tags",placeholder:"请输入标签",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]),(0,l.bF)(M,{open:i.value,"onUpdate:open":c[16]||(c[16]=e=>i.value=e),title:"确认删除",onOk:O,onCancel:c[17]||(c[17]=e=>i.value=!1)},{default:(0,l.k6)(()=>[(0,l.Lk)("p",null,'确定要删除文件 "'+(0,v.v_)(u.value?.name)+'" 吗？此操作不可恢复。',1)]),_:1},8,["open"])])}}};const wc=(0,r.A)(Ac,[["__scopeId","data-v-e94187a6"]]);var Cc=wc,Fc=t(7939);const _c={class:"my-announcement-container"},Ec={class:"announcement-content"},Ic={class:"main-content"},Sc={class:"stats-overview"},Mc={class:"stat-card"},Dc={class:"stat-content"},Uc={class:"stat-number"},Rc={class:"stat-card"},Oc={class:"stat-content"},Pc={class:"stat-number"},Nc={class:"stat-card"},Kc={class:"stat-content"},zc={class:"stat-number"},Xc={class:"stat-card"},Wc={class:"stat-content"},jc={class:"stat-number"},Hc={class:"announcement-list"},qc={class:"list-header"},Jc={class:"filter-actions"},Vc={class:"announcement-grid"},$c=["onClick"],Qc={class:"card-header"},Bc={class:"announcement-type"},Gc={key:0,class:"important-badge"},Yc={key:1,class:"unread-badge"},Zc={class:"announcement-date"},eu={class:"card-title"},au={class:"card-content"},tu={class:"card-footer"},su={class:"publisher"},lu={class:"category"},ou={key:0,class:"announcement-detail"},iu={class:"detail-header"},nu={class:"detail-title"},ru={key:0,class:"important-badge"},du={class:"detail-meta"},cu={class:"detail-content"},uu={class:"content-text"},vu={key:0,class:"attachments"},pu={class:"attachment-list"},mu={class:"attachment-name"},ku={class:"detail-footer"};var hu={__name:"MyAnnouncement",setup(e){const a=(0,S.KR)(!1),t=(0,S.KR)(null),s=(0,S.KR)(""),o=(0,S.KR)("all"),i=(0,S.KR)(1),n=(0,S.Kh)({total:0,read:0,unread:0,important:0}),r=(0,S.KR)([]),d=(0,l.EW)(()=>{let e=r.value;return"unread"===o.value?e=e.filter(e=>!e.isRead):"read"===o.value?e=e.filter(e=>e.isRead):"important"===o.value&&(e=e.filter(e=>e.isImportant)),s.value&&(e=e.filter(e=>e.title.toLowerCase().includes(s.value.toLowerCase())||e.content.toLowerCase().includes(s.value.toLowerCase())||e.publisher.toLowerCase().includes(s.value.toLowerCase()))),e}),c=()=>{const e=[{id:1,title:"关于系统维护的通知",content:"为了提升系统性能，我们将于本周六凌晨2:00-6:00进行系统维护。维护期间系统将暂停服务，请提前做好相关工作安排。",publisher:"系统管理员",publishTime:new Date("2024-01-20 10:00:00"),tags:["系统","维护","通知"],isRead:!1,isImportant:!0,attachments:[{id:1,name:"维护计划.pdf",url:"#"}]},{id:2,title:"2024年春节放假安排",content:"根据国家规定和公司安排，2024年春节放假时间为2月10日-2月17日，共8天。2月18日正常上班。",publisher:"人事部",publishTime:new Date("2024-01-19 14:30:00"),tags:["放假","春节","人事"],isRead:!0,isImportant:!0,attachments:[]},{id:3,title:"新员工入职培训通知",content:"欢迎新同事加入我们的团队！新员工入职培训将于下周一上午9:00在会议室A举行，请准时参加。",publisher:"培训部",publishTime:new Date("2024-01-18 16:00:00"),tags:["培训","新员工","入职"],isRead:!1,isImportant:!1,attachments:[{id:2,name:"培训手册.docx",url:"#"},{id:3,name:"培训日程.xlsx",url:"#"}]},{id:4,title:"办公用品采购通知",content:"各部门如需采购办公用品，请于本周五前提交采购申请单。采购清单和预算请详细填写。",publisher:"行政部",publishTime:new Date("2024-01-17 11:00:00"),tags:["采购","办公用品","行政"],isRead:!0,isImportant:!1,attachments:[{id:4,name:"采购申请单.xlsx",url:"#"}]},{id:5,title:"项目进度汇报会议",content:"定于本周四下午2:00召开项目进度汇报会议，请各项目负责人准备相关材料并准时参加。",publisher:"项目管理部",publishTime:new Date("2024-01-16 15:30:00"),tags:["会议","项目","汇报"],isRead:!1,isImportant:!1,attachments:[]},{id:6,title:"员工健康体检安排",content:"为保障员工身体健康，公司将于下月组织年度健康体检。具体时间和地点另行通知。",publisher:"人事部",publishTime:new Date("2024-01-15 09:00:00"),tags:["体检","健康","人事"],isRead:!0,isImportant:!1,attachments:[]}];r.value=e,u()},u=()=>{const e=r.value.length,a=r.value.filter(e=>e.isRead).length,t=e-a,s=r.value.filter(e=>e.isImportant).length;n.total=e,n.read=a,n.unread=t,n.important=s},p=e=>new Date(e).toLocaleString("zh-CN"),m=e=>{const a={"系统":"blue","维护":"orange","通知":"green","放假":"red","春节":"red","人事":"purple","培训":"cyan","新员工":"blue","入职":"green","采购":"orange","办公用品":"blue","行政":"purple","会议":"cyan","项目":"blue","汇报":"green","体检":"green","健康":"green"};return a[e]||"default"},k=()=>{i.value=1},h=e=>{t.value=e,a.value=!0,e.isRead||b(e)},b=e=>{e.isRead=!0,u(),M.Ay.success("已标记为已读")},g=e=>{M.Ay.info(`开始下载附件: ${e.name}`)};return(0,l.sV)(()=>{c()}),(e,i)=>{const r=(0,l.g2)("a-select-option"),c=(0,l.g2)("a-select"),u=(0,l.g2)("a-input-search"),L=(0,l.g2)("a-tag"),f=(0,l.g2)("a-button"),y=(0,l.g2)("a-modal");return(0,l.uX)(),(0,l.CE)("div",_c,[(0,l.bF)(Oi,{title:"我的公告",subtitle:"查看重要公告信息","icon-type":"notification",isUserSide:!0}),(0,l.Lk)("div",Ec,[(0,l.bF)(qi,{isAdmin:!1}),(0,l.Lk)("div",Ic,[(0,l.Lk)("div",Sc,[(0,l.Lk)("div",Mc,[i[7]||(i[7]=(0,l.Lk)("div",{class:"stat-icon"},"📢",-1)),(0,l.Lk)("div",Dc,[(0,l.Lk)("div",Uc,(0,v.v_)(n.total),1),i[6]||(i[6]=(0,l.Lk)("div",{class:"stat-label"},"总公告数",-1))])]),(0,l.Lk)("div",Rc,[i[9]||(i[9]=(0,l.Lk)("div",{class:"stat-icon"},"📖",-1)),(0,l.Lk)("div",Oc,[(0,l.Lk)("div",Pc,(0,v.v_)(n.read),1),i[8]||(i[8]=(0,l.Lk)("div",{class:"stat-label"},"已读公告",-1))])]),(0,l.Lk)("div",Nc,[i[11]||(i[11]=(0,l.Lk)("div",{class:"stat-icon"},"👀",-1)),(0,l.Lk)("div",Kc,[(0,l.Lk)("div",zc,(0,v.v_)(n.unread),1),i[10]||(i[10]=(0,l.Lk)("div",{class:"stat-label"},"未读公告",-1))])]),(0,l.Lk)("div",Xc,[i[13]||(i[13]=(0,l.Lk)("div",{class:"stat-icon"},"⭐",-1)),(0,l.Lk)("div",Wc,[(0,l.Lk)("div",jc,(0,v.v_)(n.important),1),i[12]||(i[12]=(0,l.Lk)("div",{class:"stat-label"},"重要公告",-1))])])]),(0,l.Lk)("div",Hc,[(0,l.Lk)("div",qc,[i[17]||(i[17]=(0,l.Lk)("h2",null,"公告列表",-1)),(0,l.Lk)("div",Jc,[(0,l.bF)(c,{value:o.value,"onUpdate:value":i[0]||(i[0]=e=>o.value=e),style:{width:"120px","margin-right":"16px"}},{default:(0,l.k6)(()=>[(0,l.bF)(r,{value:"all"},{default:(0,l.k6)(()=>i[14]||(i[14]=[(0,l.eW)("全部公告",-1)])),_:1,__:[14]}),(0,l.bF)(r,{value:"unread"},{default:(0,l.k6)(()=>i[15]||(i[15]=[(0,l.eW)("未读公告",-1)])),_:1,__:[15]}),(0,l.bF)(r,{value:"important"},{default:(0,l.k6)(()=>i[16]||(i[16]=[(0,l.eW)("重要公告",-1)])),_:1,__:[16]})]),_:1},8,["value"]),(0,l.bF)(u,{value:s.value,"onUpdate:value":i[1]||(i[1]=e=>s.value=e),placeholder:"搜索公告...",style:{width:"200px"},onSearch:k},null,8,["value"])])]),(0,l.Lk)("div",Vc,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(d.value,e=>((0,l.uX)(),(0,l.CE)("div",{key:e.id,class:(0,v.C4)(["announcement-card",{unread:!e.isRead,important:e.isImportant}]),onClick:a=>h(e)},[(0,l.Lk)("div",Qc,[(0,l.Lk)("div",Bc,[e.isImportant?((0,l.uX)(),(0,l.CE)("span",Gc,"重要")):(0,l.Q3)("",!0),e.isRead?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("span",Yc,"未读"))]),(0,l.Lk)("div",Zc,(0,v.v_)(p(e.publishTime)),1)]),(0,l.Lk)("div",eu,(0,v.v_)(e.title),1),(0,l.Lk)("div",au,(0,v.v_)(e.content),1),(0,l.Lk)("div",tu,[(0,l.Lk)("div",su,"发布人："+(0,v.v_)(e.publisher),1),(0,l.Lk)("div",lu,"分类："+(0,v.v_)(e.category),1)])],10,$c))),128))])])])]),(0,l.bF)(y,{open:a.value,"onUpdate:open":i[4]||(i[4]=e=>a.value=e),title:"公告详情",width:"800px",onCancel:i[5]||(i[5]=e=>a.value=!1),footer:null},{default:(0,l.k6)(()=>[t.value?((0,l.uX)(),(0,l.CE)("div",ou,[(0,l.Lk)("div",iu,[(0,l.Lk)("h2",nu,[t.value.isImportant?((0,l.uX)(),(0,l.CE)("span",ru,"⭐")):(0,l.Q3)("",!0),(0,l.eW)(" "+(0,v.v_)(t.value.title),1)]),(0,l.Lk)("div",du,[(0,l.Lk)("p",null,[i[18]||(i[18]=(0,l.Lk)("strong",null,"发布者：",-1)),(0,l.eW)((0,v.v_)(t.value.publisher),1)]),(0,l.Lk)("p",null,[i[19]||(i[19]=(0,l.Lk)("strong",null,"发布时间：",-1)),(0,l.eW)((0,v.v_)(p(t.value.publishTime)),1)]),(0,l.Lk)("p",null,[i[20]||(i[20]=(0,l.Lk)("strong",null,"分类：",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(t.value.tags,e=>((0,l.uX)(),(0,l.Wv)(L,{key:e,color:m(e)},{default:(0,l.k6)(()=>[(0,l.eW)((0,v.v_)(e),1)]),_:2},1032,["color"]))),128))])])]),(0,l.Lk)("div",cu,[(0,l.Lk)("div",uu,(0,v.v_)(t.value.content),1),t.value.attachments&&t.value.attachments.length>0?((0,l.uX)(),(0,l.CE)("div",vu,[i[22]||(i[22]=(0,l.Lk)("h4",null,"附件：",-1)),(0,l.Lk)("div",pu,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(t.value.attachments,e=>((0,l.uX)(),(0,l.CE)("div",{key:e.id,class:"attachment-item"},[(0,l.bF)((0,S.R1)(Fc.A)),(0,l.Lk)("span",mu,(0,v.v_)(e.name),1),(0,l.bF)(f,{type:"link",size:"small",onClick:a=>g(e)},{default:(0,l.k6)(()=>i[21]||(i[21]=[(0,l.eW)(" 下载 ",-1)])),_:2,__:[21]},1032,["onClick"])]))),128))])])):(0,l.Q3)("",!0)]),(0,l.Lk)("div",ku,[t.value.isRead?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(f,{key:0,type:"primary",onClick:i[2]||(i[2]=e=>b(t.value))},{default:(0,l.k6)(()=>i[23]||(i[23]=[(0,l.eW)(" 标记为已读 ",-1)])),_:1,__:[23]})),(0,l.bF)(f,{onClick:i[3]||(i[3]=e=>a.value=!1)},{default:(0,l.k6)(()=>i[24]||(i[24]=[(0,l.eW)("关闭",-1)])),_:1,__:[24]})])])):(0,l.Q3)("",!0)]),_:1},8,["open"])])}}};const bu=(0,r.A)(hu,[["__scopeId","data-v-b202a6e2"]]);var gu=bu;const Lu={class:"user-data-manager"},fu={class:"content-wrapper"},yu={class:"main-content"},xu={class:"data-stats"},Tu={class:"stat-item"},Au={class:"stat-number"},wu={class:"stat-item"},Cu={class:"stat-number"},Fu={class:"stat-item"},_u={class:"stat-number"},Eu={class:"stat-item"},Iu={class:"stat-number"},Su={class:"data-actions"},Mu={class:"data-preview"};function Du(e,a,t,s,o,i){const n=(0,l.g2)("CommonHeader"),r=(0,l.g2)("CommonNavigation"),d=(0,l.g2)("a-card"),c=(0,l.g2)("a-col"),u=(0,l.g2)("a-row"),p=(0,l.g2)("a-icon"),m=(0,l.g2)("a-button"),k=(0,l.g2)("a-upload"),h=(0,l.g2)("a-table"),b=(0,l.g2)("a-tab-pane"),g=(0,l.g2)("a-tabs"),L=(0,l.g2)("a-modal");return(0,l.uX)(),(0,l.CE)("div",Lu,[(0,l.bF)(n,{isUserSide:!0}),(0,l.Lk)("div",fu,[(0,l.bF)(r),(0,l.Lk)("div",yu,[a[11]||(a[11]=(0,l.Lk)("div",{class:"page-header"},[(0,l.Lk)("h1",null,"我的数据管理"),(0,l.Lk)("p",null,"管理您的个人数据，包括备份、恢复和清除功能")],-1)),(0,l.Lk)("div",xu,[(0,l.bF)(u,{gutter:16},{default:(0,l.k6)(()=>[(0,l.bF)(c,{span:6},{default:(0,l.k6)(()=>[(0,l.bF)(d,null,{default:(0,l.k6)(()=>[(0,l.Lk)("div",Tu,[(0,l.Lk)("div",Au,(0,v.v_)(e.dataStats.attendanceCount),1),a[1]||(a[1]=(0,l.Lk)("div",{class:"stat-label"},"考勤记录",-1))])]),_:1})]),_:1}),(0,l.bF)(c,{span:6},{default:(0,l.k6)(()=>[(0,l.bF)(d,null,{default:(0,l.k6)(()=>[(0,l.Lk)("div",wu,[(0,l.Lk)("div",Cu,(0,v.v_)(e.dataStats.approvalCount),1),a[2]||(a[2]=(0,l.Lk)("div",{class:"stat-label"},"审批记录",-1))])]),_:1})]),_:1}),(0,l.bF)(c,{span:6},{default:(0,l.k6)(()=>[(0,l.bF)(d,null,{default:(0,l.k6)(()=>[(0,l.Lk)("div",Fu,[(0,l.Lk)("div",_u,(0,v.v_)(e.dataStats.fileCount),1),a[3]||(a[3]=(0,l.Lk)("div",{class:"stat-label"},"文件记录",-1))])]),_:1})]),_:1}),(0,l.bF)(c,{span:6},{default:(0,l.k6)(()=>[(0,l.bF)(d,null,{default:(0,l.k6)(()=>[(0,l.Lk)("div",Eu,[(0,l.Lk)("div",Iu,(0,v.v_)(e.dataStats.activityCount),1),a[4]||(a[4]=(0,l.Lk)("div",{class:"stat-label"},"活动记录",-1))])]),_:1})]),_:1})]),_:1})]),(0,l.Lk)("div",Su,[(0,l.bF)(u,{gutter:16},{default:(0,l.k6)(()=>[(0,l.bF)(c,{span:8},{default:(0,l.k6)(()=>[(0,l.bF)(d,{title:"数据备份",class:"action-card"},{extra:(0,l.k6)(()=>[(0,l.bF)(p,{type:"download"})]),default:(0,l.k6)(()=>[a[6]||(a[6]=(0,l.Lk)("p",null,"导出您的所有个人数据，包括考勤、审批、文件等记录",-1)),(0,l.bF)(m,{type:"primary",onClick:e.exportData,loading:e.exporting},{default:(0,l.k6)(()=>[(0,l.bF)(p,{type:"download"}),a[5]||(a[5]=(0,l.eW)(" 导出数据 ",-1))]),_:1,__:[5]},8,["onClick","loading"])]),_:1,__:[6]})]),_:1}),(0,l.bF)(c,{span:8},{default:(0,l.k6)(()=>[(0,l.bF)(d,{title:"数据恢复",class:"action-card"},{extra:(0,l.k6)(()=>[(0,l.bF)(p,{type:"upload"})]),default:(0,l.k6)(()=>[a[8]||(a[8]=(0,l.Lk)("p",null,"从备份文件中恢复您的个人数据",-1)),(0,l.bF)(k,{showUploadList:!1,beforeUpload:e.importData,accept:".json"},{default:(0,l.k6)(()=>[(0,l.bF)(m,{type:"primary"},{default:(0,l.k6)(()=>[(0,l.bF)(p,{type:"upload"}),a[7]||(a[7]=(0,l.eW)(" 导入数据 ",-1))]),_:1,__:[7]})]),_:1},8,["beforeUpload"])]),_:1,__:[8]})]),_:1}),(0,l.bF)(c,{span:8},{default:(0,l.k6)(()=>[(0,l.bF)(d,{title:"数据清除",class:"action-card"},{extra:(0,l.k6)(()=>[(0,l.bF)(p,{type:"delete"})]),default:(0,l.k6)(()=>[a[10]||(a[10]=(0,l.Lk)("p",null,"清除您的所有个人数据（不可恢复）",-1)),(0,l.bF)(m,{type:"danger",onClick:e.showClearConfirm},{default:(0,l.k6)(()=>[(0,l.bF)(p,{type:"delete"}),a[9]||(a[9]=(0,l.eW)(" 清除数据 ",-1))]),_:1,__:[9]},8,["onClick"])]),_:1,__:[10]})]),_:1})]),_:1})]),(0,l.Lk)("div",Mu,[(0,l.bF)(d,{title:"数据预览"},{default:(0,l.k6)(()=>[(0,l.bF)(g,null,{default:(0,l.k6)(()=>[(0,l.bF)(b,{key:"attendance",tab:"考勤记录"},{default:(0,l.k6)(()=>[(0,l.bF)(h,{columns:e.attendanceColumns,dataSource:e.attendanceData,pagination:{pageSize:5},size:"small"},null,8,["columns","dataSource"])]),_:1}),(0,l.bF)(b,{key:"approval",tab:"审批记录"},{default:(0,l.k6)(()=>[(0,l.bF)(h,{columns:e.approvalColumns,dataSource:e.approvalData,pagination:{pageSize:5},size:"small"},null,8,["columns","dataSource"])]),_:1}),(0,l.bF)(b,{key:"files",tab:"文件记录"},{default:(0,l.k6)(()=>[(0,l.bF)(h,{columns:e.fileColumns,dataSource:e.fileData,pagination:{pageSize:5},size:"small"},null,8,["columns","dataSource"])]),_:1}),(0,l.bF)(b,{key:"activities",tab:"活动记录"},{default:(0,l.k6)(()=>[(0,l.bF)(h,{columns:e.activityColumns,dataSource:e.activityData,pagination:{pageSize:5},size:"small"},null,8,["columns","dataSource"])]),_:1})]),_:1})]),_:1})])])]),(0,l.bF)(L,{title:"确认清除数据",visible:e.showClearModal,onOk:e.clearData,onCancel:a[0]||(a[0]=a=>e.showClearModal=!1),okText:"确认清除",cancelText:"取消",okType:"danger"},{default:(0,l.k6)(()=>a[12]||(a[12]=[(0,l.Lk)("p",null,"您确定要清除所有个人数据吗？此操作不可恢复！",-1),(0,l.Lk)("p",null,"将清除以下数据：",-1),(0,l.Lk)("ul",null,[(0,l.Lk)("li",null,"考勤记录"),(0,l.Lk)("li",null,"审批记录"),(0,l.Lk)("li",null,"文件记录"),(0,l.Lk)("li",null,"活动记录"),(0,l.Lk)("li",null,"个人信息设置")],-1)])),_:1,__:[12]},8,["visible","onOk"])])}var Uu=(0,l.pM)({name:"UserDataManager",components:{CommonHeader:Oi,CommonNavigation:qi},setup(){const e=(0,S.KR)(!1),a=(0,S.KR)(!1),t=(0,S.Kh)({attendanceCount:0,approvalCount:0,fileCount:0,activityCount:0}),s=(0,S.KR)([]),o=(0,S.KR)([]),i=(0,S.KR)([]),n=(0,S.KR)([]),r=[{title:"日期",dataIndex:"date",key:"date"},{title:"签到时间",dataIndex:"checkInTime",key:"checkInTime"},{title:"签退时间",dataIndex:"checkOutTime",key:"checkOutTime"},{title:"状态",dataIndex:"statusText",key:"statusText"}],d=[{title:"申请类型",dataIndex:"type",key:"type"},{title:"申请内容",dataIndex:"content",key:"content"},{title:"申请时间",dataIndex:"applyTime",key:"applyTime"},{title:"状态",dataIndex:"status",key:"status"}],c=[{title:"文件名",dataIndex:"name",key:"name"},{title:"类型",dataIndex:"type",key:"type"},{title:"大小",dataIndex:"size",key:"size"},{title:"上传时间",dataIndex:"uploadTime",key:"uploadTime"}],u=[{title:"活动类型",dataIndex:"type",key:"type"},{title:"活动内容",dataIndex:"title",key:"title"},{title:"时间",dataIndex:"time",key:"time"},{title:"状态",dataIndex:"statusText",key:"statusText"}],v=()=>{const e=X(),a=W(),l=j(),r=K();t.attendanceCount=e.length,t.approvalCount=a.length,t.fileCount=l.length,t.activityCount=r.length,s.value=e.slice(0,10),o.value=a.slice(0,10),i.value=l.slice(0,10),n.value=r.slice(0,10)},p=async()=>{e.value=!0;try{const e=J(),a=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),t=URL.createObjectURL(a),s=document.createElement("a");s.href=t,s.download=`user_data_${e.username}_${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(t),M.Ay.success("数据导出成功！")}catch(a){M.Ay.error("数据导出失败！"),console.error("导出错误:",a)}finally{e.value=!1}},m=e=>{const a=new FileReader;return a.onload=e=>{try{const a=JSON.parse(e.target.result);V(a)?(M.Ay.success("数据导入成功！"),v()):M.Ay.error("数据导入失败！")}catch(a){M.Ay.error("文件格式错误！"),console.error("导入错误:",a)}},a.readAsText(e),!1},k=()=>{a.value=!0},h=()=>{try{q()?(M.Ay.success("数据清除成功！"),v()):M.Ay.error("数据清除失败！")}catch(e){M.Ay.error("数据清除失败！"),console.error("清除错误:",e)}finally{a.value=!1}};return(0,l.sV)(()=>{v()}),{exporting:e,showClearModal:a,dataStats:t,attendanceData:s,approvalData:o,fileData:i,activityData:n,attendanceColumns:r,approvalColumns:d,fileColumns:c,activityColumns:u,exportData:p,importData:m,showClearConfirm:k,clearData:h}}});const Ru=(0,r.A)(Uu,[["render",Du],["__scopeId","data-v-018e9fa4"]]);var Ou=Ru;const Pu=[{path:"/",name:"Home",component:Be,meta:{requiresAuth:!0,title:"首页"}},{path:"/login",name:"Login",component:oe,meta:{requiresAuth:!1}},{path:"/user",name:"UserHome",component:Vn,meta:{requiresAuth:!0,title:"用户主页"}},{path:"/user/workbench",name:"UserWorkbench",component:_r,meta:{requiresAuth:!0,title:"我的工作台"}},{path:"/user/profile",name:"UserProfile",component:Tn,meta:{requiresAuth:!0,title:"个人信息"}},{path:"/user/approval",name:"MyApproval",component:cd,meta:{requiresAuth:!0,title:"我的审批"}},{path:"/user/attendance",name:"MyAttendance",component:Hd,meta:{requiresAuth:!0,title:"我的考勤"}},{path:"/user/files",name:"MyFiles",component:Cc,meta:{requiresAuth:!0,title:"我的文件"}},{path:"/user/announcement",name:"MyAnnouncement",component:gu,meta:{requiresAuth:!0,title:"我的公告"}},{path:"/user/data-manager",name:"UserDataManager",component:Ou,meta:{requiresAuth:!0,title:"数据管理"}},{path:"/admin/employee",name:"Employee",component:Ka,meta:{requiresAuth:!0,title:"员工管理"}},{path:"/admin/approval",name:"Approval",component:wt,meta:{requiresAuth:!0,title:"审批管理"}},{path:"/admin/attendance",name:"Attendance",component:os,meta:{requiresAuth:!0,title:"考勤管理"}},{path:"/admin/announcement",name:"Announcement",component:js,meta:{requiresAuth:!0,title:"公告管理"}},{path:"/admin/file",name:"FileManager",component:Sl,meta:{requiresAuth:!0,title:"文件管理"}},{path:"/admin/user",name:"UserManagement",component:ho,meta:{requiresAuth:!0,title:"用户管理"}},{path:"/admin/system",name:"System",component:Zo,meta:{requiresAuth:!0,title:"系统监控"}},{path:"/admin/profile",name:"Profile",component:yi,meta:{requiresAuth:!0,title:"个人资料"}},{path:"/employee",redirect:"/admin/employee"},{path:"/approval",redirect:"/admin/approval"},{path:"/attendance",redirect:"/admin/attendance"},{path:"/announcement",redirect:"/admin/announcement"},{path:"/file",redirect:"/admin/file"},{path:"/user-management",redirect:"/admin/user"},{path:"/system",redirect:"/admin/system"},{path:"/profile",redirect:"/admin/profile"}],Nu=(0,u.aE)({history:(0,u.LA)("/"),routes:Pu});Nu.beforeEach((e,a,t)=>{if(console.log("路由跳转:",{from:a.path,to:e.path,requiresAuth:e.meta.requiresAuth}),"/login"!==e.path){if(e.meta.requiresAuth){const e=localStorage.getItem("token");if(!e)return console.log("未登录，跳转到登录页面"),void t("/login")}t()}else t()});var Ku=Nu,zu=t(6278),Xu=(0,zu.y$)({state:{user:null,token:localStorage.getItem("token")||null},mutations:{SET_USER(e,a){e.user=a},SET_TOKEN(e,a){e.token=a,a?localStorage.setItem("token",a):localStorage.removeItem("token")}},actions:{login({commit:e},{user:a,token:t}){e("SET_USER",a),e("SET_TOKEN",t)},logout({commit:e}){e("SET_USER",null),e("SET_TOKEN",null)}},getters:{isAuthenticated:e=>!!e.token,currentUser:e=>e.user}}),Wu=t(4303),ju=(t(4529),t(3392)),Hu=(t(4188),t(8548)),qu=t(4335);qu.A.defaults.baseURL="http://localhost:8080/api",qu.A.defaults.timeout=1e4,qu.A.interceptors.request.use(e=>{const a=localStorage.getItem("token");return a&&(e.headers.Authorization=`Bearer ${a}`),e},e=>Promise.reject(e)),qu.A.interceptors.response.use(e=>e,e=>(e.response&&401===e.response.status&&Ku.push("/login"),Promise.reject(e)));const Ju=(0,s.Ef)(c);Z(Ju),Ju.use(Xu),Ju.use(Ku),Ju.use(Wu.Ay),Ju.use(ju.A);for(const[Vu,$u]of Object.entries(Hu))Ju.component(Vu,$u);Ju.mount("#app")}},a={};function t(s){var l=a[s];if(void 0!==l)return l.exports;var o=a[s]={id:s,loaded:!1,exports:{}};return e[s].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}t.m=e,function(){var e=[];t.O=function(a,s,l,o){if(!s){var i=1/0;for(c=0;c<e.length;c++){s=e[c][0],l=e[c][1],o=e[c][2];for(var n=!0,r=0;r<s.length;r++)(!1&o||i>=o)&&Object.keys(t.O).every(function(e){return t.O[e](s[r])})?s.splice(r--,1):(n=!1,o<i&&(i=o));if(n){e.splice(c--,1);var d=l();void 0!==d&&(a=d)}}return a}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[s,l,o]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){t.d=function(e,a){for(var s in a)t.o(a,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:a[s]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};t.O.j=function(a){return 0===e[a]};var a=function(a,s){var l,o,i=s[0],n=s[1],r=s[2],d=0;if(i.some(function(a){return 0!==e[a]})){for(l in n)t.o(n,l)&&(t.m[l]=n[l]);if(r)var c=r(t)}for(a&&a(s);d<i.length;d++)o=i[d],t.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return t.O(c)},s=self["webpackChunksmart_oa_frontend"]=self["webpackChunksmart_oa_frontend"]||[];s.forEach(a.bind(null,0)),s.push=a.bind(null,s.push.bind(s))}();var s=t.O(void 0,[504],function(){return t(6752)});s=t.O(s)})();
//# sourceMappingURL=app.4e837aa4.js.map